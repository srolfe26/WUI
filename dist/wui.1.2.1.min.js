/*! Wui 1.2.1
 * Copyright (c) 2015 Stephen Rolfe Nielsen (rolfe.nielsen@gmail.com)
 *
 * @license MIT
 * http://www.wui-js.com/wui-1-2-1/license.html
 */ 

!function(e,t,i){"undefined"!=typeof module&&module.exports?module.exports=i():e[t]=i()}(this,"verge",function(){var e={},t="undefined"!=typeof window&&window,i="undefined"!=typeof document&&document,n=i&&i.documentElement,a=t.matchMedia||t.msMatchMedia,r=a?function(e){return!!a.call(t,e).matches}:function(){return!1};return e.viewportW=function(){var e=n.clientWidth,i=t.innerWidth;return i>e?i:e},e.viewportH=function(){var e=n.clientHeight,i=t.innerHeight;return i>e?i:e},e.mq=r,e.matchMedia=a?function(){return a.apply(t,arguments)}:function(){return{}},e}),jQuery.extend(verge),function(e){e.getMaxZ=function(){var t=e("body *"),i=t.length<2500?t:e('body > *, [style*="z-index"]'),n=Math.max.apply(null,e.map(i,function(t){return"static"!=e(t).css("position")?parseInt(e(t).css("z-index"))||0:void 0}));return(e.isNumeric(n)?n:0)+1}}(jQuery),function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);var i=""===t.handle?this:e(this.find(t.handle)[0]);return i.css("cursor",t.cursor).on("mousedown",function(i){var n=""===t.handle?e(this).addClass("draggable"):e(this).addClass("active-handle").parent().addClass("draggable"),a=n.css("z-index"),r=n.outerHeight(),l=n.outerWidth(),o=n.offset().top+r-i.pageY,s=n.offset().left+l-i.pageX;n.css("z-index",e.getMaxZ()).parents().on("mousemove",function(t){e(".draggable").offset({top:t.pageY+o-r,left:t.pageX+s-l}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",a)})}),i.preventDefault()}).on("mouseup",function(){""===t.handle?e(this).removeClass("draggable"):e(this).removeClass("active-handle").parent().removeClass("draggable")})}}(jQuery),function(e){e.fn.resizes=function(t){function i(){var i=s.outerWidth(),a=s.outerHeight();s.removeClass("w121-resizing"),(l!=i||o!=a)&&(e(document).off("mousemove.resizes"),"function"==typeof t.afterResize&&t.afterResize(s,i,a),n())}function n(){document.selection?document.selection.empty():window.getSelection().removeAllRanges()}var a,r,l,o,s=e(this);t=e.extend({anchored:!1,minWidth:0,minHeight:0,direction:"se",resizeStart:null,duringResize:null,afterResize:null},t);var d="se"==t.direction,u=d?"resize-nub":"resize-bar";return s.css("overflow","visible").mousedown(function(){l=s.outerWidth(),o=s.outerHeight()}).append(e("<div>").addClass(u).click(function(e){e.stopPropagation()}).mousedown(function(i){var u=parseInt(s.css("left")),c=parseInt(s.css("top"));a=i.clientX,r=i.clientY,s.addClass("w121-resizing").css({flex:"",width:s.css("width"),height:s.css("height")}),"function"==typeof t.resizeStart&&t.resizeStart(s),e(document).off("mousemove.resizes"),e(document).on("mousemove.resizes",function(e){var i=e.clientX-a,h=e.clientY-r,f=l+i*(t.anchored?1:2),p=d?o+h*(t.anchored?1:2):s.css("height"),g=function(){return f<t.minWidth?(i=0,f=t.minWidth,parseInt(s.css("left"))):u}(),m=function(){return p<t.minHeight?(h=0,p=t.minHeight,parseInt(s.css("top"))):c}();"function"==typeof t.duringResize&&t.duringResize(s,f,p),s.css({width:f,height:p,left:t.anchored?parseInt(s.css("left")):g-i,top:t.anchored?parseInt(s.css("top")):m-h}),n()})}).mouseup(function(e){i(),e.stopPropagation()})).mouseup(i)}}(jQuery);var _wuiVar=function(){var e,t={version:"wui-lite-1",dict:[]},i=function(e){var t=e instanceof jQuery?e:"string"==typeof e?$(e):[e],i=window[_wuiVar].dict.filter(function(e){return $.inArray(e.el,t)>-1}),n=function(e){var t=[];return e.forEach(function(e){t.push(e.itm)}),t}(i);return n};return e="undefined"==typeof Wui?"Wui":"_w",window[e]=i,$.extend(window[e],t),e}();!function(e,t,i){i.dict=[],e.ajaxSetup({cache:!1}),i.cssCheck=function(e){for(var t=0,i=e.split("-"),n="";t<i.length;t++)n+=i[t].charAt(0).toUpperCase()+i[t].slice(1);for(var a=0,r=document.createElement("detect"),l=n.charAt(0).toLowerCase()+n.slice(1),o="Webkit Moz O ms".split(" "),s="-webkit- -moz- -o- -ms-".split(" "),d=(e+" "+l+" "+o.join(n+" ")+n).split(" "),u=!1;a<d.length;a++)if(""===r.style[d[a]]){u=d[a];break}if(!u)return!1;switch(a){case 0:case 1:return e;default:return s[a-2]+e}},i.fit=function(t,n){if(t instanceof Array&&t.length>0){var a=t[0].parent?t[0].parent:t[0].el.parent(),r=a.el?a.elAlias||a.el:a,l=function(){if("undefined"==typeof n){var e=r.css("flex-direction");return"undefined"!=typeof e?e:"row"}return"width"==n?"row":"column"}(),o=0;n="row"==l?"width":"height",t.forEach(function(e){e.fit>=0&&(o+=e.fit)}),1>o&&(t[t.length-1].fit=1),r.css("display",i.cssCheck("flex")).css(i.cssCheck("flex-direction"),l),t.forEach(function(t){var a={};t.fit>=0?(a[i.cssCheck("flex-grow")]=t.fit,a[n]=""):void 0===t.cssByParam&&(a[n]=t[n],a[i.cssCheck("flex-grow")]=""),t.cssByParam&&e.extend(a,t.cssByParam(!0)),e(t.el).css(a)})}else console.log("Improper collection specified",arguments,arguments.callee.caller)},i.forAjaxFileUpload=function(e,i){var n=0,a=0,r=new FormData;for(n in e)if(e[n]instanceof t.FileList)if(e[n].length>1||i)for(a=0;a<e[n].length;a++)r.append(n+"_"+a,e[n][a]);else r.append(n,e[n][0]);else null===e[n]?r.append(n,""):r.append(n,e[n]);return r},i.getKeys=function(t){var i=[];return t&&e.each(t,function(e){i.push(e)}),i.sort()},i.id=function(e){return void 0===i.idCounter&&(i.idCounter=0),(e&&0!==e.length?e+"-":"w121-")+i.idCounter++},i.isPercent=function(){return arguments[0]&&arguments[0].indexOf&&-1!=arguments[0].indexOf("%")},i.maxZ=function(){return e.getMaxZ()},i.percentToPixels=function(i,n,a){var r=i.parent(),l=r[0]===e(t)[0]||r[0]===e("html")[0]||r[0]===e("body")[0],o=l?"height"==a?e.viewportH():e.viewportW():r[a]();return Math.floor(parseFloat(n)/100*o)},i.positionItem=function(n,a){var r=n[0].getBoundingClientRect(),l=r.top,o=function(){var t="absolute";return n.add(n.parents()).each(function(){"fixed"===e(this).css("position")&&(t="fixed")}),t}(),s=a.outerWidth(),d=a.outerHeight(),u=function(){var t=l+n.outerHeight()+d<e.viewportH();return!t&&0>l-d?(d=l-5,t=l+n.outerHeight()+d<e.viewportH()):d="",t}(),c=r.left+n.outerWidth()-s>0;"fixed"===o&&(l+=e(t).scrollTop()),a.css({left:c?r.left+n.outerWidth()-s:r.left,top:u?l+n.outerHeight():l-(e.isNumeric(d)?d:a.outerHeight()),height:d,position:o,zIndex:i.maxZ()})},i.randNum=function(e,t){return t=t-e+1,e+Math.floor(Math.random()*t)},i.scrollbarWidth=function(){var t,i,n;return void 0===n&&(t=e('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),i=t.children(),n=i.innerWidth()-i.height(99).innerWidth(),t.remove()),n},i.unwrapData=function(e){var t=this,n=t.hasOwnProperty("dataContainer")?t.dataContainer:i.Data.prototype.dataContainer,a=t.hasOwnProperty("totalContainer")?t.totalContainer:i.Data.prototype.totalContainer,r=n&&e[n]?e[n]:e,l=a&&e[a]?e[a]:r.length;return{data:r,total:l}}}(jQuery,this,window[_wuiVar]),function(e,t){t.O=function(t){e.extend(this,{afterRendered:!1,hidden:!1,items:[],rendered:!1},t)},t.O.prototype={addToDOM:function(t,i,n){var a=t.appendTo&&"function"!=typeof t.appendTo?t.appendTo:t.prependTo&&"function"!=typeof t.prependTo?t.prependTo:i?i:t.parent&&"undefined"!=typeof t.parent.elAlias?t.parent.elAlias:t.parent&&"undefined"!=typeof t.parent.el?t.parent.el:e("body"),r=t.appendTo&&"function"!=typeof t.appendTo?"append":t.prependTo&&"function"!=typeof t.prependTo?"prepend":"undefined"!=typeof n&&a[n]?n:"append";try{e(a)[r]("undefined"!=typeof t.el?t.el:t)}catch(l){}return t.cssByParam&&t.cssByParam(),t},afterRender:function(){this.afterRendered=!0},append:function(){var e=this.elAlias||this.el,t=function(e){var t=[];return Array.prototype.forEach.call(e,function(e){t.push(e.el||e)}),t}(arguments);e.append.apply(e,t)},argsByParam:function(t,i){var n=this,a={},r={},l=["id","name","tabindex","lang","title"],o=["id","name","tabIndex","lang","titleAttr"];l.forEach(function(l,s){var d=n[o[s]];("string"==typeof d||"number"==typeof d)&&(i&&t instanceof Array?"id"==l&&e.inArray(l,t)>-1?r[l]=d:(a[l]=d,e.inArray(l,t)>-1&&(r[l]=d)):a[l]=d)}),e(n.el).attr(a),i&&i.attr(r)},clear:function(){var e=this,t=e.elAlias||e.el;t.children().remove()},cssByParam:function(i){var n,a=this,r=a.el,l={};a.argsByParam(),"undefined"==typeof a.parent&&a.layout();try{a.attr&&"object"==typeof a.attr&&r.attr(a.attr)}catch(o){}return e.isNumeric(a.height)&&a.height>=0&&e.extend(l,{height:a.height}),e.isNumeric(a.width)&&a.width>=0&&e.extend(l,{width:a.width,flex:"none"}),t.isPercent(a.width)&&(n=t.percentToPixels(r,a.width,"width"),0!==n&&e.extend(l,{width:n,flex:"none"})),t.isPercent(a.height)&&(n=t.percentToPixels(r,a.height,"height"),0!==n&&e.extend(l,{height:n})),a.hidden&&e.extend(l,"display","none"),i===!0?l:e.isEmptyObject(l)?r.addClass(a.cls):r.addClass(a.cls).css(l)},each:function(e,t){t="undefined"==typeof t?!0:t;var i=t?0:this.items.length-1;if(this.items)if(t)for(i;i<this.items.length&&e(this.items[i],i)!==!1;i++);else for(i;i>=0&&e(this.items[i],i)!==!1;i--);return!0},move:function(t){var i=this,n=i.index();t=e.isNumeric(t)?t:0,void 0!==n&&(i=Array.prototype.splice.call(i.parent.items,n,1)[0],Array.prototype.splice.call(i.parent.items,t,0,i),0===t?i.parent.items[1].el.before(i.el):t>i.parent.items.length?i.parent.items[i.parent.items.length-2].el.after(i.el):i.parent.items[t-1].el.after(i.el))},hide:function(){return this.el.css("display","none"),"function"==typeof arguments[1]&&arguments[1](),this.el},index:function(){var e,t=this;return t.parent&&t.parent.each(function(i,n){i===t&&(e=n)}),e},init:function(){var e=this;"undefined"!=typeof e.el&&e.el[0]&&void 0===t.dict.filter(function(t){return t.el===e.el[0]})[0]&&t.dict.push({itm:e,el:e.el[0]}),e.items=void 0!==e.items?e.items:[]},layout:function(e){var i=this,n=!1,a=0;for(i.rendered||i.onRender(),a;a<i.items.length;a++)i.items[a].fit&&(n=!0),i.items[a].layout&&i.items[a].layout();i.items.length&&(i.fitDimension||n)&&t.fit(i.items,i.fitDimension||void 0),i.afterRendered||i.afterRender(),"function"==typeof e&&e()},onRender:function(){this.rendered!==!0&&(void 0===this.items&&(this.items=[]),this.items.forEach(function(e){e.onRender&&window.setTimeout(function(){e.onRender()},0)})),this.rendered=!0},place:function(e){var t,i=this;return i.items.forEach(function(e){e.parent=i,e.place?e.place():i.addToDOM(e)}),t=i.addToDOM(i),e&&"function"==typeof e&&e(i),t},push:function(){var e=this;return Array.prototype.forEach.call(arguments,function(t){t.parent=e,t.place?t.place():e.addToDOM(t),t.layout&&t.layout()}),Array.prototype.push.apply(e.items,arguments)},remove:function(){this.parent?this.parent.splice(this.index(),1):this.el.remove()},show:function(){return this.el.show(),"function"==typeof arguments[1]&&arguments[1](),this.el},splice:function(e,t){var i=this,n=i.elAlias||i.el;e=parseInt(e);for(var a=e;e+t>a;a++)i.items[a]&&(i.items[a].el||i.items[a]).remove();var r=e>=i.items.length,l=Array.prototype.splice.apply(i.items,arguments),o=function(e){for(var t=[],i=2;i<e.length;i++)t.push(e[i]);return t}(arguments),s=0===e||r?void 0:i.items[e-1].el||i.items[e-1];return o.forEach(function(t){t.parent=i,0===e&&void 0===s?(i.addToDOM(t,n,"prepend"),s=t.el||t):r?i.addToDOM(t,n,"append"):(i.addToDOM(t,s,"after"),s=t.el||t),t.layout&&t.layout()}),l}},t.Button=function(t){e.extend(this,{disabled:!1,el:e("<button>").attr({unselectable:"on"}),tabIndex:0,text:"Button",toolTip:null},t),this.init()},t.Button.prototype=e.extend(new t.O,{click:function(){},disable:function(){this.disabled=!0,this.el.addClass("disabled").attr("disabled",!0).removeAttr("tabindex")},enable:function(){this.disabled=!1,this.el.removeClass("disabled").removeAttr("disabled").attr({tabindex:this.tabIndex})},init:function(){function i(){return n.disabled||(Array.prototype.push.call(arguments,n),n.click.apply(n,arguments),n.el.trigger(e.Event("wuibtnclick."+n.id),[n]).trigger(e.Event("wuibtnclick"),[n])),!1}var n=this;t.O.prototype.init.call(n),n.el.addClass("w121-button"+(n.disabled?" disabled":"")).click(i).keypress(function(e){return(13==e.keyCode||32==e.keyCode)&&i(e),!1}).html(n.text).attr({title:n.toolTip,tabindex:n.tabIndex})},setText:function(e){return this.el.html(e)}}),t.Data=function(t){e.extend(this,{data:[],identity:null,name:null,params:{},url:null,ajaxConfig:{},total:0},t)},t.Data.prototype={dataContainer:null,totalContainer:null,dataChanged:function(){},dataEach:function(e){for(var t=0;t<this.data.length&&e(this.data[t],t)!==!1;t++);return!0},loadData:function(){var t=this,i=e.extend({data:t.params,dataType:"json",success:function(){t.success.apply(t,arguments)},error:function(){t.failure.apply(t,arguments)}},t.ajaxConfig),n=t.setParams.apply(t,arguments),a=t.beforeLoad.apply(t,arguments);return n!==!1&&a!==!1?(t.lastRequest&&4!=t.lastRequest.readyState&&t.lastRequest.abort(),t.lastRequest=e.ajax(t.url,i),t.lastRequest):e.Deferred().reject()},setParams:function(t){t&&"object"==typeof t&&e.extend(this.params,t)},setData:function(t,i){var n=this;n.beforeSet(t),n.data=n.processData(t),n.total=e.isNumeric(i)?i:n.data?n.data.length:0,n.fireDataChanged()},fireDataChanged:function(){var t=this,i=t.name||"w121-data";t.dataChanged(t.data),e(document).trigger(e.Event("datachanged."+i),[i,t]).trigger(e.Event("datachanged"),[i,t]),t.afterSet(t.data)},beforeLoad:function(){},afterSet:function(){},beforeSet:function(){},success:function(e){var i=this,n=t.unwrapData.call(i,e);i.onSuccess(e),i.setData(n.data,n.total)},onSuccess:function(){},onFailure:function(){},failure:function(e){this.onFailure(e)},processData:function(e){return e},push:function(){var e=Array.prototype.push.apply(this.data||(this.data=[]),arguments);return this.total=this.data.length,this.fireDataChanged(),e},splice:function(){var e=Array.prototype.splice.apply(this.data||(this.data=[]),arguments);return this.total=this.data.length,this.fireDataChanged(),e}},t.Template=function(t){e.extend(this,t)},t.Template.prototype={template:null,data:null,make:function(i){var n=this;if(n.data&&n.template){var a=n.template;return e.isNumeric(i)&&e.extend(n.data,{wuiIndex:i}),e(a.replace(/\{(\w*)\}/g,function(){var e=arguments[1];return void 0!==n.data[e]?n.data[e]:""}).replace(/\{\((.*?)\)\}/g,function(){var e=arguments[1],i=t.getKeys(n.data),a=[],r=0;for(i.push("wuiRecord"),r=i.length-1;r>=0;r--)i[r].match(/\b\d+/g)&&i.splice(r,1);for(r=0;r<i.length;r++)a.push(n.data[i[r]]);a.push(n.data),i.push("return "+e);var l=Function.apply(null,i);return l.apply(null,a)}))}throw new Error("Wui.js - Template engine missing data and/or template.")}},t.DataList=function(t){var i=this;e.extend(i,{afterMake:function(){},autoLoad:!0,displayMax:-1,el:e("<div>"),focusOnSelect:!0,interactive:!0,multiSelect:!1,selected:[]},t),i.init()},t.DataList.prototype=e.extend(new t.O,new t.Data,{dataChanged:function(){this.make()},clearSelect:function(){var t=this,i=t.name?"."+t.name:"",n=t.elAlias||t.el;n.find(".w121-selected").removeClass("w121-selected"),t.selected=[],t.el.trigger(e.Event("wuichange"+i),[t,t.el,{},t.selected]).trigger(e.Event("wuichange"),[t,t.el,{},t.selected])},copyArryRecs:function(t){var i=[];return t.forEach(function(t){var n={};e.each(t.rec,function(e,t){n[e]=t}),i.push(n)}),i},createItem:function(e){return this.modifyItem(e)},click:function(t,i){var n,a,r=this,l=r.getItemByEl(i);if(r.multiSelect&&(t.metaKey||t.ctrlKey||t.shiftKey))if(a=e(i).hasClass("w121-selected"),t.shiftKey){var o=r.selectByEl(r.el.find("tr.w121-selected:first")),s=r.getItemByEl(e(i)),d=o.rec.wuiIndex<s.rec.wuiIndex?1:-1,u=d>0?o:s,c=d>0?s:o,h=[];r.selected=h=r.items.slice(u.rec.wuiIndex,c.rec.wuiIndex+1),e("w121-selected").removeClass("w121-selected"),h.forEach(function(e){e.el.addClass("w121-selected")}),window.getSelection?n=window.getSelection():document.selection&&(n=document.selection),n&&(n.empty&&n.empty(),n.removeAllRanges&&n.removeAllRanges())}else e(i).toggleClass("w121-selected",!a),a?e.each(r.selected||[],function(e,t){t==l&&r.selected.splice(e,1)}):r.selected.push(l),r.el.trigger(e.Event("wuichange"+r.id),[r,l.el,l.rec,r.selected]).trigger(e.Event("wuichange"),[r,l.el,l.rec,r.selected]);else r.selected.length>0&&r.selected[0]===l?r.itemDeselect(l):r.itemSelect(l)},dblClick:function(){var t=this,i=t.getItemByEl(arguments[1]);return t.itemSelect(i,!0),t.el.trigger(e.Event("wuichange"+t.id),[t,i.el,i.rec,t.selected]).trigger(e.Event("wuidblclick"+t.id),[t,i.el,i.rec]).trigger(e.Event("wuichange"),[t,i.el,i.rec,t.selected]).trigger(e.Event("wuidblclick"),[t,i.el,i.rec]),!1},init:function(){var i=this;t.O.prototype.init.call(i),i.name&&0!==i.name.length||(i.name=t.id("w121-data-list")),i.id&&0!==i.id.length||(i.id=i.name),e(document).on("keyup",function(e){i.selected&&i.selected[0]&&document.activeElement==i.selected[0].el[0]&&i.keyActions.hasOwnProperty(e.keyCode)&&i.keyActions[e.keyCode].call(i)})},itemSelect:function(t,i){var n=this,a=[],r=n.name?"."+n.name:"";return t&&(n.selected.length>0&&!n.multiSelect&&!i&&(a=e.extend(!0,[],n.selected),n.el.trigger(e.Event("wuideselect"),[n,a[0].el,a[0].rec,a])),n.el.find(".w121-selected").removeClass("w121-selected").removeAttr("tabindex"),t.el.addClass("w121-selected").attr("tabindex",1),n.focusOnSelect&&t.el.focus(),n.selected=[t],n.el.addClass("w121-has-selected"),i||n.el.trigger(e.Event("wuiselect"+r),[n,t.el,t.rec]).trigger(e.Event("wuichange"+r),[n,t.el,t.rec,n.selected]).trigger(e.Event("wuiselect"),[n,t.el,t.rec]).trigger(e.Event("wuichange"),[n,t.el,t.rec,n.selected])),t},itemDeselect:function(t){var i=this,n=i.name?"."+i.name:"";return i.selected.length>0&&t.el.removeClass("w121-selected"),i.selected=[],i.el.removeClass("w121-has-selected"),i.el.trigger(e.Event("wuideselect"+n),[i,t.el,t.rec]).trigger(e.Event("wuichange"+n),[i,t.el,t.rec,i.selected]).trigger(e.Event("wuideselect"),[i,t.el,t.rec]).trigger(e.Event("wuichange"),[i,t.el,t.rec,i.selected]),t},keyActions:{13:function(){var e=this;e.selected[0].el.click(),e.selected[0].el.click()},32:function(){var e=this;e.selected[0].el.click(),e.selected[0].el.click()},38:function(){var e=this;e.selectAjacent(-1)},40:function(){var e=this;e.selectAjacent(1)}},modifyItem:function(e){return e.el},make:function(){function i(e){var t=a.data=n.data[e],i=a.make(e),r={el:i,rec:t};l.push(i),n.items.push(r),(n.elAlias||n.el).append(n.createItem(r))}if(!(this.data instanceof Array))return!1;var n=this,a=new t.Template({template:n.template}),r=n.data.length>n.displayMax&&n.displayMax>0?n.displayMax:n.data.length,l=[],o=0;for(n.clear(),n.items=[],o;r>o;o++)i(o);n.clickListener(l),n.afterMake(),n.el.trigger(e.Event("refresh"),[n,n.data]),n.resetSelect(),n.autoLoad=!0},clickListener:function(e){var t=this;t.interactive&&e.forEach(function(e){var i=0,n=null;e.on("click",function(e){var a=null,r=this;return i++,1===i?n=window.setTimeout(function(){a=t.click(e,r),i=0},350):(clearTimeout(n),a=t.dblClick(e,r),i=0),a}).on("dblclick",function(e){e.preventDefault()})})},onRender:function(){this.rendered!==!0&&(this.getSrcData(),t.O.prototype.onRender.call(this))},getSrcData:function(){var e=this;return e.initLoaded!==!0&&e.data instanceof Array&&e.data.length>0?(e.setParams(e.params),e.initLoaded=!0,e.setData(e.data)):e.autoLoad?null!==this.url?e.loadData():e.setData(e.data):void 0},selectAjacent:function(e){var t=this,i=t.selected[0].el[e>0?"next":"prev"]();return t.selectByEl(i)},selectByEl:function(e){var t,i=this;return i.itemSelect(t=i.getItemByEl(e)),i.scrollToCurrent(),t},getItemByEl:function(e){var t,i=this,n=0;for(e=e[0]||e,n;n<i.items.length;n++)if(i.items[n].el[0]==e){t=i.items[n];break}return t},refresh:function(){this.loadData()},resetSelect:function(){var e=this,i=e.copyArryRecs(e.selected);i.length&&(e.selected=[],i.forEach(function(i){t.O.prototype.each.call(e,function(t){var n=e.identity?t.rec[e.identity]===i[e.identity]:JSON.stringify(t.rec)===JSON.stringify(i);n&&(e.multiSelect?(t.el.addClass("w121-selected"),e.selected.push(t,!0)):e.itemSelect(t))})}),e.scrollToCurrent())},scrollToCurrent:function(){var t=this,i=t.elAlias||t.el,n=i.find(".w121-selected:first"),a=n.offsetParent(),r=function(){var t=0;return n.prevAll().each(function(){t+=e(this).outerHeight()-.55}),t}();a.animate({scrollTop:r},100)},selectBy:function(e,t){var i,n=this;return n.items.forEach(function(a){return void 0!==a.rec[e]&&a.rec[e]==t?i=n.itemSelect(a):void 0}),n.scrollToCurrent(),i}}),t.Pane=function(t){e.extend(this,{bbar:[],border:!0,disabled:!1,fitToContent:!1,maskHTML:"Empty",maxHeight:null,tbar:[],title:null,titleAlign:"left"},t),this.init()},t.Pane.prototype=e.extend(new t.O,{addMask:function(t){return t=t?t:this.container,0===t.children("w121-mask").length?(this.mask=e("<div>").addClass("w121-mask").append(e("<span>").html(this.maskHTML)).appendTo(t),this.mask):null},afterRender:function(){var e=this;e.afterRendered!==!0&&(t.O.prototype.afterRender.call(e),e.parent&&(t.fit(e.parent.items,e.parent.fitDimension||"width"),e.el.parent().css("overflow","hidden")),window.setTimeout(function(){!e.disabled&&e.footer.items.length&&e.footer.items[e.footer.items.length-1].el&&e.footer.items[e.footer.items.length-1].el.focus()},30))},disable:function(){var e=this;return e.addMask(),e.footer.items.forEach(function(e){e.disable&&e.disable()}),e.header.items.forEach(function(e){e.disable&&e.disable()}),e.disabled=!0,e.disabled},enable:function(){var e=this;return e.removeMask(),e.footer.items.forEach(function(e){e.enable&&e.enable()}),e.header.items.forEach(function(e){e.enable&&e.enable()}),e.disabled=!1,e.disabled},init:function(){function i(i,r){return new t.O(e.extend({el:e("<div>"),cls:"w121-"+i+" w121-h-bar",parent:a,appendTo:a.el,splice:function(){var e=t.O.prototype.splice.apply(this,arguments);return n(i),e},push:function(){var e=t.O.prototype.push.apply(this,arguments);return n(i),e}},r))}function n(e){var i={tbar:"header",bbar:"footer"},n=a[i[e]],r=a.surePane.hasClass(e),l=function(){var e=0;return n.items.forEach(function(i){i instanceof t.O&&e++}),e>0}();!r&&l?(a.surePane.addClass(e),n.place()):r&&!l&&(a.surePane.removeClass(e),n.el.remove())}var a=this,r=a.el=a.surePane=e("<div>").addClass("w121-pane");t.O.prototype.init.call(a),a.border||r.addClass("no-border"),null!==a.title&&a.setTitle(a.title),a.header=i("tbar",{items:a.tbar}),n("tbar"),r.append(a.elAlias=a.container=e("<div>").addClass("w121-pane-content")),a.footer=i("bbar",{items:a.bbar}),n("bbar"),a.disabled&&a.disable()},onRender:function(){var e=this;e.rendered!==!0&&(e.items.forEach(function(e){e.onRender&&window.setTimeout(function(){e.onRender()},0)}),e.header&&e.header.onRender(),e.footer&&e.footer.onRender(),t.O.prototype.onRender.call(e))},cssByParam:function(){var e=this;t.O.prototype.cssByParam.apply(e,arguments),window.setTimeout(function(){e.el.parents('[style*="column"]').length&&parseInt(e.container.height())!=e.el.height()&&e.container.css("height",e.el.height())},0)},removeMask:function(){this.el.find(".w121-mask").fadeOut(500,function(){e(this).remove()}),this.mask=void 0},setTitle:function(t){var i=this,n="undefined"!=typeof i.titleEl;return i.title=t=t&&"string"==typeof t?t:null,null!==t?(n||i.el.prepend(i.titleEl=e('<div class="w121-title">')),i.el.addClass("title"),i.setTitleAlign(),i.titleEl.html(t)):n&&(i.el.removeClass("title"),i.titleEl.remove(),i.titleEl=void 0),t},setTitleAlign:function(e){var t=this;t.titleAlign=e||t.titleAlign,"undefined"!=typeof t.titleEl&&t.titleEl.removeClass("right left center").addClass(t.titleAlign)}}),t.Window=function(t){e.extend(this,{bbar:[],border:!0,closeWithModal:!1,draggable:!0,isModal:!1,maskHTML:'Loading <span class="w121-spinner"></span>',onWinClose:function(){},onWinOpen:function(){},resizable:!0,tbar:[],title:"Window",windowLeft:null,windowTop:null},t),this.init()},t.Window.prototype=e.extend(!0,{},t.Pane.prototype,{close:function(){var t=this;t.onWinClose(t)!==!1&&(t.windowEl.trigger(e.Event("close"),[t]),t.remove())},cssByParam:function(){t.O.prototype.cssByParam.apply(this,arguments),this.isModal&&this.modalEl.css({width:"",height:""}),this.windowEl&&this.resize()},disable:function(){t.Pane.prototype.disable.call(this),this.closeBtn&&this.closeBtn.enable()},fireResize:function(t,i,n){var a=this;a.layout(),a.container.trigger(e.Event("resize"),[a.container.width(),a.container.height(),a,i,n,t])},init:function(){function i(e){e.stopPropagation()}function n(){var e=t.maxZ();parseInt(a.el.css("z-index")||1)<=e&&a.el.css("z-index",e)}var a=this;a.appendTo=a.appendTo||e("body"),a.isModal&&(a.modalEl=e("<div>").addClass("w121-overlay"),e("body").append(a.appendTo=a.modalEl.css("z-index",t.maxZ()).on("mousewheel",i).click(function(e){a.closeWithModal&&e.target===a.modalEl[0]&&a.close()}))),a.tbar.push(a.closeBtn=new t.Button({text:"X",name:"window_close"})),0===a.bbar.length&&(a.bbar=[new t.Button({text:"Close",name:"window_close"})]),t.Pane.prototype.init.apply(a,arguments),a.windowEl=a.el.addClass("w121-window").css("z-index",t.maxZ()).click(n).on("mousewheel",i),a.draggable===!0&&a.windowEl.drags({handle:a.header.el}),a.resizable===!0&&a.windowEl.resizes({minWidth:a.minWidth||200,minHeight:a.minHeight||200,afterResize:function(){a.fireResize.apply(a,arguments)}}),a.el.on("wuibtnclick","[name=window_close]",function(e){a.close(),e.stopPropagation()}),a.place(),a.isModal&&(a.el=a.modalEl),a.onWinOpen(a),a.windowEl.trigger(e.Event("open"),[a]),a.el.on("wuibtnclick","[name=window_close]",function(e){a.close(),e.stopPropagation()})},afterRender:function(){this.afterRendered!==!0&&(t.Pane.prototype.afterRender.call(this),this.resize())},resize:function(i,n){var a=this;t.isPercent(i)&&(i=t.percentToPixels(a.windowEl,i,"width")),t.isPercent(n)&&(n=t.percentToPixels(a.windowEl,n,"height"));var r=a.container[0].scrollHeight,l=a.container.height(),o=a.header&&e.isNumeric(a.header.el.outerHeight())?a.header.el.outerHeight():0,s=a.footer&&e.isNumeric(a.footer.el.outerHeight())?a.footer.el.outerHeight():0,d=o+s,u=arguments.length?n:r+d>=e.viewportH()?e.viewportH()-10:r>=l&&!a.hasOwnProperty("height")?r+d:t.isPercent(a.height)?t.percentToPixels(a.windowEl,a.height,"height"):a.height;if(a.windowEl){var c={height:u,width:arguments.length?i:void 0},h=a.windowLeft?e.isNumeric(a.windowLeft)?a.windowLeft:t.percentToPixels(e("html"),a.windowLeft,"width"):Math.floor(e.viewportW()/2-a.windowEl.width()/2),f=a.windowTop?e.isNumeric(a.windowTop)?a.windowTop:t.percentToPixels(e("html"),a.windowTop,"height"):Math.floor(e.viewportH()/2-u/2);return a.windowEl.css(e.extend(c,{top:f,left:h})),a.fireResize(),{width:a.windowEl.outerWidth(),height:a.windowEl.outerHeight()}}return!1},height:300,width:400}),t.LongPoll=function(t){e.extend(this,{pollTime:1e3,maxRetry:120,waitFactor:2,url:null,params:null,name:null,ajaxParams:{}},t),this.init()},t.LongPoll.prototype={init:function(){var e=this;e.originalPollTime=e.pollTime,e.naturalPollTime=e.pollTime+1,e.name=e.name?e.name:t.id(),e.start()},poll:function(){var t=this,i=t.name?"."+t.name:"";window.setTimeout(function(){e.ajax(e.extend(t.ajaxParams,{url:t.url,data:t.params,beforeSend:function(n){return t.pollTime>t.originalPollTime*t.maxRetry?(n.abort(),e(window).trigger(e.Event("pollStopped"+i),[t]).trigger(e.Event("pollStopped"),[t]),!1):void 0},success:function(n){t.pollTime=t.naturalPollTime,e(window).trigger(e.Event("pollSuccess"+i),[t,n]).trigger(e.Event("pollSuccess"),[t,n])},complete:function(){t.poll()},timeout:t.pollTime,error:function(n){t.pollTime=t.pollTime==t.naturalPollTime?t.originalPollTime:t.pollTime*t.waitFactor,e(window).trigger(e.Event("pollError"+i),[t,n]).trigger(e.Event("pollError"),[t,n])}}))},t.pollTime)},stop:function(){this.pollTime=this.pollTime*this.maxRetry+1},start:function(){var t=this,i=t.name?"."+t.name:"";t.pollTime=t.naturalPollTime,e(window).trigger(e.Event("pollStart"+i),[t]).trigger(e.Event("pollStart"),[t]),t.poll()}},t.msg=function(i,n,a,r){var l=[new t.O({el:e("<div>").addClass("w121-msg").html(i)})];"undefined"!=typeof r&&("function"==typeof r.push?l.push.apply(l,r):l.push(r));var o=new t.Window({title:n||"Message",isModal:!0,items:l,width:350,onWinClose:a||function(){}});return o},t.alert=function(){return t.msg.apply(this,arguments)},t.errRpt=function(i,n,a,r){var l=t.alert(i,n,r);return e.isArray(a)&&l.footer.push.apply(l.footer,a),l.container.find(".w121-msg").addClass("w121-err"),l.resize(),l},t.error=function(){return t.errRpt.apply(this,arguments)},t.confirm=function(e,i,n){var a=t.alert.apply(this,arguments);return a.doAnswer=function(e){n&&"function"==typeof n&&n(e),a.answerRun=!0,a.close()},a.onWinClose=function(){return a.answerRun!==!0?!1:a.answerRun},a.footer.splice(0,1,new t.Button({text:"No"}),new t.Button({text:"Yes"})),a.footer.el.on("wuibtnclick",function(e,t){a.doAnswer("No"==t.text?!1:!0),e.stopPropagation()}),a.header.splice(0,1),a.resize(),a}}(jQuery,window[_wuiVar]),function($,Wui){Wui.Tabs=function(e){$.extend(this,{bbar:[],currentTab:null,items:[],tabsHideHeader:null,tabPosition:"top right",tbar:[]},e),this.init()},Wui.Tabs.prototype=$.extend(new Wui.Pane,{place:function(){function e(e){switch(e){case"top":return"header";case"bottom":return"footer"}}var t=this,i=function(){var e=t.tabPosition.split(" ");return t.tabsBottom===!0&&(e[0]="bottom"),t.tabsLeft===!0&&(e[1]="left"),e}(),n=e(i[0]);return t.el.addClass("w121-tabs"),void 0===t.items&&(t.items=[]),t.each(function(e,i){e.el.addClass("w121-tab-panel"),e.tabCls="w121-tab "+(e.tabCls?" "+e.tabCls:""),e.tabsHideHeader&&e.el.addClass("w121-hide-heading"),t[n].push(e.tab=new Wui.Button({text:e.title||"Tab "+(parseInt(i)+1),cls:e.tabCls,tabIndex:1,pane:e})),t[n].el.addClass(t.tabsLeft?" left":"")}),t[n].el.on("wuibtnclick",".w121-tab",function(){t.giveFocus(arguments[1].pane)}),Wui.O.prototype.place.call(t)},giveFocus:function(e,t){var i=this;t=void 0!==t?t:!1,i.each(function(n){var a=n===e;n.tab.el.toggleClass("selected",a),n.el.toggleClass("active",a),a&&(i.currentTab=n,window.setTimeout(function(){n.cssByParam(),n.layout()},0),t||i.el.trigger($.Event("tabchange"),[i,n.tab,n]))})},selectTabByText:function(e,t){var i,n=this;return n.items.forEach(function(a){$.trim(a.tab.el.text()).toLowerCase()===$.trim(e).toLowerCase().replace(/_/g," ")&&(n.giveFocus(a,t),i=a)}),i},onRender:function(){this.rendered!==!0&&(this.giveFocus(this.items[0]),Wui.Pane.prototype.onRender.call(this))}}),Wui.Grid=function(e){return new Wui.DataList($.extend(this,{bbar:[],columns:[],colUrl:null,colParams:{},colDataParams:{},data:null,defaultDataType:"string",multiSelect:!1,hideHeader:!1,selected:[],sort:[],tbar:[]},e))},Wui.Grid.prototype=$.extend(new Wui.Pane,{afterMake:function(){this.layout(),this.removeMask()},closeSorter:function(){this.dd.children("li").off("click").end().css("display","none")},doSort:function(e,t,i){var n=this;if(n.sorters.length>0){var a=n.sorters[e],r=t.rec[a.dataItem],l=i.rec[a.dataItem],o="asc"==a.sortDir?1:-1,s=0;switch(a.dataType){case"date":r=new Date(r),l=new Date(l),s=r.getTime()==l.getTime()?0:r.getTime()>l.getTime()?1:-1;break;case"numeric":r=parseFloat(r)?parseFloat(r):0,l=parseFloat(l)?parseFloat(l):0,s=r==l?0:r>l?1:-1;break;default:s=$.trim(r).toUpperCase().localeCompare($.trim(l).toUpperCase())}return 0!==s||void 0===n.sorters[e+1]?s*o:n.doSort(e+1,t,i)}return t.rec.wuiIndex>i.rec.wuiIndex?1:-1},getColumns:function(){var e=this;if(e.colUrl&&e.colUrl.length)e.colProxy=new Wui.Data($.extend({url:e.colUrl,params:e.colParams,afterSet:function(t){e.setColumns(t)}},e.colDataParams)),e.colProxy.loadData();else if(e.columns.length)return e.setColumns(e.columns)},setGridVars:function(){var e=this;e.tblContainer=$("<div><table></table></div>").addClass("w121-grid-body").appendTo(e.elAlias),e.heading=$("<div>").addClass("w121-gh").appendTo(e.elAlias),e.elAlias=e.tbl=e.tblContainer.children("table"),e.cols=[],e.sorters=[]},init:function(){var e=this;Wui.Pane.prototype.init.call(e),Wui.DataList.prototype.init.call(e),e.el.addClass("w121-grid"),e.setGridVars(),$("body").append(e.dd=$("<ul><li>Ascending</li><li>Decending</li><li>No Sort</li><ul>").addClass("w121-sort-menu").attr({id:e.idCls=Wui.id()}).on("mousewheel scroll",function(e){e.stopPropagation()})),$(document).on("click","*:not(#"+e.idCls+")",function(){e.closeSorter()}),e.hideHeader&&e.heading.height(0)},layout:function(){
if(Wui.O.prototype.layout.apply(this,arguments),this.fitToContent===!0){var e=this,t=e.header.el.outerHeight()+e.footer.el.outerHeight(),i=$.isNumeric(e.maxHeight)?e.maxHeight:0,n=e.heading.outerHeight();e.tbl.children().each(function(){n+=$(this).outerHeight()}),n=i>0&&n+t>i?i:n,e.el.height(e.height=n+t),e.container.height(e.height+1),Wui.O.prototype.layout.apply(e,arguments)}this.cols.length&&this.sizeCols()},layoutKids:function(){},loadData:function(){return this.maskHTML='Loading <i class="fa fa-spinner fa-spin"></i>',this.addMask(),Wui.Data.prototype.loadData.apply(this,arguments)},mngSorters:function(e,t){var i=this,n=["one","two","three","four","five"];if(void 0!==e)if(void 0!==t){var a=!0;for(r=i.sorters.length;r>0;r--)i.sorters[r-1].dataItem==e.dataItem&&(a=!1);e.sortDir=t,a&&i.sorters.push(e)}else if(e.sortDir)if("desc"==e.sortDir){delete e.sortDir,e.el.removeClass().addClass("w121-gc").addClass(e.cls);for(var r=i.sorters.length;r>0;r--)i.sorters[r-1].el==e.el&&i.sorters.splice(r-1,1)}else e.sortDir="desc";else{if(i.sorters.length>5)return e.el.removeClass().addClass("w121-gc").addClass(e.cls),!1;e.sortDir="asc",i.sorters.push(e)}$.each(i.sorters,function(e,t){t.el.removeClass().addClass("w121-gc "+n[e]+" "+t.sortDir).addClass(t.cls)})},modifyItem:function(e){var t=this;return $.each(t.renderers,function(){var i=arguments[1],n=e.el.children(":eq("+i.index+")").children("div"),a=e.rec[i.dataItem];n.empty().append(i.renderer.call(null,n,a,e.rec,e.el,t))}),e.el},onRender:function(){var e=this,t=e.autoLoad;return e.autoLoad=!1,Wui.Pane.prototype.onRender.call(this),Wui.DataList.prototype.onRender.call(this),e.autoLoad=t,this.getColumns()},configBar:function(){Wui.Pane.prototype.configBar.apply(this,arguments)},refresh:function(){return null!==this.url?this.getColumns():void this.setData(this.data)},renderColumn:function(col,idx){var me=this;$.extend(col,{dataType:col.dataType||me.defaultDataType,fit:void 0===col.fit?void 0===col.width?1:-1:col.fit,cls:col.cls||"",renderer:col.renderer?function(a){"function"!=typeof a&&"function"==eval("typeof "+a)&&(a=new Function("return "+a+".apply(this,arguments)")),"function"==typeof a&&me.renderers.push({dataItem:col.dataItem,renderer:a,index:idx})}(col.renderer):"",index:idx,resizable:"undefined"==typeof col.resizable?!0:col.resizable,sortable:"undefined"==typeof col.sortable?!0:col.sortable,width:void 0===col.width?0:col.width,el:$("<div>").append($("<div>").text(col.heading)).attr({unselectable:"on"}).addClass("w121-gc "+col.cls)}),col.el.css({width:col.width,"flex-grow":col.fit}),col.sortable?(col.el.on("contextmenu",function(e){e.preventDefault(),Wui.positionItem($(this),me.dd),$("body").append(me.dd.width(100).css("display","block")),Wui.positionItem($(this),me.dd),me.dd.children("li").on("click",function(){var e={Ascending:function(){me.mngSorters(col,"asc")},Decending:function(){me.mngSorters(col,"desc")},"No Sort":function(){col.sortDir="desc",me.mngSorters(col)}};e[$(this).text()](),me.closeSorter(),me.runSort()})}),col.el.click(function(){me.sortList(col)})):col.el.addClass("w121-no-sort"),me.columns.length>1&&!col.vertical&&col.resizable&&col.el.resizes({anchored:!0,minWidth:60,minHeight:0,direction:"e",resizeStart:function(){me.tempLayout=me.layout,me.layout=function(){}},afterResize:function(){me.sizeCols(),me.layout=me.tempLayout},duringResize:function(){$.extend(col,{width:arguments[1],fit:-1}),Wui.fit(me.cols,"width")}}),me.cols.push(col),me.heading.append(col.el)},runSort:function(){var e=this,t=e.items;t.sort(function(t,i){return e.doSort(0,t,i)}),e.tbl.detach(),t.forEach(function(t){t.el.appendTo(e.tbl)}),e.tbl.appendTo(e.tblContainer),e.sizeCols()},push:function(){var e=Wui.Data.prototype.push.apply(this,arguments);return this.sizeCols(),e},splice:function(){var e=Wui.Data.prototype.splice.apply(this,arguments);return this.sizeCols(),e},setColumns:function(e){var t=this;if(t.columns=e,t.heading.empty(),t.cols=[],t.items=[],t.renderers=[],t.template="<tr>",$.each(e,function(e,i){var n=i.dataTemplate?i.dataTemplate:i.dataItem?"{"+i.dataItem+"}":"";t.template+="<td><div>"+n+"</div></td>",i.vertical&&(t.el.addClass("has-vert-columns"),i.cls?i.cls+=" vert-col":i.cls="vert-col",i.width=50,delete i.fit),t.renderColumn(i,e)}),t.template+="</tr>",t.sorters&&t.sorters.length&&t.cols.length)for(var i=t.sorters.length-1;i>=0;i--){for(var n=!0,a=0;a<t.cols.length;a++)if(t.cols[a].dataItem==t.sorters[i].dataItem){t.sorters[i].el=t.cols[a].el,t.cols[a].sortDir=t.sorters[i].sortDir,n=!1;break}n&&t.sorters.splice(i,1)}return t.getSrcData()},setData:function(){var e=this,t=null,i=null;if(Wui.DataList.prototype.setData.apply(e,arguments),e.sort.length&&!e.sorters.length)for(t=0;t<e.sort.length;t++)for(i=0;i<e.cols.length;i++)e.cols[i].dataItem==e.sort[t].dataItem&&e.mngSorters(e.cols[i],e.sort[t].order);this.sortList()},sizeCols:function(){var e=this,t=e.heading,i=e.tbl.find("tr:first").height()*e.total>e.tblContainer.height(),n=i?Wui.scrollbarWidth():0;t.css("padding-right",n),t[0===n?"addClass":"removeClass"]("has-scrollbar");for(var a=0;a<e.cols.length;a++)e.tbl.find("td:eq("+a+")").css({width:(e.cols[a].el.innerWidth()/e.tbl.width()).toFixed(2)+"%"})},sortList:function(e){var t=this;t.mngSorters(e),t.runSort()}}),Wui.InfiniteGrid=function(e){$.extend(this,{data:null,sort:null,paging:null},e),this.init()},Wui.InfiniteGrid.prototype=$.extend(new Wui.Grid,{addRows:function(e){var t=this,i=e||[],n=[],a=$("<div>");t.items=[];for(var r=0;t.displayMax<0&&r<i.length||t.displayMax>0&&r<t.displayMax&&r<i.length;r++){var l=t.data=i[r],o={el:Wui.Template.prototype.make.call(t,r),rec:l};Array.prototype.push.call(t.items,o),a.append(t.createItem(o)),n.push(o.el)}return t.clickListener(n),t.tbl.empty(),t.tbl.append(a.children().unwrap()),t.data=i,e},afterSet:function(e){var t=this;t.tbl.children().length>0&&t.total>t.data.length&&(t.addRows(e),t.rowHeight=t.tbl.find("tr:first").outerHeight(),t.tbl.css({top:t.params.start*t.rowHeight+"px"}),t.sizeCols())},alignPagingSort:function(){var e=this;0===e.sorters.length&&(e.paging.sort=e.originalSort),$.each(e.paging.sort,function(t,i){$.each(e.columns,function(t,n){n.dataItem===i.dataItem&&e.mngSorters(n,i.order)})})},setGridVars:function(){var e=this;e.tblContainer=$("<div><div>&nbsp;</div><table></table></div>").addClass("w121-grid-body"),e.tbl=e.tblContainer.children("table").addClass("w121-infinite-table"),e.tblHSize=e.tblContainer.children("div").addClass("w121-ghs"),e.heading=$("<div>").addClass("w121-gh").appendTo(e.elAlias),e.sorters=[],e.renderers=[],e.originalSort=e.paging.sort||null,e.tblContainer.scroll(function(){e.pagingScroll()}),e.elAlias.append(e.tblContainer,e.heading)},init:function(){Wui.Grid.prototype.init.call(this),this.el.addClass("w121-infinite-grid")},make:function(){var e=this;e.addRows(e.data),e.rowHeight=e.tbl.find("tr:first").outerHeight(),e.totalPages=Math.floor(e.total/e.paging.limit),e.alignPagingSort(),e.totalHeight=e.total*e.rowHeight,e.tblHSize&&e.tblHSize.height(e.totalHeight),e.autoLoad=!0,e.afterMake(),e.el.trigger($.Event("refresh"),[e,e.data])},mngSorters:function(e,t){var i=this,n=0,a=["one","two","three","four","five"];if(void 0!==e)if(void 0!==t){var r=!0;for(n=i.sorters.length;n>0;n--)i.sorters[n-1].dataItem==e.dataItem&&(r=!1);e.sortDir=t,r&&i.sorters.push(e)}else if(e.sortDir)if("desc"==e.sortDir.toLowerCase())for(delete e.sortDir,e.el.removeClass().addClass("w121-gc").addClass(e.cls),n=i.sorters.length;n>0;n--)i.sorters[n-1].el==e.el&&i.sorters.splice(n-1,1);else e.sortDir="desc";else{if(i.sorters.length>5)return e.el.removeClass().addClass("w121-gc").addClass(e.cls),!1;e.sortDir="asc",i.sorters.push(e)}i.paging.sort=[],0===i.sorters.length&&i.alignPagingSort(),i.sorters.forEach(function(e,t){e.el.removeClass().addClass("w121-gc "+a[t]+" "+e.sortDir.toLowerCase()).addClass(e.cls),i.paging.sort.push({dataItem:e.dataItem,order:e.sortDir})})},pagingScroll:function(){var e=this,t=e.tblContainer.scrollTop(),i=Math.round(e.totalPages*(t/e.totalHeight)),n=function(){e.tbl.css({top:e.actualStart*e.rowHeight+"px"}),e.currPage!=Math.floor((e.tblContainer.scrollTop()+e.tblContainer.height())/(e.totalHeight/e.totalPages))&&e.pagingScroll(),e.sizeCols()};e.currPage=e.currPage||0,e.lastScroll=t,$.isNumeric(i)&&e.currPage!=i&&(e.paging.start=i*e.paging.limit,e.currPage=i,e.actualStart=i*e.paging.limit+(0!==i?-1*Math.round(e.paging.limit/2):0),e.actualLimit=2*e.paging.limit,e.loadData({start:$.isNumeric(e.actualStart)?e.actualStart:0,limit:$.isNumeric(e.actualLimit)?e.actualLimit:50,sort:JSON.stringify(e.paging.sort)})),e.onSuccess!==n&&(e.onSuccess=n)},runSort:function(){var e=this;e.currPage=-1,e.tbl.scroll()},scrollToCurrent:function(){},setParams:function(){var e=this;return $.extend(e.params,{limit:e.paging.limit,start:e.paging.start,sort:JSON.stringify(e.paging.sort)}),"object"==typeof arguments[0]&&"undefined"==typeof arguments[0].start&&$.extend(arguments[0],{start:0}),Wui.Data.prototype.setParams.apply(e,arguments)},setData:function(){Wui.DataList.prototype.setData.apply(this,arguments),this.sizeCols()}}),Wui.Form=function(e){$.extend(this,{disabled:!1,labelPosition:"top",labelSize:null,HTMLSubmit:!1},e,{el:$("<div>"),errors:[],formChanged:!1}),this.init()},Wui.Form.prototype=$.extend(new Wui.O,{clearData:function(){this.setData()},dispErrors:function(){for(var e="",t=0;t<this.errors.length;t++)e+=this.errors[t]+"<br/>";Wui.errRpt(e,"Form Errors")},each:function(e,t,i){return Wui.O.prototype.each.call(this,function(i,n){return!t||i instanceof Wui.FormField?e(i,n):void 0},i)},errCls:"w121-form-err",getData:function(){return this.validate()?this.getRawData():(this.dispErrors(),!1)},getField:function(e){var t=null;return this.each(function(i){i.name==e&&(t=i.val())}),t},getFrmItm:function(e){var t;return this.each(function(i){i.name==e&&(t=i)}),t},getRawData:function(){var e={};return this.each(function(t){e[t.name]=t.val()},!0),e},init:function(){var e=this;Wui.O.prototype.init.call(e),e.el.addClass("w121-form").on("submit",function(t){e.HTMLSubmit||t.preventDefault()}),("undefined"==typeof e.id||null===e.id)&&(e.id=Wui.id("w121-form"))},normFrmItem:function(e){var t=this;if(e.disabled&&e.disabled===!0||$.extend(e,{disabled:t.disabled}),!e.ftype||e instanceof Wui.FormField)return e instanceof Wui.FormField?(e.lbl&&(e.labelSize=t.labelSize,e.lbl.setLabelPosition(e.labelPosition||t.labelPosition)),e):e;var i=e.ftype.split(".");switch(e.labelPosition=e.labelPosition||t.labelPosition,e.labelSize=e.labelSize||t.labelSize,"Wui"==i[0]&&(i[0]=_wuiVar),i.length){case 1:if(window[i[0]])return new window[i[0]](e);throw"Object type "+e.ftype+" is not defined.";case 2:if(window[i[0]]&&window[i[0]][i[1]])return new window[i[0]][i[1]](e);throw"Object type "+e.ftype+" is not defined.";case 3:if(window[i[0]]&&window[i[0]][i[1]][i[2]])return new window[i[0]][i[1]][i[2]](e);throw"Object type "+e.ftype+" is not defined.";case 4:if(window[i[0]]&&window[i[0]][i[1]][i[2]][i[3]])return new window[i[0]][i[1]][i[2]][i[3]](e);throw"Object type "+e.ftype+" is not defined.";default:throw"Object type "+e.ftype+" is not defined."}},place:function(){var e=this;return void 0===e.items&&(e.items=[]),e.each(function(t,i){t=e.items[i]=e.normFrmItem(t),t.onRender&&window.setTimeout(function(){t.onRender()},0)}),Wui.O.prototype.place.apply(e,arguments)},push:function(){var e=this,t=[];return Array.prototype.forEach.call(arguments,function(i){t.push(e.normFrmItem(i))}),Wui.O.prototype.push.apply(this,t)},splice:function(){var e=this,t=[],i=Array.prototype.shift.apply(arguments),n=Array.prototype.shift.apply(arguments);return Array.prototype.forEach.call(arguments,function(i){t.push(e.normFrmItem(i))}),t.splice(0,0,i,n),Wui.O.prototype.splice.apply(this,t)},remFrmItm:function(e){var t=this;return this.each(function(i,n){i.name==e&&Wui.O.prototype.splice.call(t,n,1)}),!0},formChange:function(e,t){var i=this;return e&&i.el.trigger($.Event("formupdate"),[i,t]),i.formChanged=e,i.formChanged},setData:function(e,t){e?(this.setData(),this.each(function(i){e[i.name]&&i.val(e[i.name],t)},!0)):this.each(function(e){e.val(null,t)},!0),this.formChange(!1)},disable:function(){return this.disabled=!0,this.each(function(e){e.disable()},!0)},enable:function(){return this.disabled=!1,this.each(function(e){e.enable()},!0)},setField:function(e,t){this.each(function(i){i.name==e&&i.val(t)},!0)},throwError:function(e){return this.errors.push(e),!1},validate:function(){var e=this;return e.errors=[],e.each(function(t){"undefined"!=typeof t.el.toggleClass&&t.el.toggleClass(e.errCls,!t.validate())},!0),this.formChange(!1),0===e.errors.length}}),Wui.Note=function(e){$.extend(this,{html:""},e),this.init()},Wui.Note.prototype=$.extend(new Wui.O,{init:function(){this.el=$("<div>").html(this.html).addClass("w121-note")},setHTML:function(e){this.el.html(e)}}),Wui.Label=function(e){$.extend(this,{html:"",labelPosition:"top",labelSize:null},e),this.init()},Wui.Label.prototype=$.extend(new Wui.O,{init:function(){var e=this;Wui.O.prototype.init.call(e),e.el=$("<div>").addClass("w121-lbl").append(e.label=$("<label>",e.attr?e.attr:{}).addClass(e.cls)),e.field.id&&e.field.id.length&&e.label.attr("for",e.field.id),e.setLabel(),e.setLabelPosition()},setLabel:function(e){return e=e||this.html,this.label.html(this.html=e),this.label.html()},setLabelSize:function(e){var t=this,i=$.inArray(t.labelPosition,["top","bottom"])>=0?"height":"width",n="height"==i?"width":"height",a={};e=$.isNumeric(e)?e:t.labelSize,a[i]=e,a[n]="",t.label.css(a),t.field&&(t.field.labelSize=t.labelSize=e)},setLabelPosition:function(e){var t=this,i=e&&(e=e.toLowerCase())&&$.inArray(e,["top","left","bottom","right"])>=0?e:t.labelPosition;return t.el.removeClass("lbl-"+t.labelPosition).addClass("lbl-"+i),t.field&&(t.field.labelPosition=i),t.labelPosition=i,t.setLabelSize(),t.labelPosition}}),Wui.FormField=function(e){$.extend(this,{disabled:!1,id:null,invalidMsg:null,label:null,labelPosition:"top",labelCls:null,labelSize:null,name:null,required:!1,validRegEx:null,validTest:null},e)},Wui.FormField.prototype=$.extend(new Wui.O,{argsByParam:function(){Wui.O.prototype.argsByParam.apply(this,[["name","id"],this.hiddenField||this.field])},init:function(){var e=this;return Wui.O.prototype.init.call(e),e.value=e.hasOwnProperty("value")?e.value:null,e.el=$("<div>").addClass("w121-fe"),e.name&&0!==e.name.length||(e.name=Wui.id("w121-form-field")),e.id&&0!==e.id.length&&e.hasOwnProperty("id")||(e.id=e.name),e.label&&e.label.length>0&&(e.lbl=new Wui.Label({html:e.label,cls:e.labelCls,field:e,labelPosition:e.labelPosition,labelSize:e.labelSize}),e.elAlias=e.el,e.el=e.lbl.el.append(e.elAlias),$.extend(e,{setLabel:function(){e.lbl.setLabel.apply(e.lbl,arguments)},setLabelSize:function(){e.lbl.setLabelSize.apply(e.lbl,arguments)},setLabelPosition:function(){e.lbl.setLabelPosition.apply(e.lbl,arguments)}})),e.el},onRender:function(){var e=this;e.rendered!==!0&&(e.disabled&&e.disable(),"undefined"!=typeof e.value&&null!==e.value&&e.val(e.value,!1),Wui.O.prototype.onRender.call(e))},disable:function(){this.disabled=!0,this.el&&this.el.addClass&&this.el.addClass("w121-disabled").find("input,textarea,iframe").attr({readonly:!0,tabIndex:-1})},enable:function(){this.disabled=!1,this.el&&this.el.addClass&&this.el.removeClass("w121-disabled").find(".w121-disabled,*[readonly]").removeAttr("readonly tabIndex")},validate:function(){function e(){return"undefined"!=typeof t.parent.throwError?t.parent.throwError(a):!1}var t=this,i=t.val(),n=null!==t.label?t.label:"undefined"!=typeof t.name?t.name:null,a=null!==t.invalidMsg?t.invalidMsg:null!==n?"A value for '"+n+"' is required.":"A required field has an improper value.";if(t.validTest&&"function"==typeof t.validTest&&t.validTest(i)===!1)return e();if($.isNumeric(t.maxChars)&&i&&i.length>t.maxChars)return a=n&&$.trim(n).length?"'"+n+"' must be less than "+t.maxChars+" characters.":"You have a field with too many characters in it, the max is "+t.maxChars+".",e();if(null!==t.validRegEx&&!t.validRegEx.test($.trim(i)))return e();if(t.required){if(null===i||void 0===i)return e();if("string"==typeof i&&0===$.trim(i).length)return e()}return!0},val:function(){if(arguments.length){var e=this.value;return this.setVal.apply(this,arguments),arguments[1]!==!1&&this.setChanged(e),arguments}return this.getVal()},setChanged:function(e){var t=this;t.parent&&t.parent instanceof Wui.Form&&t.parent.formChange(!0,t),t.valChange(t,t.value,e),t.field?t.field.trigger($.Event("valchange"),[t,t.value,e,t.val()]):$(document).trigger($.Event("hiddenchange"),[t,t.value,e,t.val()])},getVal:function(){return this.value},setVal:function(e){this.value=e},valChange:function(){}}),Wui.Hidden=function(e){$.extend(this,e,{label:null,field:$("<input>",{type:"hidden"})}),this.init()},Wui.Hidden.prototype=new Wui.FormField({fieldText:function(e){this.field.val(e)},getVal:function(){return this.value=this.field.val()&&this.field.val().length?this.field.val():null,this.value},init:function(){Wui.FormField.prototype.init.call(this),this.el.hide(),this.append(this.field)},setVal:function(e){this.fieldText(this.value=e&&$.trim(e).length?e:null)}}),Wui.Text=function(e){$.extend(this,{blankText:"",counter:!1,maxChars:null},e,{field:$("<input>",{type:"text"})}),this.init()},Wui.Text.prototype=$.extend(new Wui.Hidden,{init:function(){var e=this;Wui.FormField.prototype.init.call(e),e.blankText&&e.blankText.length&&e.setBlankText(e.blankText),e.append(Wui.Text.prototype.setListeners.call(e,e))},onRender:function(){var e=this;e.rendered!==!0&&(Wui.FormField.prototype.onRender.call(e),$.isNumeric(e.maxChars)&&e.counter===!0&&(e.append(e.charCounter=$("<output>",{tabindex:-1,"for":e.id}).addClass("w121-char-counter")),e.field.keyup(function(){var t=e.val()?e.maxChars-e.val().length:e.maxChars;e.charCounter.text(t),t>=0?e.charCounter.css("color","#333"):e.charCounter.css("color","#900")}),e.field.keyup()))},setBlankText:function(e){var t=this;return t.blankText=e,t.field.attr("placeholder",e),e},setListeners:function(e){var t=this,i=null;return e.field.focusin(function(){i=t.field.val()}).blur(function(){i!=t.field.val()&&(t.val(),t.setChanged())}),this.setListeners!==Wui.Text.prototype.setListeners&&this.setListeners(this),e.field}}),Wui.Textarea=function(e){$.extend(this,{field:$("<textarea>"),height:80},e),this.init()},Wui.Textarea.prototype=$.extend(new Wui.Text,{init:function(){var e=this;Wui.Text.prototype.init.call(e)},cssByParam:function(){Wui.O.prototype.cssByParam.apply(this,arguments),this.field.css({height:this.height}),this.el.css({height:""})}}),Wui.Wysiwyg=function(e){$.extend(this,{css:"body {color:#333;font:90%  Arial, Verdana, Helvetica,sans-serif;overflow:auto;margin:0;padding:0;}a {color:#09c; text-decoration:none;}a:hover {color:#0c9; text-decoration:underline;}",showHTML:!1,fullPath:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,relativePath:/(\/|\/([\w#!:.?+=&%@!\-\/]))/},e,{}),this.init()},Wui.Wysiwyg.prototype=$.extend(new Wui.FormField,{cssByParam:function(){Wui.O.prototype.cssByParam.apply(this,arguments),this.field.css({height:this.height}),this.el.css({height:""})},init:function(){var e=this,t=Wui.id();e.observer=new MutationSummary({callback:function(){function t(){e.setTextArea()}var i=e.editor=e.iframe[0].contentWindow.document;i.designMode="on",i.open(),i.close(),e.css.length&&$("head",i).append($("<style>").attr({type:"text/css"}).text(e.css)),e.bold.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("bold")}),e.italic.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("italic")}),e.underline.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("underline")}),e.strike.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("strikethrough")}),e.link.mousedown(function(){e.previousRange=e.getRange()}).click(function(){var t=e.previousRange;if(t.htmlText)e.exec("createLink",!0);else{var i=Wui.input("Link URL:",function(t){e.exec("createLink",!1,t),i.parent.closeOkay=!0,i.parent.close()},"Insert Link",[{ftype:"Wui.Text",blankText:"Use: 'http://...'    or   '/directory/page/etc...' ",required:!0,invalidMsg:"You need to have a properly formatted link with either an absolute or relative path.",testLink:function(){return this.validTest(this.field.val())},validTest:function(e){return this.fullPath.test(e)||this.relativePath.test(e)},setListeners:function(){var e=this;return e.field.on("blur click keyup keydown mousedown",function(){Wui.Link.prototype.buildOutput.call(e,{uri:e.field.val(),target:"_blank",title:t.toString()})})}}]);window.setTimeout(function(){i.parent.modalEl.css("z-index",Wui.maxZ())},100)}}),e.unlink.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("unlink",!1,[])}),e.ol.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("insertunorderedlist")}),e.ul.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("insertorderedlist")}),e.left.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("justifyLeft")}),e.center.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("justifyCenter")}),e.right.mousedown(function(){e.previousRange=e.getRange()}).click(function(){e.exec("justifyRight")}),$(i.body).children().length||e.exec("insertHTML",!1," "),$(i.body).focus(t).click(t).keyup(t).keydown(t).mousedown(t).blur(t),$(e.elAlias||e.el).resizes({anchored:!0,minWidth:(e.elAlias||e.el).outerWidth(),minHeight:(e.elAlias||e.el).outerHeight()})},queries:[{element:"#"+t}]}),Wui.FormField.prototype.init.call(e),e.el.addClass("w121-wysiwyg"),e.append(e.field=$("<textarea>",{tabIndex:-1}).hide(),e.iframe=$("<iframe>",{id:t}).addClass("w121-editor"),e.tools=$("<div>").addClass("w121-editor-tools")),e.tools.append(e.bold=$('<i class="fa fa-bold">',{tabIndex:-1,title:"Bold"}),e.italic=$('<i class="fa fa-italic">',{tabIndex:-1,title:"Italic"}),e.underline=$('<i class="fa fa-underline">',{tabIndex:-1,title:"Underline"}),e.strike=$('<i class="fa fa-strikethrough">',{tabIndex:-1,title:"Strike-through"}),e.link=$('<i class="fa fa-link">',{tabIndex:-1,title:"Link"}),e.unlink=$('<i class="fa fa-unlink">',{tabIndex:-1,title:"Un-Link"}),e.ol=$('<i class="fa fa-list-ul">',{tabIndex:-1,title:"Unorderd List"}),e.ul=$('<i class="fa fa-list-ol">',{tabIndex:-1,title:"Ordered List"}),e.left=$('<i class="fa fa-align-left">',{tabIndex:-1,title:"Left Align"}),e.center=$('<i class="fa fa-align-center">',{tabIndex:-1,title:"Center Align"}),e.right=$('<i class="fa fa-align-right">',{tabIndex:-1,title:"Right Align"})),e.showHTML&&e.tools.append($("<a>").addClass("html").attr({tabIndex:-1,title:"Toggle HTML View"}))},disable:function(){Wui.FormField.prototype.disable.call(this),Wui.Pane.prototype.addMask.call(this,this.elAlias||this.el)},enable:function(){Wui.FormField.prototype.enable.call(this),Wui.Pane.prototype.removeMask.call(this)},exec:function(e,t,i){if(this.iframe[0].contentWindow.focus(),this.previousRange){var n=this.previousRange,a=this.getSelection();a.removeAllRanges(),a.addRange(n)}this.editor.execCommand(e,t||!1,i||null)},getRange:function(){var e=this.getSelection();return e?e.getRangeAt&&e.rangeCount>0?e.getRangeAt(0):e.createRange?e.createRange():null:null},getSelection:function(){return this.editor.selection?this.editor.selection:this.iframe[0].contentDocument.defaultView.getSelection()},setTextArea:function(){this.field.val(this.getVal())},getVal:function(){var e=$.trim(this.editor.body.innerHTML.replace(/MsoNormal/gi,"").replace(/<\/?link[^>]*>/gi,"").replace(/<\/?meta[^>]*>/gi,"").replace(/<\/?xml[^>]*>/gi,"").replace(/<\?xml[^>]*\/>/gi,"").replace(/<!--(.*)-->/gi,"").replace(/<!--(.*)>/gi,"").replace(/<!(.*)-->/gi,"").replace(/<w:[^>]*>(.*)<\/w:[^>]*>/gi,"").replace(/<w:[^>]*\/>/gi,"").replace(/<\/?w:[^>]*>/gi,"").replace(/<m:[^>]*\/>/gi,"").replace(/<m:[^>]>(.*)<\/m:[^>]*>/gi,"").replace(/<o:[^>]*>([.|\s]*)<\/o:[^>]*>/gi,"").replace(/<o:[^>]*>/gi,"").replace(/<o:[^>]*\/>/gi,"").replace(/<\/o:[^>]*>/gi,"").replace(/<\/?m:[^>]*>/gi,"").replace(/style=\"([^>]*)\"/gi,"").replace(/style=\'([^>]*)\'/gi,"").replace(/class=\"(.*)\"/gi,"").replace(/class=\'(.*)\'/gi,"").replace(/<p[^>]*>/gi,"<p>").replace(/<\/p[^>]*>/gi,"</p>").replace(/<span[^>]*>/gi,"").replace(/<\/span[^>]*>/gi,"").replace(/<st1:[^>]*>/gi,"").replace(/<\/st1:[^>]*>/gi,"").replace(/<font[^>]*>/gi,"").replace(/<\/font[^>]*>/gi,"").replace(/[\r\n]/g," ").replace(/<wordPasteong><\/wordPasteong>/gi,"").replace(/<p><\/p>/gi,"").replace(/\/\*(.*)\*\//gi,"").replace(/<!--/gi,"").replace(/-->/gi,"").replace(/<style[^>]*>[^<]*<\/style[^>]*>/gi,"").replace(/<hr>/gi,""));return this.value=0===e.length?null:e,this.value},setVal:function(e){var t=this;t.value=e,t.field.val(e),t.editor&&$(t.editor.body).html(e)}}),Wui.Radio=function(e){$.extend(this,{buttonStyle:!1,name:"w121-radio",options:[],template:'<li><input type="radio" id="{id}" value="{val}" name="{name}" /><label for="{id}">{title}</label></li>'},e,{el:$("<div>")}),this.init()},Wui.Radio.prototype=$.extend(new Wui.FormField,{init:function(){Wui.FormField.prototype.init.call(this),this.el.addClass("w121-radio");var e=this,t=new Wui.Template({template:this.template}),i=$("<ul>");e.options.forEach(function(n){n.name=e.name,n.id=Wui.id("w121-form-multiple"),i.append(t.make(t.data=n).children("label").attr({unselectable:"on"}).keyup(function(e){(13==e.keyCode||32==e.keyCode)&&$(this).click()}).end().children("input").change(function(){e.elemChange($(this))}).focus(function(){i.addClass("has-focus")}).blur(function(){i.removeClass("has-focus")}).end())}),e.buttonStyle&&(i.addClass("button"),i.find("label").attr({tabindex:0})),e.append(i)},disable:function(){this.disabled=!0,this.el&&this.el.addClass&&this.el.addClass("w121-disabled").find("input,textarea,iframe").attr("disabled","disabled")},elemChange:function(e){this.val(e.val())},enable:function(){this.disabled=!1,this.el&&this.el.addClass&&this.el.removeClass("w121-disabled").find(".w121-disabled,*[disabled]").removeAttr("disabled")},getVal:function(){return this.value},setChanged:function(e){var t=this;t.parent&&t.parent instanceof Wui.Form&&t.parent.formChange(!0,t),t.valChange(t,t.value,e),t.el.find("input:first").trigger($.Event("valchange"),[t,t.value,e,t.val()]).trigger($.Event("hiddenchange"),[t,t.value,e,t.val()])},setVal:function(e){this.value=e,this.el.find("input[value='"+e+"']").attr("checked",!0)}}),Wui.Checkbox=function(e){$.extend(this,{name:"w121-checkbox",template:'<li><input type="checkbox" id="{id}" value="{val}" name="{name}" /><label for="{id}">{title}</label></li>'},e),this.init()},Wui.Checkbox.prototype=$.extend(new Wui.Radio,{calcVal:function(){var e=this,t=[];return e.el.find("input:checked").each(function(){t.push($(this).val())}),t.length>0?t.length>1?t:t[0]:null},elemChange:function(){this.val(this.calcVal())},init:function(){var e=this;if(0===e.options.length&&e.options.push({val:1,title:""}),Wui.Radio.prototype.init.call(e),e.el.removeClass("w121-radio").addClass("w121-checkbox"),1==e.options.length){if(!e.label||!e.label.length)throw"Wui Forms - A Checkbox field "+(e.name?"('"+e.name+"')":"")+" requires a label if it doesn't have options defined.";e.el.find("li label").html(e.label),e.lbl.label.html("")}},getVal:function(){return this.calcVal()},setVal:function(e){var t=this;if(t.value=$.isArray(e)?e:null===e?null:[e],1!=t.options.length||"number"!=typeof e&&"string"!=typeof e){if(t.el.find("input").attr("checked",!1),t.el.find("label").removeClass("checked"),t.value&&t.value.length)for(var i=0;i<t.value.length;i++)t.el.find("input[value="+t.value[i]+"]").prop("checked",!0).siblings("li").addClass("checked")}else t.el.find("input").prop("checked",!!parseInt(e)).siblings("li").toggleClass("checked",!!parseInt(e))},validTest:function(){return this.required&&0===this.val()?!1:!0}}),Wui.Combo=function(e){if($.extend(this,{autoLoad:!1,ddCls:"",emptyMsg:"No Results.",field:$("<input>",{type:"text"}),hiddenField:$("<input>",{type:"hidden"}),filterField:!0,forceSelect:!1,minKeys:1,searchArgName:"srch",searchLocal:!0,showDD:!0,titleItem:null,valueItem:null},e,{multiSelect:!1}),(!this.hasOwnProperty("template")||null===this.template||void 0===this.template)&&this.hasOwnProperty("valueItem")&&this.hasOwnProperty("titleItem")&&this.valueItem&&this.titleItem&&(this.template="<li>{"+this.titleItem+"}</li>",this.noSpecifiedTemplate=!0),!this.template)throw new Error("Wui.js - valueItem and titleItem, or template, are required configs for a Combo.");this.init()},Wui.Combo.prototype=$.extend(new Wui.FormField,new Wui.DataList,{close:function(){this._open=!1,this.dd.css("display","none")},argsByParam:function(){Wui.O.prototype.argsByParam.apply(this,[["name"],this.hiddenField||this.field])},hilightText:function(e){function t(e){return e.find(".wui-highlight").each(function(){$(this).replaceWith($(this).html())}).end()}function i(t){return t.children().length?t.children().each(function(){i($(this))}):t.html(t.text().replace(new RegExp(e,"ig"),function(e){return'<span class="wui-highlight">'+e+"</span>"})),t}var n=this;n.dd.children().each(function(){var n=$(arguments[1]);n.text().toUpperCase().indexOf(e.toUpperCase())>=0?i(n).show():t(n).hide()}),Wui.positionItem(n.field,n.dd)},init:function(){var e=this;Wui.FormField.prototype.init.call(e),e.el.addClass("w121-combo "+(e.idCls=Wui.id())),e._open=!1,e.identity=e.valueItem,"undefined"!=typeof e.blankText&&e.setBlankText(e.blankText),e.append(e.wrapper=$("<div>").addClass("w121-combo").append(e.hiddenField,e.setListeners(e))),$("body").append(e.dd=$("<ul>").addClass("w121-combo-dd "+e.ddCls)),e.el.on({wuichange:function(t,i,n,a,r){var l=r.length?a[i.titleItem]:i.previous;Wui.Text.prototype.fieldText.call(e,l),t.stopPropagation()},click:function(e){e.stopPropagation()},wuiselect:function(e){e.stopPropagation()},wuideselect:function(e){e.stopPropagation()},datachanged:function(e){e.stopPropagation()},wuidblclick:function(e){e.stopPropagation()},wuibtnclick:function(t){e._open?e.close():e.open(),e.field.focus(),t.stopPropagation()}}),e.showDD&&(e.ddSwitch=new Wui.Button({text:'<i class="fa fa-angle-down"></i>',tabIndex:-1,appendTo:e.wrapper,cls:"field-btn dd-switch"}),e.ddSwitch.place(),e.ddSwitch.el.mousedown(function(){e.isBlurring=!1}))},onRender:function(){this.rendered!==!0&&(this.autoLoad&&null!==this.url?this.loadData():null===this.url&&this.make(),Wui.FormField.prototype.onRender.apply(this,arguments))},itemSelect:function(e,t){var i=this;return i.dd.find(".w121-selected").removeClass("w121-selected"),e.el.addClass("w121-selected"),i.selected=[e],i.multiSelect||t||i.el.trigger($.Event("wuiselect"),[i,e.el,e.rec]).trigger($.Event("wuichange"),[i,e.el,e.rec,i.selected]),e},make:function(){var e=this;e.elAlias=e.dd.empty().removeClass("w121-spinner"),Wui.DataList.prototype.make.call(e),0===e.data.length&&e.elAlias.html(e.emptyMsg),window.setTimeout(function(){if(e.dd.children().off("click").bind("touchstart",function(){e.itemSelect($(this).data("itm")),e.isBlurring=!1}).on({mouseenter:function(){e.itemSelect($(this).data("itm"))},mousedown:function(){e.isBlurring=!1},click:function(){e.set(),e.field.focus()}}),e.previous&&e.previous.length&&e.noSpecifiedTemplate&&e.hilightText(e.previous),e.dd.on("mousedown",function(){e.isBlurring=!1}),e.value&&0===e.field.val().length){var t=e.selectBy(e.valueItem,e.value);t?e.set():e.notFound(e.value)}},0)},modifyItem:function(e){return e.el.data("itm",e)},notFound:function(){},open:function(){var e=this,t=e.field.innerWidth()<100?100:e.field.innerWidth();e._open=!0,$(document).one("click","*:not(."+e.idCls+" input)",function(t){t.target!==e.field[0]&&e.close()}),$("body").append(e.dd.css({width:t,display:"block"})),Wui.positionItem(e.field,e.dd),e.scrollToCurrent()},searchData:function(e){var t=this,i=t.previous||void 0;if(t.filterField)if(t.previous=e,t.searchLocal)t.hilightText(e);else if(t.clearSelect(),
(e.length>=t.minKeys||0===e.length)&&t.previous!=i){0===e.length&&t.val(null),t.dd.addClass("w121-spinner");var n={};n[t.searchArgName]=e,t.loadData(n)}},selectAjacent:function(e){var t=this,i=t._open?":visible":"",n=t.elAlias||t.el,a=1==e?":first":":last",r=1==e?"nextAll":"prevAll",l=t.selected.length?t.selected[0].el[r](i+":first"):n.children(i+a);return t.selectByEl(l)},selectBy:function(e,t){var i,n=this;return n.each(function(a){return void 0!==a.rec[e]&&a.rec[e]==t?i=n.itemSelect(a):void 0}),i},set:function(){var e=this,t=e.selected[0];t&&e.value!=t.rec&&(e.val(t.rec),t.rec&&e.hiddenField.val(t.rec[e.valueItem])),e._open&&e.close()},setBlankText:function(){Wui.Text.prototype.setBlankText.apply(this,arguments)},setListeners:function(e){function t(t){var i=null;if(e.selected.length){var n=1==t?":last":":first",a=e._open?":visible":"",r=(e.elAlias||e.el).children(a+n)[0]==e.selected[0].el[0];r?e.clearSelect():i=e.selectAjacent(t)}else i=e.selectAjacent(t);e._open||(null!==i?e.set():(e.val(null),e.field.val(e.previous)))}return e.field.on({keydown:function(i){switch(i.stopPropagation(),0===e.field.val().length&&(e.value=null,e.hiddenField.val("")),i.keyCode){case 40:t(1);break;case 38:t(-1);break;case 9:e.set();break;case 13:i.preventDefault();break;case 27:e.field.val(e.previous),e.close()}},keypress:function(e){e.stopPropagation(),13==e.keyCode&&e.preventDefault()},keyup:function(t){t.stopPropagation(),13==t.keyCode&&(e.set(),t.preventDefault())},input:function(){e._open||e.open(),e.searchData(this.value)},focus:function(t){e.isBlurring=void 0,t.stopPropagation()},blur:function(){e.isBlurring!==!1?e.close():window.setTimeout(function(){e.field.focus()},10)}})},setVal:function(e){function t(t){var n=i.selectBy(i.valueItem,t);return"undefined"!=typeof n?(i.value=n.rec,i.hiddenField.val(n.rec[i.valueItem])):(i.value=e,i.hiddenField.val("number"==typeof e||"string"==typeof e?e:"")),i.value}var i=this;return i.value=e,null===e?(i.clearSelect(),i.hiddenField.val(""),e):t("object"==typeof e?e[i.valueItem]:e)},getVal:function(){return null!==this.value&&"undefined"!=typeof this.value[this.valueItem]?this.value[this.valueItem]:this.value}}),Wui.Link=function(e){$.extend(this,{invalidMsg:"The value for '"+(this.label?this.label:this.args&&this.args.name?this.args.name:"a link field")+"' is not a properly formatted link.",fullPath:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,relativePath:/(\/|\/([\w#!:.?+=&%@!\-\/]))/},e),this.init()},Wui.Link.prototype=$.extend(new Wui.FormField,{buildOutput:function(e){var t=this,i=e||t.value;if(void 0===t.outputFld&&t.append(t.outputFld=$("<output>",{tabindex:-1,"for":t.id}).addClass("feedback")),t.testLink()){var n=new Wui.Template({data:i,template:'<span>Preview:</span> <a href="{uri}" target="{target}" class="{((target == "_blank") ? "uri-new-win" : "")}">{title}</a>'});t.outputFld.html(n.make())}else i.uri&&i.uri.length>2?t.outputFld.html("Your link is improperly formatted."):t.outputFld.empty()},init:function(){var e=this;e.items=[e.urlField=new Wui.Text({cls:"w121-link-focus",blankText:"URL",linkData:"uri"}),e.titleField=new Wui.Text({blankText:"Display Text",linkData:"title"}),e.targetField=new Wui.Combo({valueItem:"target",titleItem:"name",blankText:"Target",keepInline:!0,data:[{target:"_self",name:"Opens In Same Window"},{target:"_blank",name:"Opens In New Window/Tab"}],linkData:"target",cls:"no-margin"})],Wui.FormField.prototype.init.call(e),e.value={target:"_self",title:null,uri:null},(e.elAlias||e.el).addClass("w121-hyperlink"),e.setListeners(e.urlField,e.titleField,e.targetField),e.targetField.val(e.value.target),e.urlField.field.keyup(function(){e.titleField.field.val()==e.titleField.blankText&&(e.value.title=null),null===e.value.title&&e.titleField.val($(this).val())}).blur(function(){e.value.title=e.titleField.val()})},setListeners:function(){var e=this,t=arguments;Array.prototype.forEach.call(t,function(i){(i.field.field||i.field).on("blur click keyup keydown mousedown",null,i,function(t){var i=t.data.val();null!==i&&i!={}&&(e.value[t.data.linkData]=i),e.buildOutput.call(e)}).on("focus",null,i,function(e){Array.prototype.forEach.call(t,function(e){e.el.removeClass("w121-link-focus")}),e.data.el.addClass("w121-link-focus")})})},testLink:function(){return this.fullPath.test(this.value.uri)||this.relativePath.test(this.value.uri)},getVal:function(){return this.value},setVal:function(e){$.extend(this.value,e),this.urlField.val(this.value.uri),this.titleField.val(this.value.title),this.targetField.val(this.value.target),this.buildOutput()},validTest:function(){return this.required&&!this.testLink()?!1:!0}}),Wui.Datetime=function(e){$.extend(this,e,{field:$("<input>",{type:"text"}),hiddenField:$("<input>",{type:"hidden"}),maxDate:null,minDate:null}),this.init()},"undefined"==typeof Date.CultureInfo&&($.extend(Date,{CultureInfo:{name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM"},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,Date.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getTimezoneOffset:function(e,t){return t?Date.CultureInfo.abbreviatedTimeZoneDST[e.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[e.toUpperCase()]},getTimezoneAbbreviation:function(e,t){var i,n=t?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(i in n)if(n[i]===e)return i;return null}}),$.extend(Date.prototype,{getDayOfYear:function(){var e=new Date(this.getFullYear(),0,0),t=this-e,i=864e5,n=Math.floor(t/i)-1;return n},getDaysInMonth:function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},addMilliseconds:function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},addSeconds:function(e){return this.addMilliseconds(1e3*e)},addMinutes:function(e){return this.addMilliseconds(6e4*e)},addHours:function(e){return this.addMilliseconds(36e5*e)},addDays:Date.prototype.addDays=function(e){return this.addMilliseconds(864e5*e)},addWeeks:function(e){return this.addMilliseconds(6048e5*e)},addMonths:function(e){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+e),this.setDate(Math.min(t,this.getDaysInMonth())),this},addYears:function(e){return this.addMonths(12*e)},add:function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return(t.millisecond||t.milliseconds)&&this.addMilliseconds(t.millisecond||t.milliseconds),(t.second||t.seconds)&&this.addSeconds(t.second||t.seconds),(t.minute||t.minutes)&&this.addMinutes(t.minute||t.minutes),(t.hour||t.hours)&&this.addHours(t.hour||t.hours),(t.month||t.months)&&this.addMonths(t.month||t.months),(t.year||t.years)&&this.addYears(t.year||t.years),(t.day||t.days)&&this.addDays(t.day||t.days),this},getDayName:function(e){return e?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},getMonthName:function(e){return e?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},_toString:Date.prototype.toString,toString:function(e){var t=this,i=function(e){return 1==e.toString().length?"0"+e:e};return e?e.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(e){switch(e){case"hh":return i(t.getHours()<13?t.getHours():t.getHours()-12);case"h":return t.getHours()<13?t.getHours():t.getHours()-12;case"HH":return i(t.getHours());case"H":return t.getHours();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return t.getFullYear();case"yy":return t.getFullYear().toString().substring(2,4);case"dddd":return t.getDayName();case"ddd":return t.getDayName(!0);case"dd":return i(t.getDate());case"d":return t.getDate().toString();case"MMMM":return t.getMonthName();case"MMM":return t.getMonthName(!0);case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()}})),Wui.Datetime.prototype=$.extend(new Wui.Text,{second:1e3,minute:6e4,hour:36e5,day:864e5,days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],shortDays:["sun","mon","tue","wed","thu","fri","sat"],months:["january","february","march","april","may","june","july","august","september","october","november","december"],shortMonths:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],sarcasmArray:["Not quite.","Huh?","Nope","Arg..","Sorry","What?","Bleck.","Nuh-uh.","Keep Trying.","No Entiendo."],dispFormat:"ddd MM-dd-yyyy h:mm tt",dtFormat:"MM-dd-yyyy h:mm tt",dateOnly:!1,argsByParam:function(){Wui.O.prototype.argsByParam.apply(this,[["name"],this.hiddenField||this.field])},displayDate:function(e){var t=this;return void 0!==e?(t.outputFld.html(e),e):""!==t.value&&t.value?(t.outputFld.html(t.minDate&&t.value<t.minDate?t.toString()+" is before the min date.":t.maxDate&&t.value>t.maxDate?t.maxDate.toString(t.dtFormat)+" is past the max date.":t.toString(t.dispFormat)),t.toString()):null},getM:function(e){for(var t=0;(e/=10)>=1;)t++;return t},init:function(){var e=this;Wui.Text.prototype.init.call(e),e.el.addClass("w121-datetime"),e.dateOnly&&(e.hasOwnProperty("dispFormat")||(e.dispFormat="ddd MM-dd-yyyy"),e.hasOwnProperty("dtFormat")||(e.dtFormat="MM-dd-yyyy")),e.append($("<div>").addClass("w121-date").append(e.hiddenField,e.setListeners(e),e.outputFld=$("<output>",{tabindex:-1,"for":e.id}).addClass("feedback"),e.toggleCal=$("<button>",{tabIndex:-1}).html('<i class="fa fa-calendar"></i>'))),e.toggleCal.click(function(){return e.calendar?(e.calendar.remove(),e.calendar=void 0):($("body").append(e.calendar=e.makeCalendar(void 0,function(t,i,n){e.value=e.validDate(e.value)?new Date(t,i,n,e.value.getHours(),e.value.getMinutes()):new Date(t,i,n),e.val(e.displayDate())}).click(function(){return!1})),$(document).one("click",function(){$(".w121-cal").remove(),e.calendar=void 0}),Wui.positionItem(e.field,e.calendar)),!1})},onRender:Wui.FormField.prototype.onRender,num2Dec:function(e){var t={a:1,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18};e=e.toString().replace(/ and /g," ").replace(/-/g," "),$.each(t,function(i){e=e.replace(new RegExp("(^|[ ]|-)"+i+"(-|[ ]|$)","g")," "+t[i]+" ")});for(var i=$.trim(e).split(/[ ]+/),n=[],a=0,r=0;i[r];)this.getM(i[r])>2&&(n.push(i.splice(0,r+1)),r=0),r++;n.push(i);for(var l=0;l<n.length;l++){var o=this.txt2Num(n[l]);parseInt(o)&&(a+=parseInt(o))}return a},makeCalendar:function(e,t,i){function n(e){var i=1,o=0,u=0,c=e.getMonth(),h=e.getFullYear(),f=e.getDate(),p=new Date(h,c,1),g=p.getDay(),m=e.getDaysInMonth(),v=a.months[c],y='<table w121-month="'+c+'" w121-year="'+h+'">';for(y+='<tr><th colspan="7"><div class="w121-cal-header">'+v+"&nbsp;"+h+"</div></th></tr>",y+='<tr class="w121-cal-header-day">',o=0;6>=o;o++)y+="<td>"+a.shortDays[o].substring(0,2)+"</td>";for(y+="</tr><tr>",o=0;9>o;o++){for(u=0;6>=u;u++){if(y+="<td>",m>=i&&(o>0||u>=g)){var w=new Date(h,c,i),b=a.minDate&&w<a.minDate||a.maxDate&&w>a.maxDate?" w121-cal-disabled":"";y+='<a class="w121-cal-day'+b+'">'+i++ +"</a>"}y+="</td>"}if(i>m)break;y+="</tr><tr>"}y+="</tr></table>";var x=$(y),C=x.find(".w121-cal-header");return C.append('<a class="w121-cal-prev fa fa-caret-left">','<a class="w121-cal-next fa fa-caret-right">'),C.children("a").click(function(){var e=$(this).hasClass("w121-cal-prev")?-1:1,t=new Date(h,c+e,1);d.empty().append(n(t)),$(document).trigger($.Event("calupdate"+s),[a,d,t])}),l&&l.getMonth&&l.getMonth()==c&&l.getFullYear()==h&&x.find("a:contains("+f+"):first").addClass("w121-selected"),r.getMonth()==c&&r.getFullYear()==h&&x.find("a:contains("+r.getDate()+"):first").addClass("w121-highlight"),x.find("td a:not(.w121-cal-disabled)").click(function(){var e=$(this),i=parseInt(e.text()),n=e.parents("[w121-month]"),r=parseInt(n.attr("w121-month")),l=parseInt(n.attr("w121-year"));t(l,r,i),a.calendar.remove(),a.calendar=void 0}),x}var a=this,r=new Date,l=this.validDate(i)?i:this.value,o=e||(a.validDate(l)?l:r),s=a.name?"."+a.name:"",d=$("<div>").addClass("w121-cal");return d.append(n(o)),$(document).trigger($.Event("calupdate"+s),[a,d,o]),d},processDate:function(e){var t=this,i=e||t.field.val();if(i.length>0){var n=t.translateDate(i);return"Invalid Date"==n.toString()?(t.displayDate(t.sarcasmArray[Wui.randNum(0,t.sarcasmArray.length-1)]),void t.hiddenField.val("")):(t.value=n,t.hiddenField.val(t.value.toString(t.dtFormat)),t.displayDate(),n)}t.value=null,t.hiddenField.val(""),t.displayDate("")},setListeners:function(e){return e.listnersSet!==!0?(e.listnersSet=!0,e.field.on("input",function(){e.processDate()}).on("keyup",function(t){if(40==t.keyCode||38==t.keyCode){var i=e.value instanceof Date?40==t.keyCode?1:-1:0,n=e.value instanceof Date?e.value:new Date;e.value=n.addDays(i),e.displayDate(),e.field.val(e.value.toString(e.dtFormat))}})):e.field},setMinDate:function(e){var t=this;return t.minDate=t.translateDate(e.toString()),t.field.datepicker("option","minDate",new Date(t.minDate.valueOf()+t.minute)),t.minDate},translateDate:function(e){var t=this,i=new Date,n=/\d{1,2}\/\d{1,2}\/\d{2,4}/,a=/([a|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|hundred|thousand|million|billion|trillion|and,\d,\s,-]+)\s((millisecond|second|minute|hour|day|week|month|year)+[s]*)\s(from|after|before|previous to)+\s(.+)$/,r=a.exec(e.toLowerCase());if(null!==r){var l=t.num2Dec(r[1]),o={from:1,after:1,before:-1,"previous to":-1},s=o[r[4]],d=t.translateDate(r[5]);return d["add"+r[3].charAt(0).toUpperCase()+r[3].slice(1)+"s"](l*s)}return null!==e.toLowerCase().match(/now/)?i:(e=e.toLowerCase().replace("noon","12").replace("midnight","00:00").replace(/o.clock/,"").replace(/(\d+)[st|nd|rd|th]+/,function(e,t){return t}).replace(/(\d{4})-(\d{1,2})-(\d{1,2})/g,function(e,t,i,n){return i+"/"+n+"/"+t}).replace(/(\d{1,2})-(\d{1,2})-(\d{2,4})/g,function(e,t,i,n){return t+"/"+i+"/"+n}).replace(/^(\d{1,2})-(\d{1,2})[\s]*/,function(e,t,i){return t+"/"+i+" "}).replace("at","@").replace(/(today|tomorrow|yesterday)/,function(e,n){var a={today:0,tomorrow:1,yesterday:-1},r=new Date(i.valueOf()+t.day*a[n]);return r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear()}).replace(/(next|last) ([a-z]{3,10})[ ]*([0-9]+)*/,function(e,n,a,r){var l=t.day*("next"==n?1:-1),o=$.inArray(a,t.days)>-1?$.inArray(a,t.days):$.inArray(a,t.shortDays),s=$.inArray(a,t.months)>-1?$.inArray(a,t.months):$.inArray(a,t.shortMonths),d=o>-1?o:s>-1?s:-1,u=o>-1?"getDay":s>-1?"getMonth":"";if(d>-1){for(var c=i.valueOf(),h=new Date(c+=l);h[u]()!=d;)h=new Date(c+=l);return void 0!==s&&-1!=s&&0!==r.length&&h.setDate(parseInt(r)),h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear()+" "}return""}).replace(/(\d{1,2})[ -]+([a-z]{3,10})([ -]*)/,function(e,i,n,a){return($.inArray(n,t.months)>-1?$.inArray(n,t.months):$.inArray(n,t.shortMonths))+1+"/"+i+a.replace("-"," ")}).replace(/(\b(one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|twenty|thirty|forty|fifty|-)+\b)/g,function(e,i){return t.num2Dec(i)}).replace(/([a-z]{3,10}) (\d{1,2})[,]*/,function(e,i,n){return($.inArray(i,t.months)>-1?$.inArray(i,t.months):$.inArray(i,t.shortMonths))+1+"/"+n}).replace(/^(\d{1,2}\/\d{1,2}(?![\d]))([\s|\/]*)(\d{0,4})/,function(e,n,a,r){if(2==r.length){var l=parseInt(i.getFullYear().toString().substr(2,4)),o=100*parseInt(i.getFullYear().toString().substr(0,2)),s=parseInt(r),d=100-s,u=50>l?-100*(d>=50?0:1):100*(50>d?0:1),c=o+s+u;return n+"/"+c}if(4==r.length)return n+"/"+r;var h=n+"/"+i.getFullYear().toString(),f=new Date(h);return f.valueOf()>i.valueOf()?h:n+"/"+new Date(i.valueOf()+365*t.day).getFullYear()+" "}).replace(/(\d{1,2}\/\d{1,2})\s(\d{4})/,function(e,t,i){return t+"/"+i}),e=n.test(e)===!0?e:i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear()+" "+e,e=e.replace(/(\d{1,2}\/\d{1,2}\/\d{4})\s(.+)/,function(e,t,i){return-1==i.indexOf("@")&&(i="@ "+i),t+" "+i}).replace(/\d[ ]*[a|p]$/,function(e){return e+"m"}).replace(/[a|p][.][m]*[.]*/,function(e){return e.replace(/[.]/g,"")}).replace(/\d.m/,function(e){return e.substring(0,e.length-2)+" "+e.substring(e.length-2,3)}).replace(/@ (\d+[ ]\d+)/,function(e,t){return t.replace(" ",":")}).replace(/@ (\d+)/,function(e,t,i,n){return-1!=n.indexOf(":")?e:e.trim()+":00 "}).replace(/@/g,""),new Date(e))},txt2Num:function(e){var t=0,i=0,n=0,a=0,r=0,l=!1;if(1==e.length)return e[0];for(;void 0!==e[t+1];)n=parseInt(e[t]),a=parseInt(e[t+1]),l=this.getM(n)<=this.getM(a),r=parseInt(e[e.length-1]),0===t?i=l?n*a:n+a:l?i*=a:i+=a,t++;return r!=a?this.getM(r)>2?i*=r:i+=r:i},getVal:function(){return this.value},setVal:function(e){null!==e?"string"==typeof e?(this.fieldText(e),this.processDate()):(this.value=e,this.fieldText(this.displayDate())):(this.fieldText(""),this.hiddenField.val(""),this.outputFld.html(""),this.value=null)},toString:function(e){return null!==this.value?this.value.toString(e||this.dtFormat)||"":""},validDate:function(e){return null===e||"undefined"==typeof e?!1:"function"!=typeof e.getTime?!1:"Invalid Date"==e.toString()?!1:!0}}),Wui.File=function(e){$.extend(this,{accept:null,multiple:!1,field:$("<input>").attr({type:"file"})},e),this.init()},Wui.File.prototype=$.extend(new Wui.Text,{disable:function(){this.disabled=!0,this.el&&this.el.addClass&&this.el.addClass("w121-disabled").find("input,textarea,iframe").attr("disabled","disabled")},enable:function(){this.disabled=!1,this.el&&this.el.addClass&&this.el.removeClass("w121-disabled").find(".w121-disabled,*[disabled]").removeAttr("disabled")},init:function(){var e=this;Wui.Text.prototype.init.call(e),e.append(e.field),e.multiple&&e.field.attr("multiple",!0),e.accept&&e.accept.length&&e.field.attr("accept",e.accept),e.field.change(function(){e.field.trigger($.Event("filechanged"),[e,e.field[0].files])})},validTest:function(e){return this.required?null!==e&&0!==e.length:!0},getVal:function(){return this.field[0].files},setVal:function(e){null===e&&this.field.val("")}}),Wui.Toggle=function(e){$.extend(this,{opt1:"option 1",opt2:"option 2",borderRadius:0,opt1Color:"#555",opt2Color:"#555",toggleHeight:26,toggleWidth:150},e,{field:$("<input>").attr({type:"hidden"}),toggler:$('<div class="w121-toggle-outer"><div class="w121-toggler"><div class="w121-opt-1"></div><div class="w121-toggle-btn">&nbsp;</div><div class="w121-opt-2"></div></div></div>')}),this.init()},Wui.Toggle.prototype=$.extend(new Wui.FormField,{init:function(){var e=this,t=e.toggleHeight;Wui.FormField.prototype.init.call(e),e.toggleWidth=$.isNumeric(e.width)?e.width:e.toggleWidth,e.blankText&&e.blankText.length&&e.setBlankText(e.blankText),e.append(Wui.Toggle.prototype.setListeners.call(e,e)),e.toggler.find(".w121-opt-1").html(e.opt1),e.toggler.find(".w121-opt-2").html(e.opt2),e.val(e.opt1),(e.elAlias||e.el).addClass("w121-toggle"),e.el.find(".w121-toggle-outer").height(t-2).width(e.toggleWidth),e.el.find(".w121-toggle-outer, .w121-toggle-btn").css("border-radius",e.borderRadius),e.el.find(".w121-toggle-btn").css({width:t-4,left:"calc(50% - "+(t-4)+"px)"}),e.el.find(".w121-opt-1").css({"text-indent":-(t-e.borderRadius)+(e.borderRadius?0:2),"background-color":e.opt1Color}),e.el.find(".w121-opt-2").css({"text-indent":t-e.borderRadius-(e.borderRadius?0:2),"background-color":e.opt2Color})},setListeners:function(e){var t=this;return e.toggler.click(function(){t.val(t.value==t.opt1?t.opt2:t.opt1),t.el.find(".w121-toggle-btn").css("left","calc(50% - "+(t.toggleHeight-4)*(t.value==t.opt1?1:0)+"px)")}),this.setListeners!==Wui.Toggle.prototype.setListeners&&this.setListeners(this),[e.field,e.toggler]},setVal:function(e){var t=this;t.value=e,t.toggler[t.value==t.opt2?"addClass":"removeClass"]("w121-toggle-alt"),t.field.val(t.value?t.value:"")}}),Wui.input=function(e,t,i,n,a){n?n.length||(n=n instanceof Wui.FormField||n.ftype?[n]:[{ftype:"Wui.Text"}]):n=[{ftype:"Wui.Text"}],1==n.length&&$.extend(n[0],{label:e,required:!0,name:"inputField"}),void 0!==a&&n.splice(0,0,{ftype:"Wui.Note",html:a});var r=new Wui.Form({labelPosition:"left",items:n}),l=new Wui.Window({title:i||"Input",bbar:[new Wui.Button({text:"Cancel"}),new Wui.Button({text:"Submit"})],init:function(){var e=this;Wui.Window.prototype.init.apply(e,arguments),e.footer.el.on("wuibtnclick",function(t,i){"Cancel"==i.text?e.doClose():e.getVal(),t.stopPropagation()})},isModal:!0,items:[r],cls:"w121-input-window",width:600,height:400,getVal:function(){var e=r.getData();if(e)if(t&&"function"==typeof t){var i=Wui.getKeys(e).length,n=t(1==i&&e.inputField?e.inputField:e);l.closeOkay=void 0===t?!0:n}else l.closeOkay=!0},doClose:function(){l.closeOkay=!0,l.close()},onWinClose:function(){return l.closeOkay!==!0?!1:l.closeOkay}});return l.header.splice(0,1),r}}(jQuery,window[_wuiVar]),function(e,t,i){i.stateMachine=function(t){e.extend(this,{changeMethod:function(){}},t)},i.stateMachine.prototype={setState:function(e){var i=t.location.href.split("#"),n=i[0]+"#",a=n;return e&&"object"==typeof e?a=n+this.stringify(e):e&&"string"==typeof e&&(a=n+e),t.location=a,t.location},stringify:function(e){var t="";for(var n in e){var a=i.getKeys(e[n].params);t+=(n>0?"/":"")+e[n].view;for(var r=0;r<a.length;r++)t+=(r>0?"&":"?")+a[r]+"="+e[n].params[a[r]]}return t},getState:function(){var e=[];return t.location.hash.replace(/([^\/^#]+)/g,function(t){var i={};t=t.replace(/(\?|\&)([^=]+)\=([^&]*)/g,function(e,t,n,a){return i[n]=a,""}),e.push({view:t,params:i})}),e},getParam:function(e,t){var i,n=this.getState();for(var a in n)if(n[a].view===e&&n[a].params[t])return n[a].params[t];return i},setParam:function(t,i,n){var a=this.getState();for(var r in a)if(a[r].view===t)return"string"==typeof i?a[r].params[i]=n:e.extend(a[r].params,i),this.setState(a),n;return void 0},changeView:function(e,t){var i=this.getState();for(var n in i)i[n].view===e&&(i[n].view=t);this.setState(i)},setView:function(e,t){var i=[{view:e}];t&&(i[0].params=t),this.setState(i)},addView:function(e,t){var i=this.getState();t=t||{};for(var n in i)if(i[n].view===e)return i[n].params=t,this.setState(i),e;return i.push({view:e,params:t}),this.setState(i),e},clearView:function(e){var t=this.getState(),i=null;for(var n in t)if(t[n].view===e){i=t.splice(n,1);break}return this.setState(t),i},getViews:function(){for(var e=this.getState(),t=[],i=0;i<e.length;i++)t.push(e[i].view);return t},clearState:function(){this.setState()},addChangeMethod:function(i){var n=this,a=n.getState(),r=n.changeMethod;n.changeMethod=function(e){r(e),i(e)},e(t).off("hashchange").on("hashchange",function(){n.changeMethod.call(n,a)})},turnOff:function(){this.changeMethod=function(){},e(t).off("hashchange")}}}(jQuery,this,window[_wuiVar]),function(e,t,i){"$:nomunge";function n(e){return e=e||location.href,"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var a,r="hashchange",l=document,o=e.event.special,s=l.documentMode,d="on"+r in t&&(s===i||s>7);e.fn[r]=function(e){return e?this.bind(r,e):this.trigger(r)},e.fn[r].delay=50,o[r]=e.extend(o[r],{setup:function(){return d?!1:void e(a.start)},teardown:function(){return d?!1:void e(a.stop)}}),a=function(){function a(){var i=n(),o=c(s);i!==s?(u(s=i,o),e(t).trigger(r)):o!==s&&(location.href=location.href.replace(/#.*/,"")+o),l=t.setTimeout(a,e.fn[r].delay)}var l,o={},s=n(),d=function(e){return e},u=d,c=d;return o.start=function(){l||a()},o.stop=function(){l&&clearTimeout(l),l=i},o}()}(jQuery,this);