// verge 1.9.1+201402130803
// https://github.com/ryanve/verge
// MIT License 2013 Ryan Van Etten
(function(e,t,n){if(typeof module!="undefined"&&module["exports"])module["exports"]=n();else e[t]=n()})(this,"verge",function(){function a(){return{width:o(),height:u()}}function f(e,t){var n={};t=+t||0;n["width"]=(n["right"]=e["right"]+t)-(n["left"]=e["left"]-t);n["height"]=(n["bottom"]=e["bottom"]+t)-(n["top"]=e["top"]-t);return n}function l(e,t){e=e&&!e.nodeType?e[0]:e;if(!e||1!==e.nodeType)return false;return f(e.getBoundingClientRect(),t)}function c(e){e=null==e?a():1===e.nodeType?l(e):e;var t=e["height"],n=e["width"];t=typeof t=="function"?t.call(e):t;n=typeof n=="function"?n.call(e):n;return n/t}var e={},t=typeof window!="undefined"&&window,n=typeof document!="undefined"&&document,r=n&&n.documentElement,i=t["matchMedia"]||t["msMatchMedia"],s=i?function(e){return!!i.call(t,e).matches}:function(){return false},o=e["viewportW"]=function(){var e=r["clientWidth"],n=t["innerWidth"];return e<n?n:e},u=e["viewportH"]=function(){var e=r["clientHeight"],n=t["innerHeight"];return e<n?n:e};e["mq"]=s;e["matchMedia"]=i?function(){return i.apply(t,arguments)}:function(){return{}};e["viewport"]=a;e["scrollX"]=function(){return t.pageXOffset||r.scrollLeft};e["scrollY"]=function(){return t.pageYOffset||r.scrollTop};e["rectangle"]=l;e["aspect"]=c;e["inX"]=function(e,t){var n=l(e,t);return!!n&&n.right>=0&&n.left<=o()};e["inY"]=function(e,t){var n=l(e,t);return!!n&&n.bottom>=0&&n.top<=u()};e["inViewport"]=function(e,t){var n=l(e,t);return!!n&&n.bottom>=0&&n.right>=0&&n.top<=u()&&n.left<=o()};return e})

// Copyright 2011 Google Inc.
// Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
// Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
function enteredOrExited(e){return e===1||e===5}function escapeQuotes(e){return'"'+e.replace(/"/,'\\"')+'"'}function validateAttribute(e){if(typeof e!="string")throw Error("Invalid request opion. attribute must be a non-zero length string.");e=e.trim();if(!e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(attributeFilterPattern))throw Error("Invalid request option. invalid attribute name: "+e);return e}function validateElementAttributes(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");var t={};var n={};var r=e.split(/\s+/);for(var i=0;i<r.length;i++){var s=r[i];if(!s)continue;var s=validateAttribute(s);var o=s.toLowerCase();if(t[o])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");n[s]=true;t[o]=true}return Object.keys(n)}function elementFilterAttributes(e){var t={};e.forEach(function(e){e.qualifiers.forEach(function(e){t[e.attrName]=true})});return Object.keys(t)}var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];r.prototype=t.prototype;e.prototype=new r};var MutationObserverCtor;if(typeof WebKitMutationObserver!=="undefined")MutationObserverCtor=WebKitMutationObserver;else MutationObserverCtor=MutationObserver;if(MutationObserverCtor===undefined){console.error("DOM Mutation Observers are required.");console.error("https://developer.mozilla.org/en-US/docs/DOM/MutationObserver");throw Error("DOM Mutation Observers are required")}var NodeMap=function(){function e(){this.nodes=[];this.values=[]}e.prototype.isIndex=function(e){return+e===e>>>0};e.prototype.nodeId=function(t){var n=t[e.ID_PROP];if(!n)n=t[e.ID_PROP]=e.nextId_++;return n};e.prototype.set=function(e,t){var n=this.nodeId(e);this.nodes[n]=e;this.values[n]=t};e.prototype.get=function(e){var t=this.nodeId(e);return this.values[t]};e.prototype.has=function(e){return this.nodeId(e)in this.nodes};e.prototype.delete=function(e){var t=this.nodeId(e);delete this.nodes[t];this.values[t]=undefined};e.prototype.keys=function(){var e=[];for(var t in this.nodes){if(!this.isIndex(t))continue;e.push(this.nodes[t])}return e};e.ID_PROP="__mutation_summary_node_map_id__";e.nextId_=1;return e}();var Movement;(function(e){e[e["STAYED_OUT"]=0]="STAYED_OUT";e[e["ENTERED"]=1]="ENTERED";e[e["STAYED_IN"]=2]="STAYED_IN";e[e["REPARENTED"]=3]="REPARENTED";e[e["REORDERED"]=4]="REORDERED";e[e["EXITED"]=5]="EXITED"})(Movement||(Movement={}));var NodeChange=function(){function e(e,t,n,r,i,s,o,u){if(typeof t==="undefined"){t=false}if(typeof n==="undefined"){n=false}if(typeof r==="undefined"){r=false}if(typeof i==="undefined"){i=null}if(typeof s==="undefined"){s=false}if(typeof o==="undefined"){o=null}if(typeof u==="undefined"){u=null}this.node=e;this.childList=t;this.attributes=n;this.characterData=r;this.oldParentNode=i;this.added=s;this.attributeOldValues=o;this.characterDataOldValue=u;this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}e.prototype.getAttributeOldValue=function(e){if(!this.attributeOldValues)return undefined;if(this.isCaseInsensitive)e=e.toLowerCase();return this.attributeOldValues[e]};e.prototype.getAttributeNamesMutated=function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues){e.push(t)}return e};e.prototype.attributeMutated=function(e,t){this.attributes=true;this.attributeOldValues=this.attributeOldValues||{};if(e in this.attributeOldValues)return;this.attributeOldValues[e]=t};e.prototype.characterDataMutated=function(e){if(this.characterData)return;this.characterData=true;this.characterDataOldValue=e};e.prototype.removedFromParent=function(e){this.childList=true;if(this.added||this.oldParentNode)this.added=false;else this.oldParentNode=e};e.prototype.insertedIntoParent=function(){this.childList=true;this.added=true};e.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode};return e}();var ChildListChange=function(){function e(){this.added=new NodeMap;this.removed=new NodeMap;this.maybeMoved=new NodeMap;this.oldPrevious=new NodeMap;this.moved=undefined}return e}();var TreeChanges=function(e){function t(t,n){e.call(this);this.rootNode=t;this.reachableCache=undefined;this.wasReachableCache=undefined;this.anyParentsChanged=false;this.anyAttributesChanged=false;this.anyCharacterDataChanged=false;for(var r=0;r<n.length;r++){var i=n[r];switch(i.type){case"childList":this.anyParentsChanged=true;for(var s=0;s<i.removedNodes.length;s++){var o=i.removedNodes[s];this.getChange(o).removedFromParent(i.target)}for(var s=0;s<i.addedNodes.length;s++){var o=i.addedNodes[s];this.getChange(o).insertedIntoParent()}break;case"attributes":this.anyAttributesChanged=true;var u=this.getChange(i.target);u.attributeMutated(i.attributeName,i.oldValue);break;case"characterData":this.anyCharacterDataChanged=true;var u=this.getChange(i.target);u.characterDataMutated(i.oldValue);break}}}__extends(t,e);t.prototype.getChange=function(e){var t=this.get(e);if(!t){t=new NodeChange(e);this.set(e,t)}return t};t.prototype.getOldParent=function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode};t.prototype.getIsReachable=function(e){if(e===this.rootNode)return true;if(!e)return false;this.reachableCache=this.reachableCache||new NodeMap;var t=this.reachableCache.get(e);if(t===undefined){t=this.getIsReachable(e.parentNode);this.reachableCache.set(e,t)}return t};t.prototype.getWasReachable=function(e){if(e===this.rootNode)return true;if(!e)return false;this.wasReachableCache=this.wasReachableCache||new NodeMap;var t=this.wasReachableCache.get(e);if(t===undefined){t=this.getWasReachable(this.getOldParent(e));this.wasReachableCache.set(e,t)}return t};t.prototype.reachabilityChange=function(e){if(this.getIsReachable(e)){return this.getWasReachable(e)?2:1}return this.getWasReachable(e)?5:0};return t}(NodeMap);var MutationProjection=function(){function e(e,t,n,r,i){this.rootNode=e;this.mutations=t;this.selectors=n;this.calcReordered=r;this.calcOldPreviousSibling=i;this.treeChanges=new TreeChanges(e,t);this.entered=[];this.exited=[];this.stayedIn=new NodeMap;this.visited=new NodeMap;this.childListChangeMap=undefined;this.characterDataOnly=undefined;this.matchCache=undefined;this.processMutations()}e.prototype.processMutations=function(){if(!this.treeChanges.anyParentsChanged&&!this.treeChanges.anyAttributesChanged)return;var e=this.treeChanges.keys();for(var t=0;t<e.length;t++){this.visitNode(e[t],undefined)}};e.prototype.visitNode=function(e,t){if(this.visited.has(e))return;this.visited.set(e,true);var n=this.treeChanges.get(e);var r=t;if(n&&n.childList||r==undefined)r=this.treeChanges.reachabilityChange(e);if(r===0)return;this.matchabilityChange(e);if(r===1){this.entered.push(e)}else if(r===5){this.exited.push(e);this.ensureHasOldPreviousSiblingIfNeeded(e)}else if(r===2){var i=2;if(n&&n.childList){if(n.oldParentNode!==e.parentNode){i=3;this.ensureHasOldPreviousSiblingIfNeeded(e)}else if(this.calcReordered&&this.wasReordered(e)){i=4}}this.stayedIn.set(e,i)}if(r===2)return;for(var s=e.firstChild;s;s=s.nextSibling){this.visitNode(s,r)}};e.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(!this.calcOldPreviousSibling)return;this.processChildlistChanges();var t=e.parentNode;var n=this.treeChanges.get(e);if(n&&n.oldParentNode)t=n.oldParentNode;var r=this.childListChangeMap.get(t);if(!r){r=new ChildListChange;this.childListChangeMap.set(t,r)}if(!r.oldPrevious.has(e)){r.oldPrevious.set(e,e.previousSibling)}};e.prototype.getChanged=function(e,t,n){this.selectors=t;this.characterDataOnly=n;for(var r=0;r<this.entered.length;r++){var i=this.entered[r];var s=this.matchabilityChange(i);if(s===1||s===2)e.added.push(i)}var o=this.stayedIn.keys();for(var r=0;r<o.length;r++){var i=o[r];var s=this.matchabilityChange(i);if(s===1){e.added.push(i)}else if(s===5){e.removed.push(i)}else if(s===2&&(e.reparented||e.reordered)){var u=this.stayedIn.get(i);if(e.reparented&&u===3)e.reparented.push(i);else if(e.reordered&&u===4)e.reordered.push(i)}}for(var r=0;r<this.exited.length;r++){var i=this.exited[r];var s=this.matchabilityChange(i);if(s===5||s===2)e.removed.push(i)}};e.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var n=this.treeChanges.reachabilityChange(e);if(n===0||n===1)throw Error("getOldParentNode requested on invalid node.");return e.parentNode};e.prototype.getOldPreviousSibling=function(e){var t=e.parentNode;var n=this.treeChanges.get(e);if(n&&n.oldParentNode)t=n.oldParentNode;var r=this.childListChangeMap.get(t);if(!r)throw Error("getOldPreviousSibling requested on invalid node.");return r.oldPrevious.get(e)};e.prototype.getOldAttribute=function(e,t){var n=this.treeChanges.get(e);if(!n||!n.attributes)throw Error("getOldAttribute requested on invalid node.");var r=n.getAttributeOldValue(t);if(r===undefined)throw Error("getOldAttribute requested for unchanged attribute name.");return r};e.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t;var n;if(e){t={};n={};for(var r=0;r<e.length;r++){var i=e[r];t[i]=true;n[i.toLowerCase()]=i}}var s={};var o=this.treeChanges.keys();for(var r=0;r<o.length;r++){var u=o[r];var a=this.treeChanges.get(u);if(!a.attributes)continue;if(2!==this.treeChanges.reachabilityChange(u)||2!==this.matchabilityChange(u)){continue}var f=u;var l=a.getAttributeNamesMutated();for(var c=0;c<l.length;c++){var i=l[c];if(t&&!t[i]&&!(a.isCaseInsensitive&&n[i])){continue}var h=a.getAttributeOldValue(i);if(h===f.getAttribute(i))continue;if(n&&a.isCaseInsensitive)i=n[i];s[i]=s[i]||[];s[i].push(f)}}return s};e.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue};e.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];var e=this.treeChanges.keys();var t=[];for(var n=0;n<e.length;n++){var r=e[n];if(2!==this.treeChanges.reachabilityChange(r))continue;var i=this.treeChanges.get(r);if(!i.characterData||r.textContent==i.characterDataOldValue)continue;t.push(r)}return t};e.prototype.computeMatchabilityChange=function(e,t){if(!this.matchCache)this.matchCache=[];if(!this.matchCache[e.uid])this.matchCache[e.uid]=new NodeMap;var n=this.matchCache[e.uid];var r=n.get(t);if(r===undefined){r=e.matchabilityChange(t,this.treeChanges.get(t));n.set(t,r)}return r};e.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly){switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return 2;default:return 0}}if(!this.selectors)return 2;if(e.nodeType!==Node.ELEMENT_NODE)return 0;var n=e;var r=this.selectors.map(function(e){return t.computeMatchabilityChange(e,n)});var i=0;var s=0;while(i!==2&&s<r.length){switch(r[s]){case 2:i=2;break;case 1:if(i===5)i=2;else i=1;break;case 5:if(i===1)i=2;else i=5;break}s++}return i};e.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);if(!t){t=new ChildListChange;this.childListChangeMap.set(e,t)}return t};e.prototype.processChildlistChanges=function(){if(this.childListChangeMap)return;this.childListChangeMap=new NodeMap;for(var e=0;e<this.mutations.length;e++){var t=this.mutations[e];if(t.type!="childList")continue;if(this.treeChanges.reachabilityChange(t.target)!==2&&!this.calcOldPreviousSibling)continue;var n=this.getChildlistChange(t.target);var r=t.previousSibling;function i(e,t){if(!e||n.oldPrevious.has(e)||n.added.has(e)||n.maybeMoved.has(e))return;if(t&&(n.added.has(t)||n.maybeMoved.has(t)))return;n.oldPrevious.set(e,t)}for(var s=0;s<t.removedNodes.length;s++){var o=t.removedNodes[s];i(o,r);if(n.added.has(o)){n.added.delete(o)}else{n.removed.set(o,true);n.maybeMoved.delete(o)}r=o}i(t.nextSibling,r);for(var s=0;s<t.addedNodes.length;s++){var o=t.addedNodes[s];if(n.removed.has(o)){n.removed.delete(o);n.maybeMoved.set(o,true)}else{n.added.set(o,true)}}}};e.prototype.wasReordered=function(e){function s(e){if(!e)return false;if(!r.maybeMoved.has(e))return false;var t=r.moved.get(e);if(t!==undefined)return t;if(i.has(e)){t=true}else{i.set(e,true);t=f(e)!==u(e)}if(i.has(e)){i.delete(e);r.moved.set(e,t)}else{t=r.moved.get(e)}return t}function u(e){var t=o.get(e);if(t!==undefined)return t;t=r.oldPrevious.get(e);while(t&&(r.removed.has(t)||s(t))){t=u(t)}if(t===undefined)t=e.previousSibling;o.set(e,t);return t}function f(e){if(a.has(e))return a.get(e);var t=e.previousSibling;while(t&&(r.added.has(t)||s(t)))t=t.previousSibling;a.set(e,t);return t}if(!this.treeChanges.anyParentsChanged)return false;this.processChildlistChanges();var t=e.parentNode;var n=this.treeChanges.get(e);if(n&&n.oldParentNode)t=n.oldParentNode;var r=this.childListChangeMap.get(t);if(!r)return false;if(r.moved)return r.moved.get(e);r.moved=new NodeMap;var i=new NodeMap;var o=new NodeMap;var a=new NodeMap;r.maybeMoved.keys().forEach(s);return r.moved.get(e)};return e}();var Summary=function(){function e(e,t){var n=this;this.projection=e;this.added=[];this.removed=[];this.reparented=t.all||t.element?[]:undefined;this.reordered=t.all?[]:undefined;e.getChanged(this,t.elementFilter,t.characterData);if(t.all||t.attribute||t.attributeList){var r=t.attribute?[t.attribute]:t.attributeList;var i=e.attributeChangedNodes(r);if(t.attribute){this.valueChanged=i[t.attribute]||[]}else{this.attributeChanged=i;if(t.attributeList){t.attributeList.forEach(function(e){if(!n.attributeChanged.hasOwnProperty(e))n.attributeChanged[e]=[]})}}}if(t.all||t.characterData){var s=e.getCharacterDataChanged();if(t.characterData)this.valueChanged=s;else this.characterDataChanged=s}if(this.reordered)this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e)}e.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)};e.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)};e.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)};e.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)};return e}();var validNameInitialChar=/[a-zA-Z_]+/;var validNameNonInitialChar=/[a-zA-Z0-9_\-]+/;var Qualifier=function(){function e(){}e.prototype.matches=function(e){if(e===null)return false;if(this.attrValue===undefined)return true;if(!this.contains)return this.attrValue==e;var t=e.split(" ");for(var n=0;n<t.length;n++){if(this.attrValue===t[n])return true}return false};e.prototype.toString=function(){if(this.attrName==="class"&&this.contains)return"."+this.attrValue;if(this.attrName==="id"&&!this.contains)return"#"+this.attrValue;if(this.contains)return"["+this.attrName+"~="+escapeQuotes(this.attrValue)+"]";if("attrValue"in this)return"["+this.attrName+"="+escapeQuotes(this.attrValue)+"]";return"["+this.attrName+"]"};return e}();var Selector=function(){function e(){this.uid=e.nextUid++;this.qualifiers=[]}Object.defineProperty(e.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:true,configurable:true});e.prototype.isMatching=function(t){return t[e.matchesSelector](this.selectorString)};e.prototype.wasMatching=function(e,t,n){if(!t||!t.attributes)return n;var r=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if(r!=="*"&&r!==e.tagName)return false;var i=[];var s=false;for(var o=0;o<this.qualifiers.length;o++){var u=this.qualifiers[o];var a=t.getAttributeOldValue(u.attrName);i.push(a);s=s||a!==undefined}if(!s)return n;for(var o=0;o<this.qualifiers.length;o++){var u=this.qualifiers[o];var a=i[o];if(a===undefined)a=e.getAttribute(u.attrName);if(!u.matches(a))return false}return true};e.prototype.matchabilityChange=function(e,t){var n=this.isMatching(e);if(n)return this.wasMatching(e,t,n)?2:1;else return this.wasMatching(e,t,n)?5:0};e.parseSelectors=function(t){function s(){if(r){if(i){r.qualifiers.push(i);i=undefined}n.push(r)}r=new e}function o(){if(i)r.qualifiers.push(i);i=new Qualifier}var n=[];var r;var i;var u=/\s/;var a;var f="Invalid or unsupported selector syntax.";var l=1;var c=2;var h=3;var p=4;var d=5;var v=6;var m=7;var g=8;var y=9;var b=10;var w=11;var E=12;var S=13;var x=14;var T=l;var N=0;while(N<t.length){var C=t[N++];switch(T){case l:if(C.match(validNameInitialChar)){s();r.tagName=C;T=c;break}if(C=="*"){s();r.tagName="*";T=h;break}if(C=="."){s();o();r.tagName="*";i.attrName="class";i.contains=true;T=p;break}if(C=="#"){s();o();r.tagName="*";i.attrName="id";T=p;break}if(C=="["){s();o();r.tagName="*";i.attrName="";T=v;break}if(C.match(u))break;throw Error(f);case c:if(C.match(validNameNonInitialChar)){r.tagName+=C;break}if(C=="."){o();i.attrName="class";i.contains=true;T=p;break}if(C=="#"){o();i.attrName="id";T=p;break}if(C=="["){o();i.attrName="";T=v;break}if(C.match(u)){T=x;break}if(C==","){T=l;break}throw Error(f);case h:if(C=="."){o();i.attrName="class";i.contains=true;T=p;break}if(C=="#"){o();i.attrName="id";T=p;break}if(C=="["){o();i.attrName="";T=v;break}if(C.match(u)){T=x;break}if(C==","){T=l;break}throw Error(f);case p:if(C.match(validNameInitialChar)){i.attrValue=C;T=d;break}throw Error(f);case d:if(C.match(validNameNonInitialChar)){i.attrValue+=C;break}if(C=="."){o();i.attrName="class";i.contains=true;T=p;break}if(C=="#"){o();i.attrName="id";T=p;break}if(C=="["){o();T=v;break}if(C.match(u)){T=x;break}if(C==","){T=l;break}throw Error(f);case v:if(C.match(validNameInitialChar)){i.attrName=C;T=m;break}if(C.match(u))break;throw Error(f);case m:if(C.match(validNameNonInitialChar)){i.attrName+=C;break}if(C.match(u)){T=g;break}if(C=="~"){i.contains=true;T=y;break}if(C=="="){i.attrValue="";T=w;break}if(C=="]"){T=h;break}throw Error(f);case g:if(C=="~"){i.contains=true;T=y;break}if(C=="="){i.attrValue="";T=w;break}if(C=="]"){T=h;break}if(C.match(u))break;throw Error(f);case y:if(C=="="){i.attrValue="";T=w;break}throw Error(f);case b:if(C=="]"){T=h;break}if(C.match(u))break;throw Error(f);case w:if(C.match(u))break;if(C=='"'||C=="'"){a=C;T=S;break}i.attrValue+=C;T=E;break;case E:if(C.match(u)){T=b;break}if(C=="]"){T=h;break}if(C=="'"||C=='"')throw Error(f);i.attrValue+=C;break;case S:if(C==a){T=b;break}i.attrValue+=C;break;case x:if(C.match(u))break;if(C==","){T=l;break}throw Error(f)}}switch(T){case l:case c:case h:case d:case x:s();break;default:throw Error(f)}if(!n.length)throw Error(f);return n};e.nextUid=1;e.matchesSelector=function(){var e=document.createElement("div");if(typeof e["webkitMatchesSelector"]==="function")return"webkitMatchesSelector";if(typeof e["mozMatchesSelector"]==="function")return"mozMatchesSelector";if(typeof e["msMatchesSelector"]==="function")return"msMatchesSelector";return"matchesSelector"}();return e}();var attributeFilterPattern=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;var MutationSummary=function(){function e(t){var n=this;this.connected=false;this.options=e.validateOptions(t);this.observerOptions=e.createObserverOptions(this.options.queries);this.root=this.options.rootNode;this.callback=this.options.callback;this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]}));if(!this.elementFilter.length)this.elementFilter=undefined;this.calcReordered=this.options.queries.some(function(e){return e.all});this.queryValidators=[];if(e.createQueryValidator){this.queryValidators=this.options.queries.map(function(t){return e.createQueryValidator(n.root,t)})}this.observer=new MutationObserverCtor(function(e){n.observerCallback(e)});this.reconnect()}e.createObserverOptions=function(e){function r(e){if(t.attributes&&!n)return;t.attributes=true;t.attributeOldValue=true;if(!e){n=undefined;return}n=n||{};e.forEach(function(e){n[e]=true;n[e.toLowerCase()]=true})}var t={childList:true,subtree:true};var n;e.forEach(function(e){if(e.characterData){t.characterData=true;t.characterDataOldValue=true;return}if(e.all){r();t.characterData=true;t.characterDataOldValue=true;return}if(e.attribute){r([e.attribute.trim()]);return}var n=elementFilterAttributes(e.elementFilter).concat(e.attributeList||[]);if(n.length)r(n)});if(n)t.attributeFilter=Object.keys(n);return t};e.validateOptions=function(t){for(var n in t){if(!(n in e.optionKeys))throw Error("Invalid option: "+n)}if(typeof t.callback!=="function")throw Error("Invalid options: callback is required and must be a function");if(!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");var r={callback:t.callback,rootNode:t.rootNode||document,observeOwnChanges:!!t.observeOwnChanges,oldPreviousSibling:!!t.oldPreviousSibling,queries:[]};for(var i=0;i<t.queries.length;i++){var s=t.queries[i];if(s.all){if(Object.keys(s).length>1)throw Error("Invalid request option. all has no options.");r.queries.push({all:true});continue}if("attribute"in s){var o={attribute:validateAttribute(s.attribute)};o.elementFilter=Selector.parseSelectors("*["+o.attribute+"]");if(Object.keys(s).length>1)throw Error("Invalid request option. attribute has no options.");r.queries.push(o);continue}if("element"in s){var u=Object.keys(s).length;var o={element:s.element,elementFilter:Selector.parseSelectors(s.element)};if(s.hasOwnProperty("elementAttributes")){o.attributeList=validateElementAttributes(s.elementAttributes);u--}if(u>1)throw Error("Invalid request option. element only allows elementAttributes option.");r.queries.push(o);continue}if(s.characterData){if(Object.keys(s).length>1)throw Error("Invalid request option. characterData has no options.");r.queries.push({characterData:true});continue}throw Error("Invalid request option. Unknown query request.")}return r};e.prototype.createSummaries=function(e){if(!e||!e.length)return[];var t=new MutationProjection(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling);var n=[];for(var r=0;r<this.options.queries.length;r++){n.push(new Summary(t,this.options.queries[r]))}return n};e.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(e){if(e)e.recordPreviousState()})};e.prototype.runQueryValidators=function(e){this.queryValidators.forEach(function(t,n){if(t)t.validate(e[n])})};e.prototype.changesToReport=function(e){return e.some(function(e){var t=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(t.some(function(t){return e[t]&&e[t].length}))return true;if(e.attributeChanged){var n=Object.keys(e.attributeChanged);var r=n.some(function(t){return!!e.attributeChanged[t].length});if(r)return true}return false})};e.prototype.observerCallback=function(e){if(!this.options.observeOwnChanges)this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t);if(this.options.observeOwnChanges)this.checkpointQueryValidators();if(this.changesToReport(t))this.callback(t);if(!this.options.observeOwnChanges&&this.connected){this.checkpointQueryValidators();this.observer.observe(this.root,this.observerOptions)}};e.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions);this.connected=true;this.checkpointQueryValidators()};e.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:undefined};e.prototype.disconnect=function(){var e=this.takeSummaries();this.observer.disconnect();this.connected=false;return e};e.NodeMap=NodeMap;e.parseElementFilter=Selector.parseSelectors;e.optionKeys={callback:true,queries:true,rootNode:true,oldPreviousSibling:true,observeOwnChanges:true};return e}();

// Drags and Resizes jQuery Plugins, Copyright Stephen Nielsen 2014
(function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);var n=t.handle===""?this:e(this.find(t.handle)[0]);return n.css("cursor",t.cursor).on("mousedown",function(n){var r=t.handle===""?e(this).addClass("draggable"):e(this).addClass("active-handle").parent().addClass("draggable"),i=r.css("z-index"),s=r.outerHeight(),o=r.outerWidth(),u=r.offset().top+s-n.pageY,a=r.offset().left+o-n.pageX;r.css("z-index",1e3).parents().on("mousemove",function(t){e(".draggable").offset({top:t.pageY+u-s,left:t.pageX+a-o}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",i)})});n.preventDefault()}).on("mouseup",function(){if(t.handle==="")e(this).removeClass("draggable");else e(this).removeClass("active-handle").parent().removeClass("draggable")})}})(jQuery);(function(e){e.fn.resizes=function(t){function u(){var r=n.outerWidth(),i=n.outerHeight();if(s!=r||o!=i){e(document).off("mousemove.resizes");if(typeof t.afterResize=="function")t.afterResize(n,r,i);a()}}function a(){if(document.selection)document.selection.empty();else window.getSelection().removeAllRanges()}var n=e(this),r,i,s,o;t=e.extend({anchored:false,minWidth:0,minHeight:0,resizeStart:null,duringResize:null,afterResize:null},t);return n.css("overflow","visible").mousedown(function(){s=n.outerWidth();o=n.outerHeight()}).append(e("<div>").addClass("resize-nub").mousedown(function(u){var f=parseInt(n.css("left")),l=parseInt(n.css("top"));r=u.clientX;i=u.clientY;if(typeof t.resizeStart=="function")t.resizeStart(n);e(document).off("mousemove.resizes");e(document).on("mousemove.resizes",function(e){var u=e.clientX-r,c=e.clientY-i,h=s+u*(t.anchored?1:2),p=o+c*(t.anchored?1:2),d=function(){if(h<t.minWidth){u=0;h=t.minWidth;return parseInt(n.css("left"))}else{return f}}(),v=function(){if(p<t.minHeight){c=0;p=t.minHeight;return parseInt(n.css("top"))}else{return l}}();if(typeof t.duringResize=="function")t.duringResize(n,h,p);n.css({width:h,height:p,left:t.anchored?parseInt(n.css("left")):d-u,top:t.anchored?parseInt(n.css("top")):v-c});a()})}).mouseup(function(e){u();e.stopPropagation()})).mouseup(u)}})(jQuery)