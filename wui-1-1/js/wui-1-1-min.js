/*! Wui 1.1
 * Copyright (c) 2013 Stephen Rolfe Nielsen - Utah State University Research Foundation 
 *
 * @license MIT
 * http://www.geekinaday.com/wui/wui-1-1/license.html
 */
(function(){var e;var t=function(){};var n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var r=n.length;var i=window.console=window.console||{};while(r--){e=n[r];if(!i[e]){i[e]=t}}})();var Wui=Wui||{};(function(e,t){e.ajaxSetup({cache:false,error:function(t){console.log(t);try{var n=e.parseJSON(t.responseText)}catch(r){var n={fatalError:"Aw Snap! There was a problem talking to the server."}}if(n!=null)Wui.errRpt(n.fatalError)}});Wui.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};Wui.getKeys=function(e){var t=[];for(var n in e)t.push(n);return t.sort()},Wui.scrollbarWidth=function(){var t,n,r;if(r===undefined){t=e('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body");n=t.children();r=n.innerWidth()-n.height(99).innerWidth();t.remove()}return r};Wui.randNum=function(e,t){t=t-e+1;return e+Math.floor(Math.random()*t)};Wui.maxZ=function(){var t=Math.max.apply(null,e.map(e("body > *, .wui-window"),function(t,n){if(e(t).css("position")!="static")return parseInt(e(t).css("z-index"))||0}));return Wui.isNumeric(t)?t:1};Wui.unwrapData=function(e){var t=this,n={},r=t.hasOwnProperty("dataContainer")?t.dataContainer:Wui.Data.prototype.dataContainer,i=t.hasOwnProperty("totalContainer")?t.totalContainer:Wui.Data.prototype.totalContainer,s=r&&e[r]?e[r]:e,o=i&&e[i]?e[i]:s.length;n.data=s;n.total=o;return n};Wui.fit=function(n,r,i){var r=r&&typeof r==="string"?r.toLowerCase():"height",s=i===true?Wui.scrollbarWidth():0;if(n instanceof Array&&n.length>0){var o=n[0].parent?n[0].parent:n[0].el.parent(),u=o.el?o.elAlias||o.el:o,a=(e(u)[0]===e("body")?e(t):e(u))[r]()-s,f=0,l=0,c=0;e.each(n,function(e,t){if(t.fit){f+=t.fit;t[r]=-1}else if(t[r]){if(Wui.isNumeric(t[r])){l+=t[r]}else{var n=Math.floor(parseFloat(t[r])/100*a);l+=t[r]=n}delete t.fit}else{f+=t.fit=1}});if(f==0&&l!=a){f=1;e.each(n,function(e,t){t.fit=t[r]/l;t[r]=-1})}c=f!==0?(a-l)/f:0;e.each(n,function(t,n){var i={};if(n.fit){i[r]=Math.floor(c*n.fit);e(n.el).css(i)}})}else{console.log("Improper collection specified",arguments)}};Wui.O=function(t){e.extend(this,{hidden:false},t)};Wui.O.prototype={addToDOM:function(t,n,r){var i=t.appendTo!==undefined?t.appendTo:t.prependTo!==undefined?t.prependTo:n!==undefined&&n!==null?n:t.parent!==undefined&&t.parent.elAlias!==undefined?t.parent.elAlias:t.parent!==undefined&&t.parent.el!==undefined?t.parent.el:e("body"),s=t.appendTo!==undefined?"append":t.prependTo!==undefined?"prepend":r!==undefined&&i[r]?r:"append";try{e(i)[s](t.el)}catch(o){try{e(i)[s](t)}catch(o){}}this.cssByParam(t);return true},append:function(e){var t=this,n=t.elAlias||t.el;n.append(e)},clear:function(){var e=this,t=e.elAlias||e.el;t.children().remove()},callRender:function(){var e=this;e.cssByParam(e);if(e.onRender)e.onRender();var t=false;for(var n in e.items)if(e.items[n].fit)t=true;if(e.fitDimension||t)Wui.fit(e.items,e.fitDimension||undefined);for(var n in e.items)if(e.items[n].callRender)e.items[n].callRender();if(e.afterRender)e.afterRender()},applyAttr:function(t,n){var r=n!==undefined&&(typeof n==="string"||typeof n==="number");if(r)e(this.el).attr(t,n);return r},cssByParam:function(n){var n=n||this;if(n.el&&n.el.addClass){if(n.applyAttr){n.applyAttr("id",n.id);n.applyAttr("name",n.name);n.applyAttr("tabindex",n.tabIndex)}try{if(n.attr&&typeof n.attr=="object")n.el.attr(n.attr)}catch(r){}if(Wui.isNumeric(n.height)&&n.height>=0)n.el.css({height:n.height});if(Wui.isNumeric(n.width)&&n.width>=0)n.el.css({width:n.width});if(n.width&&n.width.indexOf&&n.width.indexOf("%")!=-1)n.el.css({width:Math.floor(parseFloat(n.width)/100*(e(n.el.parent())[0]==e("body")[0]?e(t):n.el.parent()).width())});if(n.height&&n.height.indexOf&&n.height.indexOf("%")!=-1){n.el.css({height:Math.floor(parseFloat(n.height)/100*(e(n.el.parent())[0]==e("body")[0]?e(t):n.el.parent()).height())})}if(n.hidden)n.el.css("display","none");return n.el.addClass(n.cls)}else{return n}},each:function(e){for(var t=this.items.length-1;t>=0;t--)e(this.items[t],t);return true},hide:function(e,t){var n=["fadeOut"];for(var r in arguments)n.push(arguments[r]);this.hidden=true;return this.showHide.apply(this,n)},layout:function(){var e=this;e.cssByParam(e);var t=false;for(var n in e.items)if(e.items[n].fit)t=true;if(e.fitDimension||t)Wui.fit(e.items,e.fitDimension||undefined);for(var n in e.items)if(e.items[n].layout)e.items[n].layout()},place:function(e){var t=this;if(t.items===undefined)t.items=[];for(var n in t.items){t.items[n].parent=t;if(t.items[n].place)t.items[n].place();else t.addToDOM(t.items[n])}t.addToDOM(t);if(e&&typeof e=="function")e(t);if(t.parent===undefined)t.callRender();return t},push:function(){var e=this;if(e.items===undefined)e.items=[];for(var t in arguments){arguments[t].parent=e;if(arguments[t].place)arguments[t].place();else e.addToDOM(arguments[t]);if(arguments[t].onRender)arguments[t].onRender();if(arguments[t].layout)arguments[t].layout()}return Array.prototype.push.apply(e.items,arguments)},remove:function(){var e=this,t=null;if(e.parent){e.parent.each(function(n,r){if(n===e)t=r});if(t!==null)e.parent.splice(t,1)}this.el.remove();delete this},show:function(e,t){var n=["fadeIn"];for(var r in arguments)n.push(arguments[r]);this.hidden=false;return this.showHide.apply(this,n)},showHide:function(e,t,n){var t=typeof t=="number"?t:1;if(typeof arguments[1]=="function")n=arguments[0];return this.el[e](t,n)},splice:function(e,t){var n=this,r=n.elAlias||n.el;e=parseInt(e);if(n.items===undefined)n.items=[];for(var i=e;i<e+t;i++)if(n.items[i]&&n.items[i].el)n.items[i].el.remove();var s=Array.prototype.splice.apply(n.items,arguments),o=arguments.length-2;if(n.items.length==o){for(var i=0;i<n.items.length;i++){n.addToDOM(n.items[i],r);n.items[i].parent=n}}else if(n.items[e+o]==undefined){for(var i=e;i<n.items.length;i++){n.addToDOM(n.items[i],n.items[i-1].el,"after");n.items[i].parent=n}}else if(o!=0){for(var i=e+o;i>0;i--){n.addToDOM(n.items[i-1],n.items[i].el,"before");n.items[i-1].parent=n}}return s}};Wui.Data=function(t){e.extend(this,{data:[],identifier:null,name:null,params:{},url:null,waiting:false,ajaxConfig:{},total:0},t)};Wui.Data.prototype={dataContainer:null,totalContainer:null,ajaxWait:10,dataChanged:function(e){},dataEach:function(e){for(var t=this.data.length-1;t>=0;t--)e(this.data[t],t);return true},loadData:function(){var t=this,n=e.extend({data:t.params,dataType:"json",success:function(e){t.success.call(t,e)},error:function(e){t.failure.call(t,e)}},t.ajaxConfig);if(!t.waiting){t.waiting=true;t.setParams.apply(t,arguments);t.beforeLoad.apply(t,arguments);e.ajax(t.url,n)}else{setTimeout(function(){t.loadData.apply(t,arguments)},t.ajaxWait)}},setParams:function(t){if(t&&typeof t==="object")e.extend(this.params,t)},setData:function(n,r){var i=this;i.beforeSet(n);i.data=i.processData(n);i.total=r!==undefined?r:i.data.length;i.dataChanged(i.data);e(t).trigger(e.Event("datachanged"),[i.name||"wui-data",i]);i.afterSet(i.data)},beforeLoad:function(){},afterSet:function(e){},beforeSet:function(e){},success:function(e){var t=this,n=Wui.unwrapData.call(t,e);t.waiting=false;t.onSuccess(e);t.setData(n.data,n.total)},onSuccess:function(){},onFailure:function(){},failure:function(e){this.waiting=false;this.onFailure(e)},processData:function(e){return e}};Wui.Template=function(t){e.extend(this,t)};Wui.Template.prototype={template:null,data:null,make:function(t){var n=this;if(n.data&&n.template){var r=n.template;if(Wui.isNumeric(t))e.extend(n.data,{wuiIndex:t});return e(r.replace(/\{(\w*)\}/g,function(e,t){return n.data[t]!==undefined?n.data[t]:""}).replace(/\{\((.*?)\)\}/g,function(e,t){var r=[],i=[];for(var s in n.data)r.push(s);for(var s in r)i.push(n.data[r[s]]);r.push("return "+t);var o=Function.apply(null,r);return o.apply(null,i)}))}throw new Error("Template engine missing data and/or template.")}};Wui.DataList=function(t){e.extend(this,{afterMake:function(){},autoLoad:true,el:e("<div>"),displayMax:-1,init:function(){},multiSelect:false,selected:[]},t);this.init()};Wui.DataList.prototype=e.extend(new Wui.O,new Wui.Template,new Wui.Data,{dataChanged:function(){this.make()},clearSelect:function(){var t=this;t.el.find(".wui-selected").removeClass("wui-selected");t.selected=[];t.el.trigger(e.Event("wuichange"),[t,t.el,t.selected])},itemSelect:function(t,n){var r=this;r.el.find(".wui-selected").removeClass("wui-selected");t.el.addClass("wui-selected");r.selected=[t];if(!r.multiSelect&&!n)r.el.trigger(e.Event("wuiselect"),[r,t.el,t.rec]);return t},itemDeselect:function(t){var n=this;t.el.removeClass("wui-selected");n.selected=[];n.el.trigger(e.Event("deselect"),[n,t.el,t.rec]);return t},createItem:function(t){var n=this;t.el.click(function(r){var i=n.selected.length;if(!n.multiSelect||!(r.metaKey||r.ctrlKey)){if(i>0&&n.selected[0]===t){n.itemDeselect(t)}else{n.itemSelect(t)}}else{var s=e(this).hasClass("wui-selected");e(this).toggleClass("wui-selected",!s);if(s)e.each(n.selected,function(e,r){if(r==t)n.selected.splice(e,1)});else n.selected.push(t)}n.el.trigger(e.Event("wuichange"),[n,t.el,t.rec,n.selected])}).dblclick(function(r){n.itemSelect(t,true);n.el.trigger(e.Event("wuidblclick"),[n,t.el,t.rec]).trigger(e.Event("wuichange"),[n,t.el,t.rec,n.selected]);return false});return n.modifyItem(t)},modifyItem:function(e){return e.el},make:function(){var t=this,n=t.data||[],r=e("<div>");t.items=[];for(var i=0;t.displayMax<0&&i<n.length||t.displayMax>0&&i<t.displayMax&&i<n.length;i++){var s=t.data=n[i],o={el:Wui.Template.prototype.make.call(t,i),rec:s};Array.prototype.push.call(t.items,o);r.append(t.createItem(o))}t.clear();t.append(r.children().unwrap());t.data=n;t.autoLoad=true;t.afterMake();t.el.trigger(e.Event("refresh"),[t,t.data]);t.resetSelect()},onRender:function(){if(this.autoLoad){if(this.url===null)this.make();else this.loadData()}},refresh:function(){this.onRender()},resetSelect:function(){var t=this,n=t.selected;t.selected=[];e.each(n,function(e,n){t.each(function(e,r){var i=t.identifier?e.rec[t.identifier]===n.rec[t.identifier]:JSON.stringify(e.rec)===JSON.stringify(n.rec);if(i){if(t.multiSelect){e.el.addClass("wui-selected");t.selected.push(e,true)}else{t.itemSelect(e)}}})});t.scrollToCurrent()},scrollToCurrent:function(){var t=this,n=t.el.find(".wui-selected:first"),r=n.offsetParent(),i=function(){var t=0;n.prevAll().each(function(){t+=e(this).outerHeight()-.55});return t}();r.animate({scrollTop:i},500)},selectBy:function(e,t){var n=this,r=undefined;n.each(function(i,s){if(i.rec[e]&&i.rec[e]==t)return r=n.itemSelect(i)});n.scrollToCurrent();return r}});Wui.Button=function(t){e.extend(this,{el:e("<div>").attr({unselectable:"on"}),disabled:false,toolTip:null,tabIndex:0,text:"Button"},t);this.init()};Wui.Button.prototype=e.extend(new Wui.O,{click:function(){},init:function(){function n(n){if(!t.disabled){t.click(arguments);t.el.trigger(e.Event("wuibtnclick"),[t])}return false}var t=this;t.el.addClass("wui-btn").click(n).keyup(function(e){if(e.keyCode==13||e.keyCode==32)n(e)}).html(t.text).attr({title:t.toolTip,tabindex:t.tabIndex});if(t.disabled)t.disable()},disable:function(){this.disabled=true;this.el.toggleClass("disabled",this.disabled).attr("disabled",true).removeAttr("tabindex")},enable:function(){this.disabled=false;this.el.toggleClass("disabled",this.disabled).removeAttr("disabled").attr({tabindex:this.tabIndex})},setText:function(e){return this.el.html(e)}});Wui.Pane=function(t){e.extend(this,{bbar:[],border:true,borderStyle:{borderWidth:6},tbar:[],disabled:false,titleAlign:"left",height:"100%",maskHTML:"Empty",title:null},t);this.init()};Wui.Pane.prototype=e.extend(new Wui.O,{disable:function(){this.disabled=true;this.mask=this.container.clone().html(this.maskHTML).addClass("wui-mask").appendTo(this.container.parent());this.footer.each(function(e){if(e.disable)e.disable()});this.header.each(function(e){if(e.disable)e.disable()})},enable:function(){var e=this,t=e.mask||e.el.find(".wui-mask");e.disabled=false;if(t){t.fadeOut(500,function(){t.remove();e.mask=undefined;e.footer.each(function(e){if(e.enable)e.enable()});e.header.each(function(e){if(e.enable)e.enable()})})}},setMaskHTML:function(e){this.maskHTML=e;if(this.mask)this.mask.html(e)},init:function(t){var n=t||this;n.el=e("<div>").addClass("wui-pane").append(e("<div>").addClass("wui-pane-wrap").append(n.container=e("<div>").addClass("wui-pane-content")));n.sureEl=n.el;n.header=new Wui.O({el:e('<div><h1></h1><div class="wui-h-cntnt"></div></div>'),cls:"wui-pane-header wui-pane-bar",items:n.tbar,parent:n,appendTo:n.el});n.header.elAlias=n.header.el.children(".wui-h-cntnt");n.header.title=n.header.el.children("h1");n.footer=new Wui.O({el:e("<div>"),cls:"wui-pane-footer wui-pane-bar",items:n.bbar,parent:n,appendTo:n.el});n.elAlias=n.container;if(n.border)n.el.css(n.borderStyle);if(n.tbar.length!=0||n.title!==null){n.placeHeader();n.setTitle(n.title)}if(n.bbar.length!=0)n.placeFooter()},placeFooter:function(){this.sureEl.css({borderBottomWidth:0});this.sureEl.children(".wui-pane-wrap").css({paddingBottom:"40px"});this.footer.place();this.footer.callRender()},placeHeader:function(){this.sureEl.css({borderTopWidth:0});this.sureEl.children(".wui-pane-wrap").css({paddingTop:"40px"});this.setTitleAlign();this.header.place();this.header.callRender()},setTitle:function(e){if(e)this.header.title.text(e);return e},setTitleAlign:function(e){var t=this;t.titleAlign=e||t.titleAlign;t.header.title.addClass(t.titleAlign);var n=t.titleAlign==="right"?"left":"right";t.header.elAlias.css("text-align",n)},afterRender:function(){function t(){if(!e.parent)e.layout()}var e=this;document.addEventListener("animationstart",t,false);document.addEventListener("MSAnimationStart",t,false);document.addEventListener("webkitAnimationStart",t,false);if(e.disabled){e.disable()}else if(this.footer.items.length){this.footer.items[this.footer.items.length-1].el.focus()}}});Wui.Window=function(t){e.extend(this,{bbar:[],border:false,height:400,isModal:false,onWinClose:function(){},onWinOpen:function(){},tbar:[],title:"Window",maskHTML:'Loading <span class="wui-spinner"></span>',width:600},t);this.init()};Wui.Window.prototype=e.extend(new Wui.Pane,{close:function(){var t=this;if(t.onWinClose(t)!==false){t.windowEl.trigger(e.Event("close"),[t]);t.remove()}},disable:function(){Wui.Pane.prototype.disable.call(this);this.closeBtn.enable()},init:function(){function n(e){if(parseInt(t.el.css("z-index")||1)<=Wui.maxZ()){t.el.css("z-index",Wui.maxZ()+1)}}var t=this;t.appendTo=e("body");if(t.isModal){t.modalEl=e("<div>").addClass("wui-overlay");e("body").append(t.appendTo=t.modalEl.css("z-index",Wui.maxZ()+1))}t.tbar.push(t.closeBtn=new Wui.Button({click:function(){t.close()},text:"X"}));if(t.bbar.length==0)t.bbar=[new Wui.Button({click:function(){t.close()},text:"Close"})];Wui.Pane.prototype.init(t);t.windowEl=t.el.draggable({handle:t.header.el,start:n}).addClass("wui-window").resizable({minWidth:t.width,minHeight:t.height,resize:function(){t.container.trigger(e.Event("resize"),[t.container.width(),t.container.height()])}}).css("z-index",Wui.maxZ()+1).click(n);t.place();t.resize();if(t.isModal)t.el=t.modalEl;this.onWinOpen(t);t.windowEl.trigger(e.Event("open"),[t])},resize:function(t,n){var r=this,i=r.container[0].scrollHeight+r.header.el.outerHeight()*2;if(arguments.length!=0)r.windowEl.height(r.height=n).width(r.width=t);else r.windowEl.height(i>=e.viewportH()?e.viewportH()-10:i);r.windowEl.css({top:Math.floor(e.viewportH()/2-r.windowEl.height()/2)+"px",left:!r.isModal?Math.floor(e.viewportW()/2-r.windowEl.width()/2)+"px":"",position:!r.isModal?"absolute":""});r.container.trigger(e.Event("resize"),[r.container.width(),r.container.height()]);r.layout()}});Wui.errRpt=function(t,n,r,i){var s=new Wui.Window({isModal:true,title:n||"Error",items:[new Wui.O({el:e("<p>").addClass("err").html(t)})],width:350,height:200,bbar:r||[],onWinClose:i||function(){}});return false};Wui.msg=function(t,n,r,i){var s=i!==undefined?[new Wui.O({el:e("<p>").html(t)}),i]:[new Wui.O({el:e("<p>").html(t)})],o=new Wui.Window({title:n||"Message",isModal:true,items:s,width:350,height:200,onWinClose:r||function(){}});return o};Wui.confirm=function(t,n,r,i){var s=i!==undefined?[new Wui.O({el:e("<p>").html(t)}),i]:[new Wui.O({el:e("<p>").html(t)})],o=new Wui.Window({title:n||"Confirm",bbar:[new Wui.Button({text:"No",click:function(){o.doAnswer(false)}}),new Wui.Button({text:"Yes",click:function(){o.doAnswer(true)}})],isModal:true,items:s,width:350,height:200,doAnswer:function(e){if(r&&typeof r=="function")r(e);o.answerRun=true;o.close()},onWinClose:function(){return o.answerRun!==true?false:o.answerRun}});return o}})(jQuery,this);(function(t){t.fn.overrideNodeMethod=function(e,n){var r=t.fn[e];var i=this;t.fn[e]=function(){if(this[0]==i[0]){return n.apply(this,arguments)}else{return r.apply(this,arguments)}}};Wui.Form=function(e){t.extend(this,{disabled:false,labelPosition:"top"},e,{formChanged:false,el:t("<div>"),errors:[]});this.init()};Wui.Form.prototype=t.extend(new Wui.O,{clearData:function(){this.setData()},dispErrors:function(){var e="";for(var t in this.errors)e+=this.errors[t]+"<br/>";Wui.errRpt(e,"Form Errors")},each:function(e){for(var t=this.items.length-1;t>=0;t--)if(!(this.items[t]instanceof Wui.Note))e(this.items[t],t);return true},errCls:"wui-form-err",getData:function(){if(this.validate()){return this.getRawData()}else{this.dispErrors();return false}},getField:function(e){var t=null;this.each(function(n){if(n.name==e)t=n.val()});return t},getFrmItm:function(e){var t=undefined;this.each(function(n,r){if(n.name==e)t=n});return t},getRawData:function(){var e={};this.each(function(t){e[t.name]=t.val()});return e},init:function(){this.el.addClass("wui-form labels-"+this.labelPos)},normFrmItem:function(e){var n=this,r={labelPosition:n.labelPosition};if(!(e.disabled&&e.disabled===true))t.extend(r,{disabled:n.disabled});if(e.ftype&&!(e instanceof Wui.FormField)){var i=e.ftype.split(".");if(window[i[0]]&&window[i[0]][i[1]])return new window[i[0]][i[1]](t.extend(e,r));else throw"Object type "+e.ftype+" is not defined."}else if(e instanceof Wui.FormField){if(!e.hasOwnProperty("labelPosition"))e.el.removeClass("lbl-"+e.labelPosition).addClass("lbl-"+r.labelPosition);return t.extend(e,r)}else{return e}},place:function(){var e=this;if(e.items===undefined)e.items=[];t.each(e.items,function(t,n){e.items[t]=e.normFrmItem(n)});return Wui.O.prototype.place.apply(this,arguments)},push:function(){for(var e in arguments)arguments[e]=this.normFrmItem(arguments[e]);return Wui.O.prototype.push.apply(this,arguments)},remFrmItm:function(e){var t=this;this.each(function(n,r){if(n.name==e)Wui.O.prototype.splice.call(t,r,1)});return true},formChange:function(e,n){if(e)this.el.trigger(t.Event("formupdate"),[this,n]);this.formChanged=e;return this.formChanged},setData:function(e,t){if(e){this.setData();this.each(function(n){if(e[n.name])n.val(e[n.name],t)})}else{this.each(function(e){e.val(null,t)})}this.formChange(false)},disable:function(){return this.each(function(e){e.disable()})},enable:function(){return this.each(function(e){e.enable()})},setField:function(e,t){this.each(function(n){if(n.name==e)n.val(t)})},throwError:function(e){this.errors.push(e);return false},validate:function(){var e=this;e.errors=[];e.each(function(t){if(t.el&&t.el.toggleClass){t.el.toggleClass(e.errCls,!t.validate())}});this.formChange(false);return e.errors.length==0}});Wui.Note=function(e){t.extend(this,{html:"",align:null},e);this.init()};Wui.Note.prototype=t.extend(new Wui.O,{init:function(){this.el=t("<p>").html(this.html).addClass("wui-note "+this.align?this.align:"")}});Wui.Label=function(e){t.extend(this,{html:"",labelPosition:"top"},e);this.init()};Wui.Label.prototype=t.extend(new Wui.O,{init:function(){var e=this;e.el=t("<div>").addClass("wui-lbl"+" lbl-"+e.labelPosition).append(e.label=t("<label>").html(e.html).addClass(e.cls).attr(e.attr?e.attr:{}))},setLabel:function(e){this.label.html(this.html=e);return this.label.html()}});Wui.FormField=function(e){t.extend(this,{disabled:false,invalidMsg:null,label:null,labelPosition:"top",labelCls:null,required:false,validRegEx:null,validTest:null},e)};Wui.FormField.prototype=t.extend(new Wui.O,{init:function(){var e=this;e.value=e.hasOwnProperty("value")?e.value:null;e.el=t("<div>").addClass("wui-fe");if(e.label&&e.label.length>0){e.lbl=new Wui.Label({html:e.label,cls:e.labelCls,labelPosition:e.labelPosition});e.elAlias=e.el;e.el=e.lbl.el.append(e.elAlias)}return e.el},onRender:function(){if(this.disabled)this.disable();if(this.hasOwnProperty("value"))this.val(this.value,false)},disable:function(){this.disabled=true;if(this.el&&this.el.addClass)this.el.addClass("wui-disabled").find("input,textarea,iframe").attr("disabled","disabled")},enable:function(){this.disabled=false;if(this.el&&this.el.addClass)this.el.removeClass("wui-disabled").find(".wui-disabled,*[disabled=disabled]").removeAttr("disabled")},validate:function(){function r(){return e.parent&&e.parent.throwError?e.parent.throwError(n):false}var e=this,n=e.invalidMsg!==null?e.invalidMsg:e.label!=null?"A value for '"+e.label+"' is required.":e.name!==undefined?"A value for '"+e.name+"' is required.":"A required field has an improper value.";if(e.validTest&&typeof e.validTest=="function")if(e.validTest(e.val())==false)return r();if(e.validRegEx!==null)if(!e.validRegEx.test(t.trim(e.val())))return r();if(e.required&&t.trim(e.val()).length==0)return r();return true},val:function(){if(!arguments.length){return this.getVal()}else{this.setVal.apply(this,arguments);if(arguments[1]!==false)this.setChanged();return arguments}},setChanged:function(){if(this.parent&&this.parent instanceof Wui.Form)this.parent.formChange(true,this);this.valChange(this);if(this.el){this.el.trigger(t.Event("valchange"),[this,this.value])}else{if(this.parent&&this.parent instanceof Wui.Form)this.parent.el.trigger(t.Event("hiddenchange"),[this,this.value])}},getVal:function(){return this.value},setVal:function(e){this.value=e},valChange:function(e){}});Wui.Hidden=function(e){t.extend(this,{el:null},e);this.init()};Wui.Hidden.prototype=t.extend(new Wui.FormField,{init:function(){}});Wui.Text=function(e){t.extend(this,{blankCls:"empty",blankText:""},e,{field:t("<input>").attr({type:"text"})});this.init()};Wui.Text.prototype=t.extend(new Wui.FormField,{init:function(){var e=this;Wui.FormField.prototype.init.call(e);if(e.blankText&&e.blankText.length)e.setBlankText(e.blankText);e.append(Wui.Text.prototype.setListeners.call(e,e))},setBlankText:function(e){var n=this,r=n.field;n.blankText=e;if("placeholder"in document.createElement("input")){n.field.attr("placeholder",e)}else{var i=t.fn.val;r.overrideNodeMethod("val",function(){var e=i.apply(r,arguments);if(!arguments.length)if(e==n.blankText)return"";else return e});r.focusin(function(){if(i.call(r)==n.blankText)r.val("");r.removeClass(n.blankCls)}).blur(function(){var e=r.val();if(e===n.blankText||!e.length)r.addClass(n.blankCls).val(n.blankText)});console.log(r.val().length);if(!r.val().length)r.addClass(this.blankCls).val(e)}return e},setListeners:function(e){var t=this,n=null;e.field.focusin(function(){n=t.field.val()}).blur(function(){if(n!=t.field.val())t.setChanged()});if(this.setListeners!==Wui.Text.prototype.setListeners)this.setListeners(this);return e.field},fieldText:function(e){this.field.val(e);if(this.blankText&&this.blankText.length)this.setBlankText(this.blankText)},getVal:function(){return this.value=this.field.val()&&this.field.val().length?this.field.val():null},setVal:function(e){this.fieldText(this.value=e&&t.trim(e).length?e:null)}});Wui.Textarea=function(e){t.extend(this,e,{field:t("<textarea>"),height:100});this.init()};Wui.Textarea.prototype=t.extend(new Wui.Text,{init:function(){Wui.Text.prototype.init.call(this);this.field.css({height:this.field.parent().parent().height})}});Wui.Wysiwyg=function(e){t.extend(this,{showHTML:false},e,{blankText:null,field:t("<textarea>")});this.init()};Wui.Wysiwyg.prototype=t.extend(new Wui.Textarea,{onRender:function(){var e=[["bold","italic","underline","strikethrough"],["link","unlink","unorderedlist","orderedlist"],["justifyleft","justifycenter","justifyright"]];if(this.showHTML)e.push(["html"]);this.field.htmlarea({css:"body { color:#333; font:90%  Arial, Verdana, Helvetica, sans-serif !important; overflow:hidden; }"+"a {color:#09c; text-decoration:none;} a:hover {color:#0c9; text-decoration:underline;}",toolbar:e,loaded:function(){}});var t=this.field.parent(".wui-html").height(this.height).find("iframe");this.field.attr({tabindex:"-1"});this.field.parent(".wui-html").resizable({animateEasing:"linear",minWidth:this.field.outerWidth(),maxWidth:this.field.outerWidth(),minHeight:this.field.parent(".wui-html").find(".tools").outerHeight()*3,start:function(e,n){this.iFrameOrigHeight=t.height()},resize:function(e,n){t.height(n.size.height-(n.originalSize.height-this.iFrameOrigHeight))},handles:"se"});Wui.FormField.prototype.onRender.call(this)},setBlankText:function(){},setListeners:function(e){t(e.field).change(function(){e.val()})},valChange:function(){this.field.keyup()}});Wui.Radio=function(e){t.extend(this,{buttonStyle:false,name:"wui-radio",options:[],template:'<li><input type="radio" id="{id}" value="{val}" name="{name}" /><label for="{id}">{title}</label></li>'},e,{el:t("<div>")});this.init()};Wui.Radio.prototype=t.extend(new Wui.FormField,{init:function(){Wui.FormField.prototype.init.call(this);this.el.addClass("wui-radio");var e=this,n=new Wui.Template({template:this.template}),r=t("<ul>");t.each(e.options,function(i,s){s.name=e.name;s.id=e.name+"-"+i;r.append(n.make(n.data=s).children("label").attr({unselectable:"on"}).keyup(function(e){if(e.keyCode==13||e.keyCode==32)t(this).click()}).end().children("input").change(function(){e.elemChange(t(this))}).focus(function(){r.addClass("has-focus")}).blur(function(){r.removeClass("has-focus")}).end())});if(e.buttonStyle){r.addClass("button");r.find("label").attr({tabindex:0})}e.el.append(r)},elemChange:function(e){this.val(e.val())},onRender:function(){var e=this;e.el.find("input").each(function(){t(this).css({margin:"0 5px 0"+(e.buttonStyle?-1:0)*(5+t(this).outerWidth())+"px"})});Wui.FormField.prototype.onRender.call(e)},getVal:function(){return this.value},setVal:function(e){this.value=e;this.el.find("input[value='"+e+"']").attr("checked",true)}});Wui.Checkbox=function(e){t.extend(this,{name:"wui-checkbox",template:'<li><input type="checkbox" id="{id}" value="{val}" name="{name}" /><label for="{id}">{title}</label></li>'},e);this.init()};Wui.Checkbox.prototype=t.extend(new Wui.Radio,{calcVal:function(){var e=this,n=[];e.el.find("input:checked").each(function(){n.push(t(this).val())});return n.length>0?n.length>1?n:n[0]:null},elemChange:function(e){this.val(this.calcVal())},init:function(){if(this.options.length==0)this.options.push({val:1,title:""});Wui.Radio.prototype.init.call(this);this.el.removeClass("wui-radio").addClass("wui-checkbox");if(this.options.length==1){this.el.find("li label").text(this.el.children("label").text());this.el.children("label").text("")}},getVal:function(){return this.calcVal()},setVal:function(e){var n=this;if(t.isArray(e)){n.value=e}else if(e===null){n.value=null}else{n.value=[e]}if(n.options.length==1&&(typeof e=="number"||typeof e=="string")){n.el.find("input").prop("checked",!!parseInt(e)).siblings("li").toggleClass("checked",!!parseInt(e))}else{n.el.find("input").attr("checked",false);n.el.find("label").removeClass("checked");for(var r in n.value){n.el.find("input[value="+n.value[r]+"]").prop("checked",true).siblings("li").addClass("checked")}}},validTest:function(){if(this.required&&this.val()==0)return false;return true}});t.expr[":"].contains=t.expr.createPseudo(function(e){return function(n){return t(n).text().toUpperCase().indexOf(e.toUpperCase())>=0}});Wui.Combo=function(e){t.extend(this,{autoLoad:false,ddCls:"",dataName:null,emptyText:"(empty)",field:t("<input>").attr({type:"text"}),keepInline:false,minKeys:2,onBlur:function(){},searchLocal:true,titleItem:null,valueItem:null},e,{cls:e.cls?e.cls+" wui-combo":"wui-combo"});if(this.hasOwnProperty("valueItem")&&this.hasOwnProperty("titleItem")&&!this.hasOwnProperty("template")&&this.valueItem.length&&this.valueItem.length>0&&this.titleItem.length&&this.titleItem.length>0)this.template="<li>{"+this.titleItem+"}</li>";this.init()};Wui.Combo.prototype=t.extend(new Wui.Text,new Wui.Data,{enterKey:function(){if(this.selectItm!==null)this.selectItm.click()},keyDown:function(){if(!this.dd.is(":visible")){this.selectCurr();this.showDD();this.field.select()}else{var e=this.selectItm===null?0:this.dd.children(".selected ~ :visible:first").index(),t=e>0?e:0;this.rsltHover(this.dd.children(":eq("+t+")"))}},keyUp:function(){if(this.selectItm!==null){var e=this.selectItm.prevAll(":visible:first").index();if(e<0){this.field.focus().select();this.dd.children().removeClass("selected");this.selectItm=null}else{this.rsltHover(this.dd.children(":eq("+e+")"))}}},hideDD:function(){this.dd.hide()},init:function(){var e=this,n=e.keepInline?"wui-inline-dd":"";e.tplEngine=new Wui.Template({template:e.template});e.selectItm=null;Wui.Text.prototype.init.call(e);e.wrapper=t("<div>").addClass("dd-wrapper");e.ddSwitch=new Wui.Button({click:function(){if(!e.dd.is(":visible")){e.field.focus();e.selectCurr();e.showDD()}else{e.hideDD()}},text:"",tabIndex:-1,appendTo:e.wrapper,cls:"field-btn dd-switch"});e.append(e.wrapper.append(e.dd=t("<ul>").addClass("wui-combo-dd "+n+" "+e.ddCls),e.field.addClass("has-dd")));e.ddSwitch.place();if(e.dataName&&e.dataName.length>0){t(window).on("datachanged",function(t,n,r){if(n==e.dataName)e.setData(r.data)})}else{if(e.autoLoad)e.loadData();else e.renderData()}},renderData:function(){var e=this,n=t("<ul>");e.dd.html("");if(this.data.length>0){for(var r=0;r<this.data.length;r++){e.tplEngine.data=this.data[r];n.append(e.tplEngine.make().mouseenter(function(t){e.rsltHover(t)}).mousedown(function(t){e.field.isBlurring=false}).click(function(){e.rsltClick()}))}e.dd.append(n.children().unwrap())}else{e.dd.html(this.emptyText)}return true},rsltClick:function(){this.hideDD();this.val(this.data[this.selectItm.index()])},rsltHover:function(e){if(!e.addClass)e=t(e.currentTarget);this.dd.children().removeClass("selected");this.selectItm=e.addClass("selected")},setParams:function(e){if(this.searchFilter)t.extend(this.params,{srch:this.searchFilter})},searchData:function(e){this.searchFilter=e;if(this.searchLocal){this.showDD();this.dd.children()[e&&e.length>0?"hide":"show"]();this.dd.children(":contains("+e+")").show();this.rsltHover(this.dd.children(':contains("'+e+'"):first'))}else{if(e.length>=this.minKeys||e.length==0)this.loadData()}},selectCurr:function(e){if(e===undefined&&this.value!==null){for(var t in this.data){if(this.data[t][this.valueItem]===(this.value[this.valueItem]||this.value)){e=t;break}}}this.rsltHover(this.dd.children(":eq("+e+")"))},afterSet:function(e){this.renderData()},setListeners:function(e){e.field.focus(function(t){e.field.isBlurring=undefined}).blur(function(t){if(e.field.isBlurring!==false){e.hideDD();var n=false;for(var r in e.data){if(e.field.val()==e.data[r][e.titleItem]){n=true;break}}if(!n)e.val(null);e.onBlur()}}).click(function(){e.showDD();e.field.select()}).keyup(function(t){var n=e.field.val();switch(t.keyCode){case 40:break;case 38:break;case 13:break;case 9:break;default:e.searchData(n)}}).keydown(function(n){var r=e.field.val();if(r.length==0)e.value=null;if(e.data.length>0){switch(n.keyCode){case 40:e.keyDown();break;case 38:e.keyUp();break;case 13:case 9:e.enterKey();break}if(e.selectItm!==null){var i=0;e.selectItm.siblings(":lt("+e.selectItm.index()+"):visible").each(function(){i+=t(this).outerHeight()});e.selectItm.parent().animate({scrollTop:i},100)}}});return e.field},showDD:function(){if(!this.keepInline){var e=this.field,n=e.offset(),r=parseInt(this.dd.css("width")),i=r&&r>e.outerWidth()?r:e.outerWidth()-1;this.dd.appendTo("body").css({left:n.left+(n.left+i<t.viewportW()?0:e.outerWidth()-i),top:n.top+e.outerHeight(),width:i,display:"block",zIndex:Wui.maxZ()})}else{this.dd.css({zIndex:Wui.maxZ()}).show()}},getVal:function(){var e=this;return e.value&&e.value[e.valueItem]?e.value[e.valueItem]:e.value},setVal:function(e){var t=this;if(e===null){t.value=null;t.renderData();t.fieldText("")}else if(typeof e=="object"){t.value=e;var n=true;for(var r in t.data)if(t.data[r]==e)n=false;if(n){t.data.push(t.value);t.renderData()}var i=t.value[t.valueItem]}else{t.value=e;var i=t.value}for(var r in t.data){if(t.data[r][t.valueItem]===i){t.selectCurr(r);t.fieldText(t.data[r][t.titleItem]);break}}}});Wui.Link=function(e){t.extend(this,{invalidMsg:"The value for '"+(this.label?this.label:this.args&&this.args.name?this.args.name:"a link field")+"' is not a properly formatted link."},e);this.init()};Wui.Link.prototype=t.extend(new Wui.FormField,{buildOutput:function(){if(this.outputFld===undefined)this.elAlias.append(this.outputFld=t("<div>").attr({tabindex:-1}).addClass("feedback"));if(this.testLink()){var e=new Wui.Template({data:this.value,template:'<span>Preview:</span> <a href="{uri}" target="{target}" class="{((target == "_blank") ? "uri-new-win" : "")}">{title}</a>'});this.outputFld.html(e.make())}else{this.outputFld.html("Your link is improperly formatted.")}},init:function(){var e=this;e.items=[e.urlField=new Wui.Text({cls:"wui-link-third wui-link-focus",blankText:"URL",linkData:"uri"}),e.titleField=new Wui.Text({cls:"wui-link-third",blankText:"Display Text",linkData:"title"}),e.targetField=new Wui.Combo({cls:"wui-link-third no-margin",valueItem:"target",titleItem:"name",blankText:"Target",keepInline:true,data:[{target:"_self",name:"Opens In Same Window"},{target:"_blank",name:"Opens In New Window/Tab"}],linkData:"target"})];Wui.FormField.prototype.init.call(e);e.value={target:"_self",title:null,uri:null};e.el.append(e.elAlias=t("<div>").addClass("wui-hyperlink"));e.setListeners(e.urlField,e.titleField,e.targetField);e.targetField.val(e.value.target);e.urlField.field.keyup(function(n){if(e.titleField.field.val()==e.titleField.blankText)e.value.title=null;if(e.value.title===null)e.titleField.val(t(this).val())}).blur(function(){e.value.title=e.titleField.val()})},setListeners:function(){var e=this,n=arguments;t.each(n,function(t,r){(r.field.field||r.field).on("blur click keyup keydown mousedown",null,r,function(t){var n=t.data.val();if(n!==null&&n!={})e.value[t.data.linkData]=n;e.buildOutput()}).on("focus",null,r,function(e){for(var t in n)n[t].el.removeClass("wui-link-focus");e.data.el.addClass("wui-link-focus")})})},testLink:function(){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;var n=/(\/|\/([\w#!:.?+=&%@!\-\/]))/;return t.test(this.value.uri)||n.test(this.value.uri)},getVal:function(){return this.value},setVal:function(e){this.urlField.val(this.value.uri);this.titleField.val(this.value.title);this.targetField.val(this.value.target);this.buildOutput()},validTest:function(){if(this.required&&!this.testLink())return false;return true}});Wui.Datetime=function(e){t.extend(this,e,{field:t("<input>").attr({type:"text"})});this.init()};t.extend(Date,{CultureInfo:{name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM"},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,Date.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getTimezoneOffset:function(e,t){return t||false?Date.CultureInfo.abbreviatedTimeZoneDST[e.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[e.toUpperCase()]},getTimezoneAbbreviation:function(e,t){var n=t||false?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,r;for(r in n){if(n[r]===e){return r}}return null}});t.extend(Date.prototype,{getDaysInMonth:function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},addMilliseconds:function(e){this.setMilliseconds(this.getMilliseconds()+e);return this},addSeconds:function(e){return this.addMilliseconds(e*1e3)},addMinutes:function(e){return this.addMilliseconds(e*6e4)},addHours:function(e){return this.addMilliseconds(e*36e5)},addDays:Date.prototype.addDays=function(e){return this.addMilliseconds(e*864e5)},addWeeks:function(e){return this.addMilliseconds(e*6048e5)},addMonths:function(e){var t=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+e);this.setDate(Math.min(t,this.getDaysInMonth()));return this},addYears:function(e){return this.addMonths(e*12)},add:function(e){if(typeof e=="number"){this._orient=e;return this}var t=e;if(t.millisecond||t.milliseconds){this.addMilliseconds(t.millisecond||t.milliseconds)}if(t.second||t.seconds){this.addSeconds(t.second||t.seconds)}if(t.minute||t.minutes){this.addMinutes(t.minute||t.minutes)}if(t.hour||t.hours){this.addHours(t.hour||t.hours)}if(t.month||t.months){this.addMonths(t.month||t.months)}if(t.year||t.years){this.addYears(t.year||t.years)}if(t.day||t.days){this.addDays(t.day||t.days)}return this},getDayName:function(e){return e?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},getMonthName:function(e){return e?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},_toString:Date.prototype.toString,toString:function(e){var t=this;var n=function(t){return t.toString().length==1?"0"+t:t};return e?e.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(e){switch(e){case"hh":return n(t.getHours()<13?t.getHours():t.getHours()-12);case"h":return t.getHours()<13?t.getHours():t.getHours()-12;case"HH":return n(t.getHours());case"H":return t.getHours();case"mm":return n(t.getMinutes());case"m":return t.getMinutes();case"ss":return n(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return t.getFullYear();case"yy":return t.getFullYear().toString().substring(2,4);case"dddd":return t.getDayName();case"ddd":return t.getDayName(true);case"dd":return n(t.getDate());case"d":return t.getDate().toString();case"MMMM":return t.getMonthName();case"MMM":return t.getMonthName(true);case"MM":return n(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()}});Wui.Datetime.prototype=t.extend(new Wui.Text,{second:1e3,minute:6e4,hour:36e5,day:864e5,days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],shortDays:["sun","mon","tue","wed","thu","fri","sat"],months:["january","february","march","april","may","june","july","august","september","october","november","december"],shortMonths:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],sarcasmArray:["Not quite.","Huh?","Nope","Arg..","Sorry","What?","Bleck.","Nuh-uh.","Keep Trying.","No Entiendo."],minDate:null,displayDate:function(e){var t=this;if(e!=undefined){t.displayDiv.html(e);return e}if(t.value==""||t.value===null){return null}if(!(t.minDate!=null&&t.value<t.minDate))t.displayDiv.html(t.value.toString("ddd MM-dd-yyyy h:mm tt"));else t.displayDiv.html(t.value.toString("Less than minimum required date of MM-dd-yyyy"));return t.value.toString("MM/dd/yyyy h:mm tt")},getM:function(e){var t=0;while((e=e/10)>=1)t++;return t},init:function(){var e=this;Wui.Text.prototype.init.call(e);e.append(t("<div>").addClass("wui-date").append(e.setListenrs(e),e.displayDiv=t("<div>").addClass("feedback").attr({tabindex:-1})));e.field.datepicker({autoSize:true,buttonText:"",showOn:"button",minDate:e.minDate,constrainInput:false,beforeShow:function(t,n){if(e.validDate(e.value))e.field.datepicker("setDate",e.value);else e.val("")},onSelect:function(t,n){if(e.value!==null){e.value.setDate(n.selectedDay);e.value.setMonth(n.selectedMonth);e.value.setYear(n.selectedYear)}else{e.value=e.field.datepicker("getDate")}e.val(e.displayDate())}});e.el.find(".ui-datepicker-trigger").attr({tabindex:-1})},num2Dec:function(e){var n={a:1,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18};e=e.toString().replace(/ and /g," ").replace(/-/g," ");for(var r in n)e=e.replace(new RegExp("(^|[ ]|-)"+r+"(-|[ ]|$)","g")," "+n[r]+" ");var i=t.trim(e).split(/[ ]+/);partsArry=[],finalNum=0,pos=0;while(i[pos]){if(this.getM(i[pos])>2){partsArry.push(i.splice(0,pos+1));pos=0}pos++}partsArry.push(i);for(nums in partsArry){var s=this.txt2Num(partsArry[nums]);if(parseInt(s))finalNum+=parseInt(s)}return finalNum},processDate:function(e){var t=this,n=e||t.field.val();if(n.length>0){var r=t.translateDate(n);if(r.toString()=="Invalid Date"){t.displayDate(t.sarcasmArray[Wui.randNum(0,t.sarcasmArray.length-1)]);return}t.value=r;t.displayDate();return r}else{t.value=null;t.displayDate("")}},setListenrs:function(e){return e.field.keyup(function(t){e.processDate()})},setMinDate:function(e){this.minDate=this.translateDate(e.toString());this.field.datepicker("option","minDate",new Date(me.minDate.valueOf()+me.minute));return this.minDate},translateDate:function(e){var n=this,r=new Date,i=e,s=/\d{1,2}\/\d{1,2}\/\d{2,4}/,o=/([a|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|hundred|thousand|million|billion|trillion|and,\d,\s,-]+)\s((millisecond|second|minute|hour|day|week|month|year)+[s]*)\s(from|after|before|previous to)+\s(.+)$/,u=o.exec(e.toLowerCase());if(u!==null){var a=n.num2Dec(u[1]),f={from:1,after:1,before:-1,"previous to":-1},l=f[u[4]],c=n.translateDate(u[5]);return c["add"+u[3].charAt(0).toUpperCase()+u[3].slice(1)+"s"](a*l)}if(e.toLowerCase().match(/now/)!==null){return r}if(e.toLowerCase().match(/[stephen|steve] nielsen/)!==null){var h=r.getFullYear(),p="5/26/"+h,a=new Date(p);p=a>r?p:"5/26/"+(new Date(r.valueOf()+n.day*365)).getFullYear()+" ";n.value=new Date(p);var d=n.value.getMonth()+1+"/"+n.value.getDate()+"/"+n.value.getFullYear()+" "+" - "+parseInt((n.value.valueOf()-r.valueOf())/n.day)+" days left to buy a present.";n.displayDate(d);return}e=e.toLowerCase().replace("noon","12").replace("midnight","00:00").replace(/o.clock/,"").replace(/(\d+)[st|nd|rd|th]+/,function(e,t){return t}).replace(/(\d{4})-(\d{1,2})-(\d{1,2})/g,function(e,t,n,r){return n+"/"+r+"/"+t}).replace(/(\d{1,2})-(\d{1,2})-(\d{2,4})/g,function(e,t,n,r){return t+"/"+n+"/"+r}).replace(/^(\d{1,2})-(\d{1,2})[\s]*/,function(e,t,n){return t+"/"+n+" "}).replace("at","@").replace(/(today|tomorrow|yesterday)/,function(e,t){var i={today:0,tomorrow:1,yesterday:-1};newDt=new Date(r.valueOf()+n.day*i[t]);return newDt.getMonth()+1+"/"+newDt.getDate()+"/"+newDt.getFullYear()}).replace(/(next|last) ([a-z]{3,10})[ ]*([0-9]+)*/,function(e,i,s,o){var u=n.day*(i=="next"?1:-1),a=t.inArray(s,n.days)>-1?t.inArray(s,n.days):t.inArray(s,n.shortDays),f=t.inArray(s,n.months)>-1?t.inArray(s,n.months):t.inArray(s,n.shortMonths),l=a>-1?a:f>-1?f:-1,c=a>-1?"getDay":f>-1?"getMonth":"";if(l>-1){var h=r.valueOf(),p=new Date(h+=u);while(p[c]()!=l){h+=u;p=new Date(h)}if(f!=undefined&&f!=-1&&o.length!=0){p.setDate(parseInt(o))}return p.getMonth()+1+"/"+p.getDate()+"/"+p.getFullYear()+" "}else{return""}}).replace(/(\d{1,2})[ -]+([a-z]{3,10})([ -]*)/,function(e,r,i,s){return(t.inArray(i,n.months)>-1?t.inArray(i,n.months):t.inArray(i,n.shortMonths))+1+"/"+r+s.replace("-"," ")}).replace(/(\b(one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|twenty|thirty|forty|fifty|-)+\b)/g,function(e,t){return n.num2Dec(t)}).replace(/([a-z]{3,10}) (\d{1,2})[,]*/,function(e,r,i){return(t.inArray(r,n.months)>-1?t.inArray(r,n.months):t.inArray(r,n.shortMonths))+1+"/"+i}).replace(/^(\d{1,2}\/\d{1,2}(?![\d]))([\s|\/]*)(\d{0,4})/,function(e,t,i,s){if(s.length==2){var o=parseInt(r.getFullYear().toString().substr(2,4)),u=parseInt(r.getFullYear().toString().substr(0,2))*100,a=parseInt(s),f=100-a,l=o<50?-100*(f>=50?0:1):100*(f<50?0:1),c=u+a+l;return t+"/"+c}else if(s.length==4){return t+"/"+s}else{retDt=t+"/"+r.getFullYear().toString();withDt=new Date(retDt);return withDt.valueOf()>r.valueOf()?retDt:t+"/"+(new Date(r.valueOf()+n.day*365)).getFullYear()+" "}}).replace(/(\d{1,2}\/\d{1,2})\s(\d{4})/,function(e,t,n){return t+"/"+n});e=s.test(e)==true?e:r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear()+" "+e;e=e.replace(/(\d{1,2}\/\d{1,2}\/\d{4})\s(.+)/,function(e,t,n){if(n.indexOf("@")==-1)n="@ "+n;return t+" "+n}).replace(/\d[ ]*[a|p]$/,function(e){return e+"m"}).replace(/[a|p][.][m]*[.]*/,function(e){return e.replace(/[.]/g,"")}).replace(/\d.m/,function(e){return e.substring(0,e.length-2)+" "+e.substring(e.length-2,3)}).replace(/@ (\d+[ ]\d+)/,function(e,t){return t.replace(" ",":")}).replace(/@ (\d+)/,function(e,t,n,r){if(r.indexOf(":")!=-1)return e;else return e.trim()+":00 "}).replace(/@/g,"");return new Date(e)},txt2Num:function(e){var t=0,n=0;if(e.length==1){return e[0]}else{while(e[t+1]!==undefined){var r=parseInt(e[t]),i=parseInt(e[t+1]),s=parseInt(e[e.length-1]),o=this.getM(r)<=this.getM(i);if(t==0){n=o?r*i:r+i}else{if(o)n*=i;else n+=i}t++}}if(s!=i)return this.getM(s)>2?n*=s:n+=s;else return n},getVal:function(){return this.value},setVal:function(e){if(e!==null){if(typeof e=="string"){this.fieldText(e);this.processDate()}else{this.value=e;this.fieldText(this.displayDate())}}else{this.fieldText("");this.displayDiv.html("");this.value=null}},validDate:function(e){if(e!=null&&e.toString()=="Invalid Date")return false;else if(e==null)return false;else return true}});Wui.File=function(e){t.extend(this,{beforSelect:function(){},fileTypeFilter:null,upFieldName:"fileupload",upParams:{},upSuccess:function(){},upTarget:"",upTitleName:"title"},e,{field:t("<input>").attr({type:"text"})});this.init()};Wui.File.prototype=t.extend(new Wui.Text,{changeClick:function(){this.changeBtn.el.fadeOut("fast");this.upBtn.el.parents("div:first").fadeIn("slow");this.field.removeClass().focus()},onSelect:function(e){this.beforSelect(e,this);var n={};this.beforeSelectTitle=n[this.upTitleName]=this.field.val();if(this.fileTypeFilter!==null)t.extend(n,{file_type_filter:this.fileTypeFilter});e.params(t.extend(this.upParams,n));e.submit()},init:function(){var e=this;Wui.Text.prototype.init.call(e);e.wrapper=t("<div>").addClass("wui-file").append(e.field);e.append(e.wrapper);e.push(e.changeBtn=new Wui.Button({click:function(){e.fieldText("");e.field.removeAttr("disabled");e.changeClick()},text:"X",tabIndex:-1,cls:"file-change field-btn",parent:e}));e.upBtn=new Wui.Button({text:"Browse",cls:"field-btn",tabIndex:-1});e.cssByParam(e.upBtn).appendTo(e.wrapper).upload({name:this.upFieldName,action:this.upTarget,autoSubmit:false,onSubmit:function(){e.field.addClass("has-file uploading").attr("disabled",true).val("uploading...")},onFocus:function(){e.upBtn.el.addClass("selected")},onBlur:function(){e.upBtn.el.removeClass("selected")},onComplete:function(r){try{var i=t.parseJSON(r),s=Wui.unwrapData.call(e,i);console.log(s);e.field.removeClass("uploading empty");if(i.success==true){e.val(s.data,"upSuccess")}else{if(i.errors&&i.errors[0]&&i.errors[0].fileTypeError){Wui.errRpt(i.errors[0].fileTypeError,"Invalid File Type");e.field.removeClass("has-file uploading").removeAttr("disabled");if(e.beforeSelectTitle)e.fieldText(e.beforeSelectTitle)}else{e.upFailure(i)}}}catch(o){console.log(o,r);e.upFailure(o,r)}},onSelect:function(){e.onSelect(this)}})},upFailure:function(e,t){console.log(e,t);Wui.Text.prototype.val.call(this,"Upload Failure")},getVal:function(){return this.value||{}},setVal:function(e){this.value=this.value||{};t.extend(this.value,e)},val:function(e,t){var n=Wui.FormField.prototype.val.apply(this,arguments);if(this[t]&&typeof this[t]=="function")this[t]();return n},valChange:function(){var e=this;if(e.value){e.field.addClass("has-file").removeAttr("disabled");e.upBtn.el.parents("div:first").hide();e.changeBtn.el.show();e.field.addClass("has-file "+(e.value.extension!==undefined?"icon-"+e.value.extension.replace(".",""):"")).attr("disabled",true);e.fieldText(e.value[e.upTitleName])}else{e.field.removeClass();e.upBtn.el.parents("div:first").show();e.changeBtn.el.hide();e.field.val("")}}});Wui.input=function(e,n,r,i,s){if(i){if(!i.length){if(i instanceof Wui.FormField||i.ftype)i=[i];else i=[{ftype:"Wui.Text"}]}}else{i=[{ftype:"Wui.Text"}]}if(i.length==1)t.extend(i[0],{label:e,required:true,name:"inputField"});if(s!==undefined)i.splice(0,0,{ftype:"Wui.Note",html:s});var o=new Wui.Form({labelPosition:"left",items:i}),u=new Wui.Window({title:r||"Input",bbar:[new Wui.Button({text:"Cancel",click:function(){u.answerRun=true;u.close()}}),new Wui.Button({text:"Submit",click:function(){u.getVal()}})],isModal:true,items:[o],cls:"wui-input-window",width:600,height:250,getVal:function(){var e=o.getData();if(e){if(n&&typeof n=="function"){var t=0;for(var r in e)t++;if(t==1&&e.inputField)n(e.inputField);else n(e)}u.answerRun=true;u.close()}},onWinClose:function(){return u.answerRun!==true?false:u.answerRun}});return o};t.fn.htmlarea=function(e){if(e&&typeof e==="string"){var t=[];for(var r=1;r<arguments.length;r++){t.push(arguments[r])}var i=n(this[0]);var s=i[e];if(s){return s.apply(i,t)}}return this.each(function(){n(this,e)})};var n=window.jHtmlArea=function(e,t){if(e.jquery){return n(e[0])}if(e.jhtmlareaObject){return e.jhtmlareaObject}else{return new n.fn.init(e,t)}};n.fn=n.prototype={jhtmlarea:"0.7.5",init:function(e,i){if(e.nodeName.toLowerCase()==="textarea"){var s=t.extend({},n.defaultOptions,i);e.jhtmlareaObject=this;var o=this.textarea=t(e);var u=this.container=t("<div/>").addClass("wui-html").insertAfter(o);var a=this.toolbar=t("<div/>").addClass("tools").appendTo(u);r.initToolBar.call(this,s);var f=this.iframe=t("<iframe/>");var l=this.htmlarea=t("<div/>").append(f);u.append(l).append(o.hide());r.initEditor.call(this,s);r.attachEditorEvents.call(this);f.height(f.height()-a.height());a.width(o.width()-2);if(s.loaded){s.loaded.call(this)}}},dispose:function(){this.textarea.show().insertAfter(this.container);this.container.remove();this.textarea[0].jhtmlareaObject=null},execCommand:function(e,t,n){this.iframe[0].contentWindow.focus();this.editor.execCommand(e,t||false,n||null);this.updateTextArea()},ec:function(e,t,n){this.execCommand(e,t,n)},queryCommandValue:function(e){this.iframe[0].contentWindow.focus();return this.editor.queryCommandValue(e)},qc:function(e){return this.queryCommandValue(e)},getSelectedHTML:function(){var e=this.getRange();if(e.htmlText)return e.htmlText;else return t("<p>").append(t(e.cloneContents())).html()},getSelection:function(){if(this.editor.selection)return this.editor.selection;else return this.iframe[0].contentDocument.defaultView.getSelection()},getRange:function(){var e=this.getSelection();if(!e){return null}return e.getRangeAt?e.getRangeAt(0):e.createRange()},html:function(e){if(e){this.textarea.val(e);this.updateHtmlArea()}else{return this.toHtmlString()}},pasteHTML:function(e){this.iframe[0].contentWindow.focus();var n=this.getRange();if(n.pasteHTML){n.pasteHTML(e)}else{n.deleteContents();n.insertNode(t(e.indexOf("<")!=0?t("<span/>").append(e):e)[0])}n.collapse(false);n.select()},bold:function(){this.ec("bold")},italic:function(){this.ec("italic")},underline:function(){this.ec("underline")},strikeThrough:function(){this.ec("strikethrough")},removeFormat:function(){this.ec("removeFormat",false,[]);this.unlink()},link:function(){if(this.getRange().htmlText)this.ec("createLink",true);else this.ec("createLink",false,prompt("Link URL:","http://"))},unlink:function(){this.ec("unlink",false,[])},unorderedList:function(){this.ec("insertunorderedlist")},orderedList:function(){this.ec("insertorderedlist")},justifyLeft:function(){this.ec("justifyLeft")},justifyCenter:function(){this.ec("justifyCenter")},justifyRight:function(){this.ec("justifyRight")},formatBlock:function(e){this.ec("formatblock",false,e||null)},showHTMLView:function(){this.updateTextArea();this.textarea.show();this.htmlarea.hide();t("ul li:not(li:has(a.html))",this.toolbar).hide();t("ul:not(:has(:visible))",this.toolbar).hide();t("ul li a.html",this.toolbar).addClass("highlighted");this.container.css({height:"auto"});this.textarea.css({paddingBottom:"28px"})},hideHTMLView:function(){this.updateHtmlArea();this.textarea.hide();this.htmlarea.show();t("ul",this.toolbar).show();t("ul li",this.toolbar).show().find("a.html").removeClass("highlighted")},toggleHTMLView:function(){this.textarea.is(":hidden")?this.showHTMLView():this.hideHTMLView()},toHtmlString:function(){return t.trim(this.editor.body.innerHTML.replace(/MsoNormal/gi,"").replace(/<\/?link[^>]*>/gi,"").replace(/<\/?meta[^>]*>/gi,"").replace(/<\/?xml[^>]*>/gi,"").replace(/<\?xml[^>]*\/>/gi,"").replace(/<!--(.*)-->/gi,"").replace(/<!--(.*)>/gi,"").replace(/<!(.*)-->/gi,"").replace(/<w:[^>]*>(.*)<\/w:[^>]*>/gi,"").replace(/<w:[^>]*\/>/gi,"").replace(/<\/?w:[^>]*>/gi,"").replace(/<m:[^>]*\/>/gi,"").replace(/<m:[^>]>(.*)<\/m:[^>]*>/gi,"").replace(/<o:[^>]*>([.|\s]*)<\/o:[^>]*>/gi,"").replace(/<o:[^>]*>/gi,"").replace(/<o:[^>]*\/>/gi,"").replace(/<\/o:[^>]*>/gi,"").replace(/<\/?m:[^>]*>/gi,"").replace(/style=\"([^>]*)\"/gi,"").replace(/style=\'([^>]*)\'/gi,"").replace(/class=\"(.*)\"/gi,"").replace(/class=\'(.*)\'/gi,"").replace(/<p[^>]*>/gi,"<p>").replace(/<\/p[^>]*>/gi,"</p>").replace(/<span[^>]*>/gi,"").replace(/<\/span[^>]*>/gi,"").replace(/<st1:[^>]*>/gi,"").replace(/<\/st1:[^>]*>/gi,"").replace(/<font[^>]*>/gi,"").replace(/<\/font[^>]*>/gi,"").replace(/[\r\n]/g," ").replace(/<wordPasteong><\/wordPasteong>/gi,"").replace(/<p><\/p>/gi,"").replace(/\/\*(.*)\*\//gi,"").replace(/<!--/gi,"").replace(/-->/gi,"").replace(/<style[^>]*>[^<]*<\/style[^>]*>/gi,"").replace(/<hr>/gi,""))},toString:function(){return this.editor.body.innerText},updateTextArea:function(){this.textarea.val(this.toHtmlString());this.textarea.change()},updateHtmlArea:function(){this.editor.body.innerHTML=this.textarea.val()}};n.fn.init.prototype=n.fn;n.defaultOptions={toolbar:[["bold","italic","underline","link","unlink","strikethrough","orderedlist","unorderedlist"],["justifyleft","justifycenter","justifyright"]],css:null,toolbarText:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",justifyleft:"Left Justify",justifycenter:"Center Justify",justifyright:"Right Justify",link:"Insert Link",unlink:"Remove Link",unorderedlist:"Insert Unordered List",orderedlist:"Insert Ordered List",html:"Show/Hide HTML Source View"}};var r={toolbarButtons:{strikethrough:"strikeThrough",unorderedlist:"unorderedList",orderedlist:"orderedList",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",html:function(e){this.toggleHTMLView()}},initEditor:function(e){var n=this.editor=this.iframe[0].contentWindow.document;n.designMode="on";n.open();n.write(this.textarea.val());n.close();if(e.css)t("head",n).append(t("<style>").attr({type:"text/css"}).text(e.css))},initToolBar:function(e){function s(s){var o=t("<ul/>").appendTo(n.toolbar);for(var u=0;u<s.length;u++){var a=s[u];if((typeof a).toLowerCase()==="string"){if(a==="|"){o.append(t('<li class="separator"/>'))}else{var f=function(e){var t=r.toolbarButtons[e]||e;if((typeof t).toLowerCase()==="function"){return function(e){t.call(this,e)}}else{return function(){this[t]();this.editor.body.focus()}}}(a.toLowerCase());var l=e.toolbarText[a.toLowerCase()];o.append(i(a.toLowerCase(),l||a,f))}}else{o.append(i(a.css,a.text,a.action))}}}var n=this;var i=function(e,r,i){return t("<li/>").append(t('<a href="javascript:void(0);" tabindex="-1"/>').addClass(e).attr("title",r).click(function(){i.call(n,t(this))}))};if(e.toolbar.length!==0&&r.isArray(e.toolbar[0])){for(var o=0;o<e.toolbar.length;o++){s(e.toolbar[o])}}else{s(e.toolbar)}},attachEditorEvents:function(){function n(t){e.toolbar.css("opacity",100*(t.type!="blur"?1:0))}function r(t){e.updateHtmlArea();n(t)}function i(t){e.updateTextArea();n(t)}var e=this;this.textarea.click(r).keyup(r).keydown(r).mousedown(r).blur(r);t(this.editor).focus(i).click(i).keyup(i).keydown(i).mousedown(i).blur(i)},isArray:function(e){return e&&typeof e==="object"&&typeof e.length==="number"&&typeof e.splice==="function"&&!e.propertyIsEnumerable("length")}};t.fn.upload=function(e){e=t.extend({name:"file",enctype:"multipart/form-data",action:"",autoSubmit:true,onSubmit:function(){},onComplete:function(){},onSelect:function(){},onFocus:function(){},onBlur:function(){},params:{}},e);return new t.ocupload(this,e)},t.ocupload=function(n,r){var i=this;var s=(new Date).getTime().toString().substr(8);var o=t("<iframe "+'id="iframe'+s+'" '+'name="iframe'+s+'"'+"></iframe>").css({display:"none"});var u=t("<form "+'method="post" '+'enctype="'+r.enctype+'" '+'action="'+r.action+'" '+'target="iframe'+s+'"'+"></form>").css({margin:0,padding:0});var a=t("<input "+'name="'+r.name+'" '+'type="file" '+"/>").css({position:"relative",display:"block",opacity:0});n.wrap("<div></div>");u.append(a);n.after(u);n.after(o);var f=n.parent().addClass("wui-browse-btn");a.change(function(){i.onSelect();if(i.autoSubmit){i.submit()}}).focus(function(){i.onFocus()}).blur(function(){i.onBlur()});t.extend(this,{autoSubmit:r.autoSubmit,onSubmit:r.onSubmit,onComplete:r.onComplete,onSelect:r.onSelect,onBlur:r.onBlur,onFocus:r.onFocus,filename:function(){return a.attr("value")},params:function(e){if(e||false)r.params=t.extend(r.params,e);else return r.params},name:function(e){if(e||false)a.attr("name",value);else return a.attr("name")},action:function(e){if(e||false)u.attr("action",e);else return u.attr("action")},enctype:function(e){if(e||false)u.attr("enctype",e);else return u.attr("enctype")},set:function(n,r){function s(t,n){switch(t){default:throw new Error("[jQuery.ocupload.set] '"+e+"' is an invalid option.");break;case"name":i.name(n);break;case"action":i.action(n);break;case"enctype":i.enctype(n);break;case"params":i.params(n);break;case"autoSubmit":i.autoSubmit=n;break;case"onSubmit":i.onSubmit=n;break;case"onComplete":i.onComplete=n;break;case"onFocus":i.onFocus=n;break;case"onBlur":i.onBlur=n;break;case"onSelect":i.onSelect=n;break}}var r=r?r:false;var r=r?r:false;if(r){s(n,r)}else{t.each(n,function(e,t){s(e,t)})}},submit:function(){this.onSubmit();t.each(r.params,function(e,n){u.children("input[name="+e+"]").remove();u.append(t('<input type="hidden" name="'+e+'" value="'+n+'" />'))});u.submit();o.unbind().load(function(){var e=document.getElementById(o.attr("name"));i.onComplete(t(e.contentWindow.document.body).text())})}})}})(jQuery);(function($){Wui.Layout=function(e){$.extend(this,{bbar:[],targets:[],tbar:[]},e);this.init()};Wui.Layout.prototype=$.extend(new Wui.Pane,{init:function(){var e=this;e.itemsHolder=e.items;$.each(e.targets,function(t,n){e[n.name]=n=new Wui.O(n);n.el.css("overflow","auto")});e.items=e.targets;Wui.Pane.prototype.init.call(e)},onRender:function(){var e=this;e.items=e.itemsHolder;$.each(e.itemsHolder,function(t,n){n.appendTo=e[n.target].el});e.push.apply(e,e.itemsHolder)}});Wui.Tabs=function(e){$.extend(this,{bbar:[],items:[],tabsLeft:false,currentTab:null,tabsBottom:false,tabsHideHeader:null,tbar:[]},e);this.init()};Wui.Tabs.prototype=$.extend(new Wui.Pane,{init:function(){if(this.title===null)this.title="";Wui.Pane.prototype.init.call(this)},place:function(){var e=this;e.el.addClass("wui-tabs");if(e.items===undefined)e.items=[];$.each(e.items,function(t,n){n.tabCls="wui-tab "+(n.tabCls?" "+n.tabCls:"")+(e.tabsLeft?" left":"");if(n.tabsHideHeader){n.el.css({borderTopWidth:n.el.css("border-left-width")});n.el.addClass("wui-hide-heading")}e[e.tabsBottom?"footer":"header"].push(n.tab=new Wui.Button({text:n.title||"Tab "+(parseInt(t)+1),click:function(){e.giveFocus(n);if(n.layout&&typeof n.layout==="function")n.layout()},cls:n.tabCls}));if(e.bbar.length!=0)e.placeFooter()});return Wui.O.prototype.place.call(e,function(e){$.each(e.items,function(e,t){t.el.addClass("wui-tab-panel")})})},giveFocus:function(e,t){var n=this,t=t!==undefined?t:false;$.each(n.items,function(r,i){var s=i===e;i.tab.el.toggleClass("selected",s);i.el.toggleClass("active",s);if(s){n.currentTab=i;i.layout()}if(!t&&s)n.el.trigger($.Event("tabchange"),[n,i.tab,i])})},selectTabByText:function(e,t){var n=this,r=undefined;$.each(n.items,function(i,s){if($.trim(s.tab.text).toLowerCase()===$.trim(e).toLowerCase().replace(/_/g," ")){n.giveFocus(s,t);r=s}});return r},onRender:function(){this.giveFocus(this.items[0])}});Wui.Grid=function(e){$.extend(this,{bbar:[],columns:[],colUrl:null,colParams:{},data:null,defaultDataType:"string",multiSelect:false,hideHeader:false,selected:[],tbar:[]},e);this.init()};Wui.Grid.prototype=$.extend(new Wui.Pane,new Wui.DataList,{afterMake:function(){this.sizeCols();this.enable()},disable:function(){this.disabled=true;this.mask=this.container.clone().html(this.maskHTML).addClass("wui-mask").appendTo(this.container.parent())},doSort:function(e,t,n){var r=this;if(r.sorters.length>0){var i=r.sorters[e],s=t.rec[i.dataItem],o=n.rec[i.dataItem];var u=i.sortDir=="asc"?1:-1;var a=0;switch(i.dataType){case"date":s=new Date(s);o=new Date(o);a=s.getTime()==o.getTime()?0:s.getTime()>o.getTime()?1:-1;break;case"numeric":s=parseFloat(s)?parseFloat(s):0;o=parseFloat(o)?parseFloat(o):0;a=s==o?0:s>o?1:-1;break;default:a=$.trim(s).toUpperCase().localeCompare($.trim(o).toUpperCase())}if(a!=0||r.sorters[e+1]===undefined)return a*u;else return r.doSort(e+1,t,n)}else{return t.rec.wuiIndex>n.rec.wuiIndex?1:-1}},getColumns:function(){var e=this;if(e.colUrl&&e.colUrl.length){e.colProxy=new Wui.Data({url:e.colUrl,params:e.colParams,afterSet:function(t){e.setColumns(t)}});e.colProxy.loadData()}else if(e.columns.length){e.setColumns(e.columns)}else{}},init:function(){var e=this;e.disabled=true;Wui.Pane.prototype.init.call(e);e.el.addClass("wui-grid");e.tblContainer=$("<div><table></table></div>").addClass("grid-body").appendTo(e.elAlias);e.headingContainer=$("<div><ul></ul></div>").addClass("wui-gh").appendTo(e.elAlias);e.elAlias=e.tbl=e.tblContainer.children("table");e.heading=e.headingContainer.children("ul");e.cols=[];e.sorters=[];if(e.hideHeader)e.headingContainer.height(0)},layout:function(){Wui.O.prototype.layout.call(this);this.posDataWin();if(this.cols.length)this.sizeCols()},loadData:function(){this.setMaskHTML('Loading <span class="wui-spinner"></span>');if(!this.disabled)this.disable();Wui.Data.prototype.loadData.apply(this,arguments)},mngSorters:function(e,t){var n=this,r=["one","two","three","four","five"];if(t!==undefined){e.sortDir=t;n.sorters.push(e)}else{if(e.sortDir){if(e.sortDir=="desc"){delete e.sortDir;e.el.removeClass().addClass("wui-gc").addClass(e.cls);$.each(n.sorters,function(t,r){if(r==e)n.sorters.splice(t,1)})}else{e.sortDir="desc"}}else{if(n.sorters.length>5){e.el.removeClass().addClass("wui-gc").addClass(e.cls);return false}e.sortDir="asc";n.sorters.push(e)}}$.each(n.sorters,function(e,t){t.el.removeClass().addClass("wui-gc "+r[e]+" "+t.sortDir).addClass(t.cls)})},modifyItem:function(e){var t=this;$.each(t.renderers,function(t,n){var r=e.el.children(":eq("+n.index+")").children("div"),i=e.rec[n.dataItem];r.empty().append(n.renderer.call(null,r,i,e.rec,e.el))});return e.el},onRender:function(){var e=this,t=e.autoLoad;e.autoLoad=false;Wui.DataList.prototype.onRender.call(this);e.autoLoad=t;this.getColumns()},posDataWin:function(){var e=this.headingContainer.height()-1;this.tblContainer.css({height:this.container.height()-e,top:e})},refresh:function(){this.disable();if(this.url===null)this.setData(this.data);else this.getColumns()},renderColumn:function(col,idx){var me=this;$.extend(col,{dataType:col.dataType||me.defaultDataType,fit:col.fit===undefined?col.width===undefined?1:0:col.fit,cls:col.cls||"",renderer:col.renderer?function(a){if(typeof a!=="function"&&eval("typeof "+a)=="function")a=new Function("return "+a+".apply(this,arguments)");if(typeof a==="function")me.renderers.push({dataItem:col.dataItem,renderer:a,index:idx})}(col.renderer):"",index:idx,width:col.width===undefined?0:col.width,el:$("<li>").append($("<div>").text(col.heading)).attr({unselectable:"on"}).addClass("wui-gc "+col.cls).click(function(){me.sortList(col)})});if(me.columns.length>1){col.el.resizable({handles:"e",stop:function(){me.sizeCols()},resize:function(e,t){col.width=t.size.width;col.fit=0;Wui.fit(me.cols,"width",me.tbl.find("tr:first").height()*me.total>me.tblContainer.height())}})}me.cols.push(col);me.heading.append(col.el)},setColumns:function(e){var t=this;t.columns=e;t.heading.empty();t.cols=[];t.items=[];t.renderers=[];t.template="<tr class=\"{((wuiIndex % 2 == 0) ? 'even' : 'odd')}\">";$.each(e,function(e,n){t.template+="<td><div>"+(n.dataItem?"{"+n.dataItem+"}":"")+"</div></td>";if(n.vertical){t.el.addClass("has-vert-columns");if(n.cls)n.cls+=" vert-col";else n.cls="vert-col";n.width=50;delete n.fit}t.renderColumn(n,e)});t.template+="</tr>";if(t.autoLoad){if(t.url===null)t.setData(t.data);else t.loadData()}},sizeCols:function(){var e=this;Wui.fit(e.cols,"width",e.tbl.find("tr:first").height()*e.total>e.tblContainer.height());e.tbl.css({width:"1px"});for(var t=0;t<e.cols.length;t++){e.tbl.find("td:eq("+t+")").css({width:e.cols[t].el.outerWidth()-(t==0||t==e.cols.length-1?1:0)})}},sortList:function(e){var t=this;t.mngSorters(e);var n=t.items;n.sort(function(e,n){return t.doSort(0,e,n)});t.tbl.detach();$.each(n,function(e,n){var r=e%2==0;n.el.toggleClass("even",r).toggleClass("odd",!r).appendTo(t.tbl)});t.tbl.appendTo(t.tblContainer);t.sizeCols();t.resetSelect()}})})(jQuery);(function(e,t){Wui.stateMachine=function(t){e.extend(this,{changeMethod:function(){}},t)};Wui.stateMachine.prototype={setState:function(e){var n=t.location.href.split("#"),r=n[0]+"#",i=r;if(e&&typeof e==="object"){i=r+this.stringify(e)}else if(e&&typeof e==="string"){i=r+e}return t.location=i},stringify:function(e){var t="";for(var n in e){var r=Wui.getKeys(e[n].params);t+=(n>0?"/":"")+e[n].view;for(var i=0;i<r.length;i++)t+=(i>0?"&":"?")+r[i]+"="+e[n].params[r[i]]}return t},getState:function(){var e=[];t.location.hash.replace(/([^\/^#]+)/g,function(t){var n={};t=t.replace(/(\?|\&)([^=]+)\=([^&]+)/g,function(e,t,r,i){n[r]=i;return""});e.push({view:t,params:n})});return e},getParam:function(e,t){var n=this.getState(),r=undefined;for(var i in n)if(n[i].view===e&&n[i].params[t])return n[i].params[t];return r},setParam:function(e,t,n){var r=this.getState();for(var i in r){if(r[i].view===e&&r[i].params[t]){r[i].params[t]=n;this.setState(r);return n}}return undefined},changeView:function(e,t){var n=this.getState();for(var r in n)if(n[r].view===e)n[r].view=t;this.setState(n)},setView:function(e,t){var n=[{view:e}];if(t)n[0].params=t;this.setState(n)},getViews:function(){var e=this.getState(),t=[];for(var n in e)t.push(e[n].view);return t},clearState:function(){this.setState()},addChangeMethod:function(n){var r=this,i=r.getState(),s=r.changeMethod;r.changeMethod=function(e){s(e);n(e)};e(t).off("hashchange").on("hashchange",function(){r.changeMethod.call(r,i)})},turnOff:function(){me.changeMethod=function(){};e(t).off("hashchange")}}})(jQuery,this);(function(e,t,n){"$:nomunge";function f(e){e=e||location.href;return"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var r="hashchange",i=document,s,o=e.event.special,u=i.documentMode,a="on"+r in t&&(u===n||u>7);e.fn[r]=function(e){return e?this.bind(r,e):this.trigger(r)};e.fn[r].delay=50;o[r]=e.extend(o[r],{setup:function(){if(a){return false}e(s.start)},teardown:function(){if(a){return false}e(s.stop)}});s=function(){function p(){var n=f(),i=h(u);if(n!==u){c(u=n,i);e(t).trigger(r)}else if(i!==u){location.href=location.href.replace(/#.*/,"")+i}o=setTimeout(p,e.fn[r].delay)}var s={},o,u=f(),l=function(e){return e},c=l,h=l;s.start=function(){o||p()};s.stop=function(){o&&clearTimeout(o);o=n};!a&&function(){var t,n;s.start=function(){if(!t){n=e.fn[r].src;n=n&&n+f();t=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||c(f());p()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow;i.onpropertychange=function(){try{if(event.propertyName==="title"){t.document.title=i.title}}catch(e){}}}};s.stop=l;h=function(){return f(t.location.href)};c=function(n,s){var o=t.document,u=e.fn[r].domain;if(n!==s){o.title=i.title;o.open();u&&o.write('<script>document.domain="'+u+'"</script>');o.close();t.location.hash=n}}}();return s}()})(jQuery,this)